â¯ åˆšæ‰çš„å¯¹è¯å‡ºé”™é€€å‡ºäº†ï¼Œè¯·ä½ å®Œæ•´çš„é˜…è¯»ï¼šå¯¹è¯å‡ºé”™å‰è®°å½•.txt,ç„¶åæ¥ç€ç»§ç»­å·¥ä½œ

â— æˆ‘æ¥è¯»å–å¯¹è¯å‡ºé”™å‰çš„è®°å½•æ–‡ä»¶ã€‚

â— Read(å¯¹è¯å‡ºé”™å‰è®°å½•.txt)
  â¿ Â Read 3539 lines

â— å¥½çš„,æˆ‘çœ‹åˆ°äº†æ–°çš„é—®é¢˜ã€‚è®©æˆ‘ç»§ç»­ä¿®å¤: 1. proc_utils.h åŒ…å«è·¯å¾„é—®é¢˜ 2. chrome_enums.pbzero.h æ–‡ä»¶ç¼ºå¤± è®©æˆ‘å…ˆä¿®å¤ proc_utils.h:

â— Read(src\third_party\perfetto\include\perfetto\base\proc_utils.h)
  â¿ Â Read 30 lines

â— Update(src\third_party\perfetto\include\perfetto\base\proc_utils.h)
  â¿ Â Added 1 line, removed 1 line
      19
      20   #include <stdint.h>
      21
      22 -#include "perfetto/base/build_config.h"
      22 +#include "third_party/perfetto/include/perfetto/base/build_config.h"
      23
      24   #if PERFETTO_BUILDFLAG(PERFETTO_OS_WIN)
      25   extern "C" {

â— ç°åœ¨è®©æˆ‘æ£€æŸ¥å¹¶åˆ›å»º chrome_enums.pbzero.h stub:

â— Bash(ls -la "F:/code/naiveproxy-ohos/src/base/tracing/protos/" 2>/dev/null || echo "Directory does not exist")
  â¿ Â total 131
     drwxr-xr-x 1 hotyi 197121      0  1æœˆ  8 12:55 .
     drwxr-xr-x 1 hotyi 197121      0  1æœˆ  3 14:29 ..
     â€¦ +8 lines (ctrl+o to expand)

â— å¥½çš„,chrome_enums.proto å­˜åœ¨ã€‚è®©æˆ‘æŸ¥çœ‹å®ƒå¹¶åˆ›å»ºå¯¹åº”çš„ stub:

â— Read(src\base\tracing\protos\chrome_enums.proto)
  â¿ Â Read 115 lines

â— ç°åœ¨è®©æˆ‘åˆ›å»º chrome_enums.pbzero.h stub:

â— Write(src\base\tracing\protos\chrome_enums.pbzero.h)
  â¿ Â Wrote 1 lines to src\base\tracing\protos\chrome_enums.pbzero.h
     // Copyright 2025 Stub implementation for OpenHarmony
     // This is a stub file to satisfy build dependencies
     #ifndef BASE_TRACING_PROTOS_CHROME_ENUMS_PBZERO_H_
     #define BASE_TRACING_PROTOS_CHROME_ENUMS_PBZERO_H_
     #include <stdint.h>
     namespace perfetto {
     namespace protos {

â— ç°åœ¨è®©æˆ‘æäº¤è¿™äº›ä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ proc_utils.h åŒ…å«è·¯å¾„å’Œæ·»åŠ 
      chrome_enums.pbzero.h stub")
  â¿ Â [master c9b94506] ä¿®å¤ proc_utils.h åŒ…å«è·¯å¾„å’Œæ·»åŠ  chrome_enums.pbzero.h stub
      3 files changed, 2354 insertions(+), 1931 deletions(-)
      create mode 100644 src/base/tracing/protos/chrome_enums.pbzero.h
     â€¦ +2 lines (ctrl+o to expand)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        7ff3e88b..c9b94506  master -> master

â— å®Œç¾!è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤:

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ä»ç¼–è¯‘é”™è¯¯ä¸­,æˆ‘å‘ç°äº†ä¸¤ä¸ªæ–°é—®é¢˜:

  1. proc_utils.h åŒ…å«è·¯å¾„é—®é¢˜
    - ä½¿ç”¨ç›¸å¯¹è·¯å¾„ perfetto/base/build_config.h
    - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶
    - é”™è¯¯: fatal error: 'perfetto/base/build_config.h' file not found
  2. chrome_enums.pbzero.h æ–‡ä»¶ç¼ºå¤±
    - current_process.h åŒ…å«äº†è¿™ä¸ªæ–‡ä»¶
    - è¿™æ˜¯ä¸€ä¸ª protobuf ç”Ÿæˆçš„æ–‡ä»¶,ä½†æˆ‘ä»¬æ²¡æœ‰ç”Ÿæˆå®ƒ
    - é”™è¯¯: fatal error: 'base/tracing/protos/chrome_enums.pbzero.h' file not found

  è§£å†³æ–¹æ¡ˆ

  1. ä¿®å¤ proc_utils.h åŒ…å«è·¯å¾„
  // ä¿®æ”¹å‰
  #include "perfetto/base/build_config.h"

  // ä¿®æ”¹å
  #include "third_party/perfetto/include/perfetto/base/build_config.h"
    - ä½¿ç”¨ä» src/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
    - ä¸å…¶ä»– Perfetto å¤´æ–‡ä»¶ä¿æŒä¸€è‡´
  2. åˆ›å»º chrome_enums.pbzero.h stub
    - åŸºäº chrome_enums.proto åˆ›å»º stub
    - å®šä¹‰äº†ä¸¤ä¸ªæšä¸¾:
        - ProcessType - 42 ä¸ªè¿›ç¨‹ç±»å‹
      - ThreadType - 53 ä¸ªçº¿ç¨‹ç±»å‹
    - æ‰€æœ‰æšä¸¾å€¼éƒ½ä¸ proto æ–‡ä»¶ä¿æŒä¸€è‡´

  ä¸ºä»€ä¹ˆè¿™æ ·æœ‰æ•ˆ?

  1. ç»Ÿä¸€åŒ…å«è·¯å¾„ç­–ç•¥
    - æ‰€æœ‰ Perfetto å¤´æ–‡ä»¶éƒ½ä½¿ç”¨å®Œæ•´è·¯å¾„
    - ä» src/ ç›®å½•å¼€å§‹çš„ç»å¯¹è·¯å¾„
    - é¿å…äº†ç›¸å¯¹è·¯å¾„çš„æ­§ä¹‰
  2. æ»¡è¶³ protobuf ä¾èµ–
    - current_process.h éœ€è¦ chrome_enums.pbzero.h
    - æä¾› stub å®ç°æ»¡è¶³ç¼–è¯‘éœ€æ±‚
    - æšä¸¾å€¼å¯ä»¥åœ¨ä»£ç ä¸­æ­£å¸¸ä½¿ç”¨
  3. ä¿æŒ stub åŒ–ç­–ç•¥
    - æ‰€æœ‰ tracing åŠŸèƒ½éƒ½è¢«ç¦ç”¨
    - æšä¸¾å®šä¹‰ä¸ä¼šäº§ç”Ÿè¿è¡Œæ—¶å¼€é”€
    - ä»£ç å¯ä»¥æ­£å¸¸ç¼–è¯‘å’Œé“¾æ¥

  ä¿®æ”¹çš„æ–‡ä»¶

  1. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/base/proc_utils.h
    - ä¿®å¤åŒ…å«è·¯å¾„
  2. æ–°å¢: src/base/tracing/protos/chrome_enums.pbzero.h
    - åˆ›å»º ProcessType å’Œ ThreadType æšä¸¾ stub
    - 113 è¡Œä»£ç 

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 30% (1451/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚è¿™äº›ä¿®å¤åº”è¯¥èƒ½è§£å†³ proc_utils.h å’Œ chrome_enums.pbzero.h ç›¸å…³çš„é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Cogitated for 1m 32s

â¯ [1277/4772] CXX obj/base/base/asan_invalid_access.o
  [1278/4772] CXX obj/base/base/variant_map.o
  [1279/4772] CXX obj/base/base/debugger.o
  [1280/4772] CXX obj/base/base/command_line.o
  [1281/4772] CXX obj/base/base/profiler.o
  [1282/4772] ACTION
  //net/base/registry_controlled_domains:registry_controlled_domains(//build/toolchain/android:android_clang_arm64)
  [1283/4772] CXX obj/base/base/dump_without_crashing.o
  In file included from ../../base/debug/dump_without_crashing.cc:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1284/4772] CXX obj/base/base/environment.o
  [1285/4772] CXX obj/base/base/block_tests_writing_to_special_dirs.o
  [1286/4772] CXX obj/base/base/file_tracing.o
  In file included from ../../base/files/file_tracing.cc:10:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1287/4772] CXX obj/base/base/task_trace.o
  In file included from ../../base/debug/task_trace.cc:12:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1288/4772] CXX obj/base/base/file.o
  In file included from ../../base/files/file.cc:16:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1289/4772] CXX obj/base/base/safe_base_name.o
  [1290/4772] CXX obj/base/base/callback_helpers.o
  [1291/4772] CXX obj/base/base/features.o
  In file included from ../../base/features.cc:12:
  In file included from ../../base/task/sequence_manager/sequence_manager_impl.h:45:
  In file included from ../../base/task/sequence_manager/thread_controller.h:32:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1292/4772] CXX obj/base/base/file_path.o
  In file included from ../../base/files/file_path.cc:25:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1293/4772] CXX obj/base/base/scoped_file.o
  [1294/4772] CXX obj/base/base/callback_internal.o
  [1295/4772] CXX obj/base/base/memory_mapped_file.o
  [1296/4772] CXX obj/base/base/feature_list.o
  [1297/4772] CXX obj/base/base/legacy_hash.o
  [1298/4772] CXX obj/base/base/hash.o
  [1299/4772] CXX obj/base/base/json_string_value_serializer.o
  [1300/4772] CXX obj/base/base/concurrent_closures.o
  [1301/4772] CXX obj/base/base/json_value_converter.o
  [1302/4772] CXX obj/base/base/json_reader.o
  [1303/4772] CXX obj/base/base/string_escape.o
  [1304/4772] CXX obj/base/base/lazy_instance_helpers.o
  [1305/4772] CXX obj/base/base/values_util.o
  [1306/4772] CXX obj/base/base/json_writer.o
  [1307/4772] CXX obj/base/base/linux_util.o
  [1308/4772] CXX obj/base/base/json_parser.o
  [1309/4772] CXX obj/base/base/location.o
  In file included from ../../base/location.cc:12:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1310/4772] CXX obj/base/base/aligned_memory.o
  [1311/4772] CXX obj/base/base/platform_shared_memory_handle.o
  [1312/4772] CXX obj/base/base/post_delayed_memory_reduction_task.o
  [1313/4772] CXX obj/base/base/raw_ptr_asan_bound_arg_tracker.o
  [1314/4772] CXX obj/base/base/platform_shared_memory_region.o
  [1315/4772] CXX obj/base/base/memory_pressure_monitor.o
  [1316/4772] CXX obj/base/base/raw_ptr_asan_service.o
  [1317/4772] CXX obj/base/base/raw_ptr_asan_hooks.o
  [1318/4772] CXX obj/base/base/memory_pressure_listener.o
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1319/4772] CXX obj/base/base/memory_pressure_listener_registry.o
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1320/4772] CXX obj/base/base/shared_memory_mapper.o
  [1321/4772] CXX obj/base/base/ref_counted.o
  [1322/4772] CXX obj/base/base/logging.o
  In file included from ../../base/logging.cc:48:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/logging.cc:52:
  In file included from ../../base/trace_event/typed_macros.h:16:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/string_helpers.h:21:
  In file included from ../../third_party/perfetto/include/perfetto/base/logging.h:24:
  In file included from ../../third_party/perfetto/include/perfetto/base/compiler.h:24:
  ../../third_party/perfetto/include/perfetto/public/compiler.h:23:9: warning: 'PERFETTO_LIKELY' macro redefined
  [-Wmacro-redefined]
  23 | #define PERFETTO_LIKELY(...) __builtin_expect(!!(__VA_ARGS__), 1)
  |         ^
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:28:9: note: previous
  definition is here
  28 | #define PERFETTO_LIKELY(x) (x)
  |         ^
  In file included from ../../base/logging.cc:52:
  In file included from ../../base/trace_event/typed_macros.h:16:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/string_helpers.h:21:
  In file included from ../../third_party/perfetto/include/perfetto/base/logging.h:24:
  ../../third_party/perfetto/include/perfetto/base/compiler.h:65:9: warning: 'PERFETTO_DEBUG_FUNCTION_IDENTIFIER'
  macro redefined [-Wmacro-redefined]
  65 | #define PERFETTO_DEBUG_FUNCTION_IDENTIFIER() __PRETTY_FUNCTION__
  |         ^
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:43:9: note: previous
  definition is here
  43 | #define PERFETTO_DEBUG_FUNCTION_IDENTIFIER() ""
  |         ^
  5 warnings generated.
  [1323/4772] CXX obj/base/base/read_only_shared_memory_region.o
  [1324/4772] CXX obj/base/base/safety_checks.o
  [1325/4772] CXX obj/base/base/shared_memory_mapping.o
  [1326/4772] CXX obj/base/base/shared_memory_security_policy.o
  [1327/4772] CXX obj/base/base/ref_counted_memory.o
  [1328/4772] CXX obj/base/base/unsafe_shared_memory_pool.o
  [1329/4772] CXX obj/base/base/weak_ptr.o
  [1330/4772] CXX obj/base/base/unsafe_shared_memory_region.o
  [1331/4772] CXX obj/base/base/shared_memory_tracker.o
  In file included from ../../base/memory/shared_memory_tracker.cc:12:
  In file included from ../../base/trace_event/memory_dump_manager.h:23:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1332/4772] CXX obj/base/base/memory_consumer.o
  [1333/4772] CXX obj/base/base/async_memory_consumer_registration.o
  [1334/4772] CXX obj/base/base/memory_consumer_registry.o
  [1335/4772] CXX obj/base/base/writable_shared_memory_region.o
  [1336/4772] CXX obj/base/base/work_id_provider.o
  [1337/4772] CXX obj/base/base/io_watcher.o
  [1338/4772] CXX obj/base/base/message_pump.o
  [1339/4772] CXX obj/base/base/message_pump_default.o
  In file included from ../../base/message_loop/message_pump_default.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1340/4772] CXX obj/base/base/crc32.o
  [1341/4772] CXX obj/base/base/dummy_histogram.o
  [1342/4772] CXX obj/base/base/bucket_ranges.o
  [1343/4772] CXX obj/base/base/field_trial_entry.o
  [1344/4772] CXX obj/base/base/field_trial_param_associator.o
  [1345/4772] CXX obj/base/base/field_trial_params.o
  [1346/4772] CXX obj/base/base/field_trial_list_including_low_anonymity.o
  [1347/4772] CXX obj/base/base/field_trial.o
  [1348/4772] CXX obj/base/base/histogram_functions.o
  [1349/4772] CXX obj/base/base/histogram.o
  [1350/4772] CXX obj/base/base/histogram_base.o
  [1351/4772] CXX obj/base/base/histogram_delta_serialization.o
  [1352/4772] CXX obj/base/base/metrics_hashes.o
  [1353/4772] CXX obj/base/base/histogram_snapshot_manager.o
  [1354/4772] CXX obj/base/base/histogram_samples.o
  [1355/4772] CXX obj/base/base/persistent_sample_map.o
  [1356/4772] CXX obj/base/base/ranges_manager.o
  [1357/4772] CXX obj/base/base/persistent_memory_allocator.o
  [1358/4772] CXX obj/base/base/sample_map.o
  [1359/4772] CXX obj/base/base/single_sample_metrics.o
  [1360/4772] CXX obj/base/base/observer_list_internal.o
  [1361/4772] CXX obj/base/base/persistent_histogram_allocator.o
  [1362/4772] CXX obj/base/base/user_metrics.o
  [1363/4772] CXX obj/base/base/observer_list_types.o
  [1364/4772] CXX obj/base/base/observer_list_threadsafe.o
  [1365/4772] CXX obj/base/base/sample_vector.o
  [1366/4772] CXX obj/base/base/one_shot_event.o
  [1367/4772] CXX obj/base/base/sparse_histogram.o
  [1368/4772] CXX obj/base/base/battery_level_provider.o
  [1369/4772] CXX obj/base/base/pending_task.o
  [1370/4772] CXX obj/base/base/power_monitor_device_source.o
  [1371/4772] CXX obj/base/base/battery_state_sampler.o
  [1372/4772] CXX obj/base/base/pickle.o
  [1373/4772] CXX obj/base/base/power_monitor_features.o
  [1374/4772] CXX obj/base/base/statistics_recorder.o
  [1375/4772] CXX obj/base/base/power_monitor.o
  FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:22:
  ../../third_party/perfetto/include/perfetto/base/thread_utils.h:22:10: fatal error:
  'perfetto/base/build_config.h' file not found
  22 | #include "perfetto/base/build_config.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1376/4772] CXX obj/base/base/sampling_event_source.o
  [1377/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1378/4772] CXX obj/base/base/current_process.o
  FAILED: obj/base/base/current_process.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/current_process.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/
  In file included from ../../base/process/current_process.cc:5:
  ../../base/process/current_process.h:42:60: error: no member named 'pbzero' in namespace
  'perfetto::protos::chrome_enums'
  42 | using CurrentProcessType = perfetto::protos::chrome_enums::pbzero::ProcessType;
  |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
  ../../base/process/current_process.h:99:3: error: unknown type name 'CurrentProcessType'; did you mean
  'CurrentProcess'?
  99 |   CurrentProcessType GetType(TypeKey key) {
  |   ^~~~~~~~~~~~~~~~~~
  |   CurrentProcess
  ../../base/process/current_process.h:70:19: note: 'CurrentProcess' declared here
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  ../../base/process/current_process.h:125:39: error: unknown type name 'CurrentProcessType'; did you mean
  'CurrentProcess'?
  125 |                                       CurrentProcessType process_type) = 0;
  |                                       ^~~~~~~~~~~~~~~~~~
  |                                       CurrentProcess
  ../../base/process/current_process.h:70:19: note: 'CurrentProcess' declared here
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  ../../base/process/current_process.h:136:23: error: unknown type name 'CurrentProcessType'; did you mean
  'CurrentProcess'?
  136 |   void SetProcessType(CurrentProcessType process_type);
  |                       ^~~~~~~~~~~~~~~~~~
  |                       CurrentProcess
  ../../base/process/current_process.h:70:19: note: 'CurrentProcess' declared here
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  ../../base/process/current_process.h:153:30: error: unknown type name 'CurrentProcessType'; did you mean
  'CurrentProcess'?
  153 |                              CurrentProcessType process_type);
  |                              ^~~~~~~~~~~~~~~~~~
  |                              CurrentProcess
  ../../base/process/current_process.h:70:19: note: 'CurrentProcess' declared here
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  ../../base/process/current_process.h:163:15: error: unknown type name 'CurrentProcessType'; did you mean
  'CurrentProcess'?
  163 |   std::atomic<CurrentProcessType> process_type_;
  |               ^~~~~~~~~~~~~~~~~~
  |               CurrentProcess
  ../../base/process/current_process.h:70:19: note: 'CurrentProcess' declared here
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  In module 'std_core':
  gen/third_party/libc++/src/include/__type_traits/is_trivially_copyable.h:23:83: error: incomplete type
  'base::CurrentProcess' used in type trait expression
  23 | struct _LIBCPP_NO_SPECIALIZATIONS is_trivially_copyable : integral_constant<bool,
  __is_trivially_copyable(_Tp)> {};
  |                                                                                   ^
  gen/third_party/libc++/src/include/__atomic/atomic.h:232:17: note: in instantiation of template class
  'std::is_trivially_copyable<base::CurrentProcess>' requested here
  232 |   static_assert(is_trivially_copyable<_Tp>::value, "std::atomic<T> requires that 'T' be a trivially
  copyable type");
  |                 ^
  gen/third_party/libc++/src/include/__atomic/atomic.h:236:47: note: in instantiation of template class
  'std::__check_atomic_mandates<base::CurrentProcess>' requested here
  236 | struct atomic : public __atomic_base<typename __check_atomic_mandates<_Tp>::type> {
  |                                               ^
  ../../base/process/current_process.h:163:35: note: in instantiation of template class
  'std::atomic<base::CurrentProcess>' requested here
  163 |   std::atomic<CurrentProcessType> process_type_;
  |                                   ^
  ../../base/process/current_process.h:70:19: note: definition of 'base::CurrentProcess' is not complete until the
  closing '}'
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  In module 'std':
  gen/third_party/libc++/src/include/__atomic/support/c11.h:38:3: error: _Atomic cannot be applied to incomplete
  type 'base::CurrentProcess'
  38 |   _Atomic(_Tp) __a_value;
  |   ^
  gen/third_party/libc++/src/include/__atomic/support.h:114:35: note: in instantiation of template class
  'std::__cxx_atomic_base_impl<base::CurrentProcess>' requested here
  114 | struct __cxx_atomic_impl : public _Base {
  |                                   ^
  gen/third_party/libc++/src/include/__atomic/atomic.h:43:34: note: in instantiation of template class
  'std::__cxx_atomic_impl<base::CurrentProcess>' requested here
  43 |   mutable __cxx_atomic_impl<_Tp> __a_;
  |                                  ^
  gen/third_party/libc++/src/include/__atomic/atomic.h:236:24: note: in instantiation of template class
  'std::__atomic_base<base::CurrentProcess>' requested here
  236 | struct atomic : public __atomic_base<typename __check_atomic_mandates<_Tp>::type> {
  |                        ^
  ../../base/process/current_process.h:163:35: note: in instantiation of template class
  'std::atomic<base::CurrentProcess>' requested here
  163 |   std::atomic<CurrentProcessType> process_type_;
  |                                   ^
  ../../base/process/current_process.h:70:19: note: definition of 'base::CurrentProcess' is not complete until the
  closing '}'
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  ../../base/process/current_process.cc:11:35: error: unknown type name 'CurrentProcessType'; did you mean
  'ShortProcessType'?
  11 | const char* GetNameForProcessType(CurrentProcessType process_type) {
  |                                   ^~~~~~~~~~~~~~~~~~
  |                                   ShortProcessType
  ../../base/process/current_process.h:47:12: note: 'ShortProcessType' declared here
  47 | enum class ShortProcessType {
  |            ^
  ../../base/process/current_process.cc:13:10: error: use of undeclared identifier 'CurrentProcessType'; did you
  mean 'CurrentProcess'?
  13 |     case CurrentProcessType::PROCESS_UNSPECIFIED:
  |          ^~~~~~~~~~~~~~~~~~
  |          CurrentProcess
  ../../base/process/current_process.h:70:19: note: 'CurrentProcess' declared here
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  ../../base/process/current_process.cc:13:10: error: no member named 'PROCESS_UNSPECIFIED' in
  'base::CurrentProcess'; did you mean 'perfetto::protos::chrome_enums::PROCESS_UNSPECIFIED'?
  13 |     case CurrentProcessType::PROCESS_UNSPECIFIED:
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |          perfetto::protos::chrome_enums::PROCESS_UNSPECIFIED
  ../../base/tracing/protos/chrome_enums.pbzero.h:15:3: note: 'perfetto::protos::chrome_enums::PROCESS_UNSPECIFIED'
  declared here
  15 |   PROCESS_UNSPECIFIED = 0,
  |   ^
  ../../base/process/current_process.cc:13:10: error: value of type 'perfetto::protos::chrome_enums::ProcessType'
  is not implicitly convertible to 'ShortProcessType'
  13 |     case CurrentProcessType::PROCESS_UNSPECIFIED:
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ../../base/process/current_process.cc:15:10: error: use of undeclared identifier 'CurrentProcessType'; did you
  mean 'CurrentProcess'?
  15 |     case CurrentProcessType::PROCESS_BROWSER:
  |          ^~~~~~~~~~~~~~~~~~
  |          CurrentProcess
  ../../base/process/current_process.h:70:19: note: 'CurrentProcess' declared here
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  ../../base/process/current_process.cc:15:10: error: no member named 'PROCESS_BROWSER' in 'base::CurrentProcess';
  did you mean 'perfetto::protos::chrome_enums::PROCESS_BROWSER'?
  15 |     case CurrentProcessType::PROCESS_BROWSER:
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |          perfetto::protos::chrome_enums::PROCESS_BROWSER
  ../../base/tracing/protos/chrome_enums.pbzero.h:16:3: note: 'perfetto::protos::chrome_enums::PROCESS_BROWSER'
  declared here
  16 |   PROCESS_BROWSER = 1,
  |   ^
  ../../base/process/current_process.cc:15:10: error: value of type 'perfetto::protos::chrome_enums::ProcessType'
  is not implicitly convertible to 'ShortProcessType'
  15 |     case CurrentProcessType::PROCESS_BROWSER:
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ../../base/process/current_process.cc:17:10: error: use of undeclared identifier 'CurrentProcessType'; did you
  mean 'CurrentProcess'?
  17 |     case CurrentProcessType::PROCESS_RENDERER:
  |          ^~~~~~~~~~~~~~~~~~
  |          CurrentProcess
  ../../base/process/current_process.h:70:19: note: 'CurrentProcess' declared here
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  ../../base/process/current_process.cc:17:10: error: no member named 'PROCESS_RENDERER' in 'base::CurrentProcess';
  did you mean 'perfetto::protos::chrome_enums::PROCESS_RENDERER'?
  17 |     case CurrentProcessType::PROCESS_RENDERER:
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |          perfetto::protos::chrome_enums::PROCESS_RENDERER
  ../../base/tracing/protos/chrome_enums.pbzero.h:17:3: note: 'perfetto::protos::chrome_enums::PROCESS_RENDERER'
  declared here
  17 |   PROCESS_RENDERER = 2,
  |   ^
  ../../base/process/current_process.cc:17:10: error: value of type 'perfetto::protos::chrome_enums::ProcessType'
  is not implicitly convertible to 'ShortProcessType'
  17 |     case CurrentProcessType::PROCESS_RENDERER:
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ../../base/process/current_process.cc:19:10: error: use of undeclared identifier 'CurrentProcessType'; did you
  mean 'CurrentProcess'?
  19 |     case CurrentProcessType::PROCESS_UTILITY:
  |          ^~~~~~~~~~~~~~~~~~
  |          CurrentProcess
  ../../base/process/current_process.h:70:19: note: 'CurrentProcess' declared here
  70 | class BASE_EXPORT CurrentProcess {
  |                   ^
  fatal error: too many errors emitted, stopping now [-ferror-limit=]
  20 errors generated.
  [1379/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1380/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:22:
  ../../third_party/perfetto/include/perfetto/base/thread_utils.h:22:10: fatal error:
  'perfetto/base/build_config.h' file not found
  22 | #include "perfetto/base/build_config.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— æˆ‘çœ‹åˆ°äº†ä¸¤ä¸ªæ–°é—®é¢˜: 1. thread_utils.h åŒ…å«è·¯å¾„é—®é¢˜ 2. chrome_enums.pbzero.h çš„å‘½åç©ºé—´é—®é¢˜ - ç¼ºå°‘ pbzero å­å‘½åç©ºé—´ è®©æˆ‘å…ˆä¿®å¤ thread_utils.h:

â— Read(src\third_party\perfetto\include\perfetto\base\thread_utils.h)
  â¿ Â Read 30 lines

â— Update(src\third_party\perfetto\include\perfetto\base\thread_utils.h)
  â¿ Â Added 2 lines, removed 2 lines
      19
      20   #include <stdint.h>
      21
      22 -#include "perfetto/base/build_config.h"
      23 -#include "perfetto/base/export.h"
      22 +#include "third_party/perfetto/include/perfetto/base/build_config.h"
      23 +#include "third_party/perfetto/include/perfetto/base/export.h"
      24
      25   #if PERFETTO_BUILDFLAG(PERFETTO_OS_WIN)
      26   extern "C" {

â— ç°åœ¨è®©æˆ‘ä¿®å¤ chrome_enums.pbzero.h çš„å‘½åç©ºé—´é—®é¢˜ã€‚é—®é¢˜æ˜¯ä»£ç æœŸæœ› perfetto::protos::chrome_enums::pbzero::ProcessType,ä½†æˆ‘ä»¬å®šä¹‰çš„æ˜¯ perfetto::protos::chrome_enums::ProcessType:

â— Update(src\base\tracing\protos\chrome_enums.pbzero.h)
  â¿ Â Added 1 line
       9   namespace perfetto {
      10   namespace protos {
      11   namespace chrome_enums {
      12 + namespace pbzero {
      13
      14   // Stub enum definitions matching chrome_enums.proto
      15   enum ProcessType {

â— Update(src\base\tracing\protos\chrome_enums.pbzero.h)
  â¿ Â Added 1 line
      105     THREAD_COMPOSITOR_GPU = 52,
      106   };
      107
      108 + }  // namespace pbzero
      109   }  // namespace chrome_enums
      110   }  // namespace protos
      111   }  // namespace perfetto

â— ç°åœ¨è®©æˆ‘æäº¤è¿™äº›ä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ thread_utils.h åŒ…å«è·¯å¾„å’Œ chrome_enums.pbzero.h
       å‘½åç©ºé—´")
  â¿ [master 71605b9c] ä¿®å¤ thread_utils.h åŒ…å«è·¯å¾„å’Œ chrome_enums.pbzero.h å‘½åç©ºé—´
     2 files changed, 4 insertions(+), 2 deletions(-)
    warning: in the working copy of 'src/base/tracing/protos/chrome_enums.pbzero.h', CRLF will be replaced by LF th
    e next time Git touches it


â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        c9b94506..71605b9c  master -> master

â— å®Œç¾!è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤:

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ä»ç¼–è¯‘é”™è¯¯ä¸­,æˆ‘å‘ç°äº†ä¸¤ä¸ªé—®é¢˜:

  1. thread_utils.h åŒ…å«è·¯å¾„é—®é¢˜
    - ä½¿ç”¨ç›¸å¯¹è·¯å¾„ perfetto/base/build_config.h å’Œ perfetto/base/export.h
    - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™äº›æ–‡ä»¶
    - é”™è¯¯: fatal error: 'perfetto/base/build_config.h' file not found
  2. chrome_enums.pbzero.h å‘½åç©ºé—´é—®é¢˜
    - ä»£ç æœŸæœ› perfetto::protos::chrome_enums::pbzero::ProcessType
    - ä½†æˆ‘ä»¬å®šä¹‰çš„æ˜¯ perfetto::protos::chrome_enums::ProcessType
    - ç¼ºå°‘ pbzero å­å‘½åç©ºé—´
    - é”™è¯¯: no member named 'pbzero' in namespace 'perfetto::protos::chrome_enums'

  è§£å†³æ–¹æ¡ˆ

  1. ä¿®å¤ thread_utils.h åŒ…å«è·¯å¾„
  // ä¿®æ”¹å‰
  #include "perfetto/base/build_config.h"
  #include "perfetto/base/export.h"

  // ä¿®æ”¹å
  #include "third_party/perfetto/include/perfetto/base/build_config.h"
  #include "third_party/perfetto/include/perfetto/base/export.h"
    - ä½¿ç”¨ä» src/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
    - ä¸å…¶ä»– Perfetto å¤´æ–‡ä»¶ä¿æŒä¸€è‡´
  2. ä¿®å¤ chrome_enums.pbzero.h å‘½åç©ºé—´
  // ä¿®æ”¹å‰
  namespace perfetto {
  namespace protos {
  namespace chrome_enums {

  // ä¿®æ”¹å
  namespace perfetto {
  namespace protos {
  namespace chrome_enums {
  namespace pbzero {
    - æ·»åŠ  pbzero å­å‘½åç©ºé—´
    - åŒ¹é… protobuf ç”Ÿæˆçš„ä»£ç ç»“æ„
    - æ»¡è¶³ current_process.h çš„æœŸæœ›

  ä¸ºä»€ä¹ˆè¿™æ ·æœ‰æ•ˆ?

  1. ç»Ÿä¸€åŒ…å«è·¯å¾„ç­–ç•¥
    - æ‰€æœ‰ Perfetto å¤´æ–‡ä»¶éƒ½ä½¿ç”¨å®Œæ•´è·¯å¾„
    - ä» src/ ç›®å½•å¼€å§‹çš„ç»å¯¹è·¯å¾„
    - é¿å…äº†ç›¸å¯¹è·¯å¾„çš„æ­§ä¹‰
  2. åŒ¹é… protobuf å‘½åç©ºé—´ç»“æ„
    - Protobuf ç”Ÿæˆçš„ .pbzero.h æ–‡ä»¶ä½¿ç”¨ pbzero å­å‘½åç©ºé—´
    - è¿™æ˜¯ Perfetto çš„çº¦å®š,ç”¨äºåŒºåˆ†ä¸åŒçš„ protobuf åç«¯
    - æˆ‘ä»¬çš„ stub éœ€è¦éµå¾ªç›¸åŒçš„ç»“æ„
  3. ä¿æŒ API å…¼å®¹æ€§
    - current_process.h ä½¿ç”¨ perfetto::protos::chrome_enums::pbzero::ProcessType
    - é€šè¿‡æ·»åŠ  pbzero å‘½åç©ºé—´,ä»£ç å¯ä»¥æ­£å¸¸ç¼–è¯‘
    - ç±»å‹åˆ«å CurrentProcessType å¯ä»¥æ­£ç¡®è§£æ

  ä¿®æ”¹çš„æ–‡ä»¶

  1. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/base/thread_utils.h
    - ä¿®å¤ä¸¤ä¸ªåŒ…å«è·¯å¾„
  2. ä¿®æ”¹: src/base/tracing/protos/chrome_enums.pbzero.h
    - æ·»åŠ  pbzero å­å‘½åç©ºé—´
    - æ›´æ–°å‘½åç©ºé—´æ³¨é‡Š

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 28% (1375/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚è¿™äº›ä¿®å¤åº”è¯¥èƒ½è§£å†³ thread_utils.h å’Œ chrome_enums.pbzero.h ç›¸å…³çš„é—®é¢˜ã€‚

  è§‚å¯Ÿåˆ°çš„æ¨¡å¼

  æˆ‘ä»¬ç»§ç»­åœ¨ä¿®å¤ Perfetto ç›¸å…³çš„é—®é¢˜:
  1. åŒ…å«è·¯å¾„é—®é¢˜ - éœ€è¦ä½¿ç”¨å®Œæ•´è·¯å¾„
  2. å‘½åç©ºé—´ç»“æ„ - éœ€è¦åŒ¹é… protobuf ç”Ÿæˆçš„ä»£ç 
  3. Stub å®ç° - éœ€è¦ä¿æŒ API å…¼å®¹æ€§

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Brewed for 1m 11s

â¯ åˆæœ‰é”™è¯¯äº†ï¼š[1442/4772] CXX obj/base/base/battery_state_sampler.o
  [1443/4772] CXX obj/base/base/sampling_event_source.o
  [1444/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1445/4772] CXX obj/base/base/power_monitor.o
  FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:22:10: fatal error:
  'perfetto/base/export.h' file not found
  22 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1446/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1447/4772] CXX obj/base/base/process_handle.o
  [1448/4772] CXX obj/base/base/current_process.o
  [1449/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:22:10: fatal error:
  'perfetto/base/export.h' file not found
  22 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1450/4772] CXX obj/base/base/environment_internal.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.ï¼Œå‰é¢è¿˜æœ‰å¥½äº›warningsï¼Œæˆ‘å°±ä¸å‘å‡ºæ¥äº†ã€‚

â— å¥½çš„,ç°åœ¨æ˜¯ message_handle.h çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚è®©æˆ‘ä¿®å¤å®ƒ:

â— Read(src\third_party\perfetto\include\perfetto\protozero\message_handle.h)
  â¿ Â Read 30 lines

â— æˆ‘çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶æœ‰å¤šä¸ªåŒ…å«è·¯å¾„éœ€è¦ä¿®å¤ã€‚è®©æˆ‘ä¸€æ¬¡æ€§ä¿®å¤æ‰€æœ‰çš„:

â— Update(src\third_party\perfetto\include\perfetto\protozero\message_handle.h)
  â¿ Â Added 3 lines, removed 3 lines
      19
      20   #include <functional>
      21
      22 -#include "perfetto/base/export.h"
      23 -#include "perfetto/protozero/message.h"
      24 -#include "perfetto/protozero/scattered_stream_writer.h"
      22 +#include "third_party/perfetto/include/perfetto/base/export.h"
      23 +#include "third_party/perfetto/include/perfetto/protozero/message.h"
      24 +#include "third_party/perfetto/include/perfetto/protozero/scattered_stream_writer.h"
      25
      26   namespace protozero {
      27

â— ç°åœ¨è®©æˆ‘æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ message_handle.h åŒ…å«è·¯å¾„")
  â¿ Â [master b9373cc3] ä¿®å¤ message_handle.h åŒ…å«è·¯å¾„
      1 file changed, 3 insertions(+), 3 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        71605b9c..b9373cc3  master -> master

â— å®Œç¾!è®©æˆ‘æ€»ç»“ä¸€ä¸‹:

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  åˆé‡åˆ°äº†ä¸€ä¸ª Perfetto åŒ…å«è·¯å¾„é—®é¢˜:

  message_handle.h åŒ…å«è·¯å¾„é—®é¢˜
  - ä½¿ç”¨ç›¸å¯¹è·¯å¾„:
    - perfetto/base/export.h
    - perfetto/protozero/message.h
    - perfetto/protozero/scattered_stream_writer.h
  - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™äº›æ–‡ä»¶
  - é”™è¯¯: fatal error: 'perfetto/base/export.h' file not found

  è§£å†³æ–¹æ¡ˆ

  ä¿®å¤ message_handle.h åŒ…å«è·¯å¾„
  // ä¿®æ”¹å‰
  #include "perfetto/base/export.h"
  #include "perfetto/protozero/message.h"
  #include "perfetto/protozero/scattered_stream_writer.h"

  // ä¿®æ”¹å
  #include "third_party/perfetto/include/perfetto/base/export.h"
  #include "third_party/perfetto/include/perfetto/protozero/message.h"
  #include "third_party/perfetto/include/perfetto/protozero/scattered_stream_writer.h"
  - ä¿®å¤äº† 3 ä¸ªåŒ…å«è·¯å¾„
  - ä½¿ç”¨ä» src/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
  - ä¸å…¶ä»– Perfetto å¤´æ–‡ä»¶ä¿æŒä¸€è‡´

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 30% (1445/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  è§‚å¯Ÿåˆ°çš„æ¨¡å¼

  æˆ‘ä»¬ä¸€ç›´åœ¨ä¿®å¤ Perfetto å¤´æ–‡ä»¶çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§çš„é—®é¢˜:
  - Perfetto å¤´æ–‡ä»¶ä½¿ç”¨ç›¸å¯¹è·¯å¾„ perfetto/...
  - åœ¨ Chromium æ„å»ºç¯å¢ƒä¸­éœ€è¦å®Œæ•´è·¯å¾„ third_party/perfetto/include/perfetto/...
  - éœ€è¦é€ä¸ªæ–‡ä»¶ä¿®å¤

  ç­–ç•¥

  æˆ‘ä»¬çš„ä¿®å¤ç­–ç•¥æ˜¯æ­£ç¡®çš„:
  1. é‡åˆ°åŒ…å«è·¯å¾„é”™è¯¯æ—¶,ç«‹å³ä¿®å¤
  2. ä½¿ç”¨ç»Ÿä¸€çš„å®Œæ•´è·¯å¾„æ ¼å¼
  3. å¿«é€Ÿæäº¤å’Œæ¨é€,è®© CI ç»§ç»­ç¼–è¯‘

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ,çœ‹çœ‹æ˜¯å¦è¿˜æœ‰å…¶ä»– Perfetto å¤´æ–‡ä»¶éœ€è¦ä¿®å¤!ğŸš€

âœ» Cogitated for 49s

â¯ [1444/4772] CXX obj/base/base/pickle.o
  [1445/4772] CXX obj/base/base/statistics_recorder.o
  [1446/4772] CXX obj/base/base/battery_state_sampler.o
  [1447/4772] CXX obj/base/base/power_monitor_features.o
  [1448/4772] CXX obj/base/base/sampling_event_source.o
  [1449/4772] CXX obj/base/base/power_monitor.o
  FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  ../../third_party/perfetto/include/perfetto/protozero/message.h:27:10: fatal error: 'perfetto/base/export.h' file
  not found
  27 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1450/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1451/4772] CXX obj/base/base/current_process.o
  [1452/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1453/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  ../../third_party/perfetto/include/perfetto/protozero/message.h:27:10: fatal error: 'perfetto/base/export.h' file
  not found
  27 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1454/4772] CXX obj/base/base/environment_internal.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç»§ç»­ä¿®å¤,ç°åœ¨æ˜¯ message.h çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚è®©æˆ‘çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶éœ€è¦ä¿®å¤å¤šå°‘ä¸ªåŒ…å«è·¯å¾„:

â— Bash(grep -n '#include "perfetto/'
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protozero/message.h" | head -20)
  â¿ Â 27:#include "perfetto/base/export.h"
     28:#include "perfetto/base/logging.h"
     29:#include "perfetto/protozero/contiguous_memory_range.h"
     â€¦ +2 lines (ctrl+o to expand)

â— å¥½çš„,æœ‰ 5 ä¸ªåŒ…å«è·¯å¾„éœ€è¦ä¿®å¤ã€‚è®©æˆ‘ä¸€æ¬¡æ€§ä¿®å¤:

â— Read(src\third_party\perfetto\include\perfetto\protozero\message.h)
  â¿ Â Read 35 lines

â— Update(src\third_party\perfetto\include\perfetto\protozero\message.h)
  â¿ Â Added 5 lines, removed 5 lines
      24   #include <string>
      25   #include <type_traits>
      26
      27 -#include "perfetto/base/export.h"
      28 -#include "perfetto/base/logging.h"
      29 -#include "perfetto/protozero/contiguous_memory_range.h"
      30 -#include "perfetto/protozero/proto_utils.h"
      31 -#include "perfetto/protozero/scattered_stream_writer.h"
      27 +#include "third_party/perfetto/include/perfetto/base/export.h"
      28 +#include "third_party/perfetto/include/perfetto/base/logging.h"
      29 +#include "third_party/perfetto/include/perfetto/protozero/contiguous_memory_range.h"
      30 +#include "third_party/perfetto/include/perfetto/protozero/proto_utils.h"
      31 +#include "third_party/perfetto/include/perfetto/protozero/scattered_stream_writer.h"
      32
      33   namespace perfetto {
      34   namespace shm_fuzz {

â— ç°åœ¨è®©æˆ‘æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ message.h åŒ…å«è·¯å¾„")
  â¿ Â [master a6c605b3] ä¿®å¤ message.h åŒ…å«è·¯å¾„
      1 file changed, 5 insertions(+), 5 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        b9373cc3..a6c605b3  master -> master

â— å®Œç¾!æˆ‘å·²ç»ä¿®å¤äº† message.h çš„ 5 ä¸ªåŒ…å«è·¯å¾„ã€‚

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  message.h åŒ…å«è·¯å¾„é—®é¢˜
  - ä½¿ç”¨ç›¸å¯¹è·¯å¾„:
    - perfetto/base/export.h
    - perfetto/base/logging.h
    - perfetto/protozero/contiguous_memory_range.h
    - perfetto/protozero/proto_utils.h
    - perfetto/protozero/scattered_stream_writer.h
  - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™äº›æ–‡ä»¶
  - é”™è¯¯: fatal error: 'perfetto/base/export.h' file not found

  è§£å†³æ–¹æ¡ˆ

  ä¿®å¤ message.h åŒ…å«è·¯å¾„
  - ä¿®å¤äº† 5 ä¸ªåŒ…å«è·¯å¾„
  - å…¨éƒ¨æ”¹ä¸ºä» third_party/perfetto/include/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
  - ä¸å…¶ä»– Perfetto å¤´æ–‡ä»¶ä¿æŒä¸€è‡´

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 30% (1449/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  è§‚å¯Ÿ

  æˆ‘ä»¬æ­£åœ¨ç³»ç»Ÿæ€§åœ°ä¿®å¤ Perfetto å¤´æ–‡ä»¶çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚è¿™äº›æ–‡ä»¶å½¢æˆäº†ä¸€ä¸ªä¾èµ–é“¾:
  - track.h â†’ message_handle.h â†’ message.h â†’ ...

  æ¯ä¿®å¤ä¸€ä¸ªæ–‡ä»¶,å°±ä¼šæš´éœ²å‡ºä¸‹ä¸€ä¸ªæ–‡ä»¶çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚è¿™æ˜¯æ­£å¸¸çš„,æˆ‘ä»¬æ­£åœ¨é€æ­¥è§£å†³ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ,çœ‹çœ‹æ˜¯å¦è¿˜æœ‰å…¶ä»–æ–‡ä»¶éœ€è¦ä¿®å¤!ğŸš€

âœ» Churned for 58s

â¯ [1448/4772] CXX obj/base/base/power_monitor.o
  FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message.h:29:
  ../../third_party/perfetto/include/perfetto/protozero/contiguous_memory_range.h:24:11: error: redefinition of
  'protozero' as different kind of symbol
  24 | namespace protozero {
  |           ^
  ../../third_party/perfetto/include/perfetto/protozero/scattered_heap_buffer.h:30:11: note: previous definition is
  here
  30 | namespace protozero = perfetto::protozero;
  |           ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message.h:30:
  ../../third_party/perfetto/include/perfetto/protozero/proto_utils.h:25:10: fatal error: 'perfetto/base/logging.h'
  file not found
  25 | #include "perfetto/base/logging.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 2 errors generated.
  [1449/4772] CXX obj/base/base/process_handle.o
  [1450/4772] CXX obj/base/base/current_process.o
  [1451/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1452/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message.h:29:
  ../../third_party/perfetto/include/perfetto/protozero/contiguous_memory_range.h:24:11: error: redefinition of
  'protozero' as different kind of symbol
  24 | namespace protozero {
  |           ^
  ../../third_party/perfetto/include/perfetto/protozero/scattered_heap_buffer.h:30:11: note: previous definition is
  here
  30 | namespace protozero = perfetto::protozero;
  |           ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message.h:30:
  ../../third_party/perfetto/include/perfetto/protozero/proto_utils.h:25:10: fatal error: 'perfetto/base/logging.h'
  file not found
  25 | #include "perfetto/base/logging.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 2 errors generated.
  [1453/4772] CXX obj/base/base/environment_internal.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— æˆ‘çœ‹åˆ°ä¸¤ä¸ªé—®é¢˜: 1. proto_utils.h åŒ…å«è·¯å¾„é—®é¢˜ 2. protozero å‘½åç©ºé—´é‡å®šä¹‰é—®é¢˜ - scattered_heap_buffer.h ä¸­æœ‰ä¸€ä¸ªå‘½åç©ºé—´åˆ«å è®©æˆ‘å…ˆä¿®å¤ proto_utils.h:

â— Bash(grep -n '#include "perfetto/'
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protozero/proto_utils.h" | head -10)
  â¿ Â 25:#include "perfetto/base/logging.h"
     26:#include "perfetto/public/pb_utils.h"

â— Read(src\third_party\perfetto\include\perfetto\protozero\proto_utils.h)
  â¿ Â Read 30 lines

â— Update(src\third_party\perfetto\include\perfetto\protozero\proto_utils.h)
  â¿ Â Added 2 lines, removed 2 lines
      22   #include <cinttypes>
      23   #include <type_traits>
      24
      25 -#include "perfetto/base/logging.h"
      26 -#include "perfetto/public/pb_utils.h"
      25 +#include "third_party/perfetto/include/perfetto/base/logging.h"
      26 +#include "third_party/perfetto/include/perfetto/public/pb_utils.h"
      27
      28   // Helper macro for the constexpr functions containing
      29   // the switch statement: if C++14 is supported, this macro

â— ç°åœ¨è®©æˆ‘æ£€æŸ¥ scattered_heap_buffer.h ä¸­çš„å‘½åç©ºé—´åˆ«åé—®é¢˜:

â— Bash(grep -n "namespace protozero"
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protozero/scattered_heap_buffer.h")
  â¿ Â 8:namespace protozero {
     26:}  // namespace protozero
     30:namespace protozero = perfetto::protozero;

â— æˆ‘çœ‹åˆ°é—®é¢˜äº†ã€‚scattered_heap_buffer.h åœ¨ç¬¬ 30 è¡Œæœ‰ä¸€ä¸ªå‘½åç©ºé—´åˆ«å namespace protozero = perfetto::protozero;,è¿™ä¸å…¶ä»–æ–‡ä»¶ä¸­çš„ namespace protozero { å†²çªã€‚è®©æˆ‘æ£€æŸ¥è¿™ä¸ªæ–‡ä»¶:

â— Read(src\third_party\perfetto\include\perfetto\protozero\scattered_heap_buffer.h)
  â¿ Â Read 33 lines

â— é—®é¢˜æ˜¯ç¬¬ 30 è¡Œçš„å‘½åç©ºé—´åˆ«åä¸å…¶ä»–æ–‡ä»¶ä¸­çš„ namespace protozero { å£°æ˜å†²çªã€‚æˆ‘éœ€è¦ç§»é™¤è¿™ä¸ªåˆ«å,å› ä¸ºå®ƒä¼šå¯¼è‡´å†²çª:

â— Update(src\third_party\perfetto\include\perfetto\protozero\scattered_heap_buffer.h)
  â¿ Â Removed 3 lines
      26   }  // namespace protozero
      27   }  // namespace perfetto
      28
      29 - // Export protozero to global namespace for compatibility
      30 - namespace protozero = perfetto::protozero;
      31 -
      29   #endif  // THIRD_PARTY_PERFETTO_INCLUDE_PERFETTO_PROTOZERO_SCATTERED_HEAP_BUFFER_H_

â— ç°åœ¨è®©æˆ‘æäº¤è¿™äº›ä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ proto_utils.h åŒ…å«è·¯å¾„å’Œç§»é™¤ protozero
      å‘½åç©ºé—´åˆ«åå†²çª")
  â¿ Â [master 00ae6b63] ä¿®å¤ proto_utils.h åŒ…å«è·¯å¾„å’Œç§»é™¤ protozero å‘½åç©ºé—´åˆ«åå†²çª
      2 files changed, 2 insertions(+), 5 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        a6c605b3..00ae6b63  master -> master

â— å®Œç¾!è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤:

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ä»ç¼–è¯‘é”™è¯¯ä¸­,æˆ‘å‘ç°äº†ä¸¤ä¸ªé—®é¢˜:

  1. proto_utils.h åŒ…å«è·¯å¾„é—®é¢˜
    - ä½¿ç”¨ç›¸å¯¹è·¯å¾„:
        - perfetto/base/logging.h
      - perfetto/public/pb_utils.h
    - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™äº›æ–‡ä»¶
    - é”™è¯¯: fatal error: 'perfetto/base/logging.h' file not found
  2. protozero å‘½åç©ºé—´é‡å®šä¹‰é—®é¢˜
    - scattered_heap_buffer.h ä¸­æœ‰å‘½åç©ºé—´åˆ«å: namespace protozero = perfetto::protozero;
    - å…¶ä»–æ–‡ä»¶ä¸­æœ‰å‘½åç©ºé—´å£°æ˜: namespace protozero {
    - è¿™ä¸¤è€…å†²çª,å¯¼è‡´ç¼–è¯‘é”™è¯¯
    - é”™è¯¯: redefinition of 'protozero' as different kind of symbol

  è§£å†³æ–¹æ¡ˆ

  1. ä¿®å¤ proto_utils.h åŒ…å«è·¯å¾„
  // ä¿®æ”¹å‰
  #include "perfetto/base/logging.h"
  #include "perfetto/public/pb_utils.h"

  // ä¿®æ”¹å
  #include "third_party/perfetto/include/perfetto/base/logging.h"
  #include "third_party/perfetto/include/perfetto/public/pb_utils.h"
    - ä¿®å¤äº† 2 ä¸ªåŒ…å«è·¯å¾„
    - ä½¿ç”¨ä» src/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
  2. ç§»é™¤ protozero å‘½åç©ºé—´åˆ«å
  // ä¿®æ”¹å‰
  }  // namespace protozero
  }  // namespace perfetto

  // Export protozero to global namespace for compatibility
  namespace protozero = perfetto::protozero;

  // ä¿®æ”¹å
  }  // namespace protozero
  }  // namespace perfetto
    - ç§»é™¤äº†å‘½åç©ºé—´åˆ«å
    - é¿å…ä¸å…¶ä»–æ–‡ä»¶ä¸­çš„å‘½åç©ºé—´å£°æ˜å†²çª
    - æ‰€æœ‰ä»£ç éƒ½åº”è¯¥ä½¿ç”¨ perfetto::protozero:: æˆ–åœ¨å‘½åç©ºé—´å†…éƒ¨ä½¿ç”¨

  ä¸ºä»€ä¹ˆè¿™æ ·æœ‰æ•ˆ?

  1. ç»Ÿä¸€åŒ…å«è·¯å¾„ç­–ç•¥
    - æ‰€æœ‰ Perfetto å¤´æ–‡ä»¶éƒ½ä½¿ç”¨å®Œæ•´è·¯å¾„
    - é¿å…äº†ç›¸å¯¹è·¯å¾„çš„æ­§ä¹‰
  2. é¿å…å‘½åç©ºé—´å†²çª
    - C++ ä¸å…è®¸åŒä¸€ä¸ªåå­—æ—¢æ˜¯å‘½åç©ºé—´åˆæ˜¯å‘½åç©ºé—´åˆ«å
    - ç§»é™¤åˆ«åå,æ‰€æœ‰æ–‡ä»¶éƒ½ä½¿ç”¨æ ‡å‡†çš„å‘½åç©ºé—´å£°æ˜
    - ä»£ç å¯ä»¥æ­£å¸¸ç¼–è¯‘

  ä¿®æ”¹çš„æ–‡ä»¶

  1. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/protozero/proto_utils.h
    - ä¿®å¤ 2 ä¸ªåŒ…å«è·¯å¾„
  2. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/protozero/scattered_heap_buffer.h
    - ç§»é™¤å‘½åç©ºé—´åˆ«å

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 30% (1448/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Cooked for 1m 26s

â¯ [1438/4772] CXX obj/base/base/sample_vector.o
  [1439/4772] CXX obj/base/base/battery_level_provider.o
  [1440/4772] CXX obj/base/base/power_monitor_device_source.o
  [1441/4772] CXX obj/base/base/statistics_recorder.o
  [1442/4772] CXX obj/base/base/power_monitor.o
  FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message.h:30:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/proto_utils.h:26:
  ../../third_party/perfetto/include/perfetto/public/pb_utils.h:24:10: fatal error: 'perfetto/public/compiler.h'
  file not found
  24 | #include "perfetto/public/compiler.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1443/4772] CXX obj/base/base/battery_state_sampler.o
  [1444/4772] CXX obj/base/base/pickle.o
  [1445/4772] CXX obj/base/base/power_monitor_features.o
  [1446/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1447/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message.h:30:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/proto_utils.h:26:
  ../../third_party/perfetto/include/perfetto/public/pb_utils.h:24:10: fatal error: 'perfetto/public/compiler.h'
  file not found
  24 | #include "perfetto/public/compiler.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç»§ç»­ä¿®å¤ pb_utils.h çš„åŒ…å«è·¯å¾„é—®é¢˜:

â— Read(src\third_party\perfetto\include\perfetto\public\pb_utils.h)
  â¿ Â Read 30 lines

â— Update(src\third_party\perfetto\include\perfetto\public\pb_utils.h)
  â¿ Â Added 1 line, removed 1 line
      21   #include <stdint.h>
      22   #include <string.h>
      23
      24 -#include "perfetto/public/compiler.h"
      24 +#include "third_party/perfetto/include/perfetto/public/compiler.h"
      25
      26   // Type of fields that can be found in a protobuf serialized message.
      27   enum PerfettoPbWireType {

â— ç°åœ¨æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ pb_utils.h åŒ…å«è·¯å¾„")
  â¿ Â [master 7c17bd2a] ä¿®å¤ pb_utils.h åŒ…å«è·¯å¾„
      1 file changed, 1 insertion(+), 1 deletion(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        00ae6b63..7c17bd2a  master -> master

â— å®Œç¾!ä¿®å¤å·²æäº¤ã€‚

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  pb_utils.h åŒ…å«è·¯å¾„é—®é¢˜
  - ä½¿ç”¨ç›¸å¯¹è·¯å¾„: perfetto/public/compiler.h
  - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶
  - é”™è¯¯: fatal error: 'perfetto/public/compiler.h' file not found

  è§£å†³æ–¹æ¡ˆ

  ä¿®å¤ pb_utils.h åŒ…å«è·¯å¾„
  // ä¿®æ”¹å‰
  #include "perfetto/public/compiler.h"

  // ä¿®æ”¹å
  #include "third_party/perfetto/include/perfetto/public/compiler.h"
  - ä½¿ç”¨ä» src/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
  - ä¸å…¶ä»– Perfetto å¤´æ–‡ä»¶ä¿æŒä¸€è‡´

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 30% (1442/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  è§‚å¯Ÿ

  æˆ‘ä»¬æ­£åœ¨æ²¿ç€ Perfetto å¤´æ–‡ä»¶çš„ä¾èµ–é“¾é€ä¸ªä¿®å¤åŒ…å«è·¯å¾„é—®é¢˜:
  - track.h â†’ message_handle.h â†’ message.h â†’ proto_utils.h â†’ pb_utils.h â†’ ...

  æ¯ä¿®å¤ä¸€ä¸ªæ–‡ä»¶,å°±ä¼šæš´éœ²å‡ºä¸‹ä¸€ä¸ªæ–‡ä»¶çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§çš„é—®é¢˜,æˆ‘ä»¬æ­£åœ¨æœ‰æ¡ä¸ç´Šåœ°è§£å†³ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Baked for 49s

â¯ FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message.h:31:
  ../../third_party/perfetto/include/perfetto/protozero/scattered_stream_writer.h:27:10: fatal error:
  'perfetto/base/compiler.h' file not found
  27 | #include "perfetto/base/compiler.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1451/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1452/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1453/4772] CXX obj/base/base/current_process.o
  [1454/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message_handle.h:23:
  In file included from ../../third_party/perfetto/include/perfetto/protozero/message.h:31:
  ../../third_party/perfetto/include/perfetto/protozero/scattered_stream_writer.h:27:10: fatal error:
  'perfetto/base/compiler.h' file not found
  27 | #include "perfetto/base/compiler.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1455/4772] CXX obj/base/base/environment_internal.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç»§ç»­ä¿®å¤ scattered_stream_writer.h çš„åŒ…å«è·¯å¾„é—®é¢˜:

â— Bash(grep -n '#include "perfetto/'
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protozero/scattered_stream_writer.h" | head
      -10)
  â¿ Â 27:#include "perfetto/base/compiler.h"
     28:#include "perfetto/base/export.h"
     29:#include "perfetto/base/logging.h"
     30:#include "perfetto/protozero/contiguous_memory_range.h"

â— Read(src\third_party\perfetto\include\perfetto\protozero\scattered_stream_writer.h)
  â¿ Â Read 35 lines

â— Update(src\third_party\perfetto\include\perfetto\protozero\scattered_stream_writer.h)
  â¿ Â Added 4 lines, removed 4 lines
      24
      25   #include <algorithm>
      26
      27 -#include "perfetto/base/compiler.h"
      28 -#include "perfetto/base/export.h"
      29 -#include "perfetto/base/logging.h"
      30 -#include "perfetto/protozero/contiguous_memory_range.h"
      27 +#include "third_party/perfetto/include/perfetto/base/compiler.h"
      28 +#include "third_party/perfetto/include/perfetto/base/export.h"
      29 +#include "third_party/perfetto/include/perfetto/base/logging.h"
      30 +#include "third_party/perfetto/include/perfetto/protozero/contiguous_memory_range.h"
      31
      32   namespace protozero {
      33

â— ç°åœ¨æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ scattered_stream_writer.h åŒ…å«è·¯å¾„")
  â¿ Â [master 2ba74b54] ä¿®å¤ scattered_stream_writer.h åŒ…å«è·¯å¾„
      1 file changed, 4 insertions(+), 4 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        7c17bd2a..2ba74b54  master -> master

â— å®Œç¾!ä¿®å¤å·²æäº¤ã€‚

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  scattered_stream_writer.h åŒ…å«è·¯å¾„é—®é¢˜
  - ä½¿ç”¨ç›¸å¯¹è·¯å¾„:
    - perfetto/base/compiler.h
    - perfetto/base/export.h
    - perfetto/base/logging.h
    - perfetto/protozero/contiguous_memory_range.h
  - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™äº›æ–‡ä»¶
  - é”™è¯¯: fatal error: 'perfetto/base/compiler.h' file not found

  è§£å†³æ–¹æ¡ˆ

  ä¿®å¤ scattered_stream_writer.h åŒ…å«è·¯å¾„
  - ä¿®å¤äº† 4 ä¸ªåŒ…å«è·¯å¾„
  - å…¨éƒ¨æ”¹ä¸ºä» third_party/perfetto/include/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
  - ä¸å…¶ä»– Perfetto å¤´æ–‡ä»¶ä¿æŒä¸€è‡´

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 30% (1450/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  è§‚å¯Ÿ

  æˆ‘ä»¬æ­£åœ¨ç³»ç»Ÿæ€§åœ°ä¿®å¤ Perfetto å¤´æ–‡ä»¶çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚ä¾èµ–é“¾ç»§ç»­å»¶ä¼¸:
  - track.h â†’ message_handle.h â†’ message.h â†’ scattered_stream_writer.h â†’ ...

  æ¯ä¸ªæ–‡ä»¶éƒ½éœ€è¦ä¿®å¤å…¶åŒ…å«è·¯å¾„ã€‚æˆ‘ä»¬æ­£åœ¨å¿«é€Ÿå¤„ç†è¿™äº›é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» SautÃ©ed for 59s

â¯ FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:23:10: fatal error:
  'perfetto/base/export.h' file not found
  23 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1449/4772] CXX obj/base/base/sampling_event_source.o
  [1450/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1451/4772] CXX obj/base/base/current_process.o
  [1452/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1453/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:23:10: fatal error:
  'perfetto/base/export.h' file not found
  23 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç»§ç»­ä¿®å¤ tracing_muxer.h çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚è®©æˆ‘å…ˆæŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶éœ€è¦ä¿®å¤å¤šå°‘ä¸ªåŒ…å«è·¯å¾„:

â— Bash(grep -n '#include "perfetto/'
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h" | head -10)
  â¿ Â 23:#include "perfetto/base/export.h"
     24:#include "perfetto/tracing/buffer_exhausted_policy.h"
     25:#include "perfetto/tracing/core/forward_decls.h"
     â€¦ +4 lines (ctrl+o to expand)

â— æœ‰ 7 ä¸ªåŒ…å«è·¯å¾„éœ€è¦ä¿®å¤ã€‚è®©æˆ‘ä¸€æ¬¡æ€§ä¿®å¤:

â— Read(src\third_party\perfetto\include\perfetto\tracing\internal\tracing_muxer.h)
  â¿ Â Read 35 lines

â— Update(src\third_party\perfetto\include\perfetto\tracing\internal\tracing_muxer.h)
  â¿ Â Added 7 lines, removed 7 lines
      20   #include <atomic>
      21   #include <memory>
      22
      23 -#include "perfetto/base/export.h"
      24 -#include "perfetto/tracing/buffer_exhausted_policy.h"
      25 -#include "perfetto/tracing/core/forward_decls.h"
      26 -#include "perfetto/tracing/interceptor.h"
      27 -#include "perfetto/tracing/internal/basic_types.h"
      28 -#include "perfetto/tracing/internal/tracing_tls.h"
      29 -#include "perfetto/tracing/platform.h"
      23 +#include "third_party/perfetto/include/perfetto/base/export.h"
      24 +#include "third_party/perfetto/include/perfetto/tracing/buffer_exhausted_policy.h"
      25 +#include "third_party/perfetto/include/perfetto/tracing/core/forward_decls.h"
      26 +#include "third_party/perfetto/include/perfetto/tracing/interceptor.h"
      27 +#include "third_party/perfetto/include/perfetto/tracing/internal/basic_types.h"
      28 +#include "third_party/perfetto/include/perfetto/tracing/internal/tracing_tls.h"
      29 +#include "third_party/perfetto/include/perfetto/tracing/platform.h"
      30
      31   namespace perfetto {
      32

â— ç°åœ¨æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ tracing_muxer.h åŒ…å«è·¯å¾„")
  â¿ Â [master 6bf8c20b] ä¿®å¤ tracing_muxer.h åŒ…å«è·¯å¾„
      1 file changed, 7 insertions(+), 7 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        2ba74b54..6bf8c20b  master -> master

â— å®Œç¾!ä¿®å¤å·²æäº¤ã€‚

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  tracing_muxer.h åŒ…å«è·¯å¾„é—®é¢˜
  - ä½¿ç”¨ç›¸å¯¹è·¯å¾„:
    - perfetto/base/export.h
    - perfetto/tracing/buffer_exhausted_policy.h
    - perfetto/tracing/core/forward_decls.h
    - perfetto/tracing/interceptor.h
    - perfetto/tracing/internal/basic_types.h
    - perfetto/tracing/internal/tracing_tls.h
    - perfetto/tracing/platform.h
  - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™äº›æ–‡ä»¶
  - é”™è¯¯: fatal error: 'perfetto/base/export.h' file not found

  è§£å†³æ–¹æ¡ˆ

  ä¿®å¤ tracing_muxer.h åŒ…å«è·¯å¾„
  - ä¿®å¤äº† 7 ä¸ªåŒ…å«è·¯å¾„
  - å…¨éƒ¨æ”¹ä¸ºä» third_party/perfetto/include/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
  - ä¸å…¶ä»– Perfetto å¤´æ–‡ä»¶ä¿æŒä¸€è‡´

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 30% (1448/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  è§‚å¯Ÿ

  æˆ‘ä»¬æ­£åœ¨ç³»ç»Ÿæ€§åœ°ä¿®å¤ Perfetto å¤´æ–‡ä»¶çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚ä¾èµ–é“¾ç»§ç»­å»¶ä¼¸:
  - track.h â†’ tracing_muxer.h â†’ ...

  æ¯ä¸ªæ–‡ä»¶éƒ½éœ€è¦ä¿®å¤å…¶åŒ…å«è·¯å¾„ã€‚æˆ‘ä»¬æ­£åœ¨å¿«é€Ÿå¤„ç†è¿™äº›é—®é¢˜,æ¯æ¬¡ä¿®å¤éƒ½ä¼šæš´éœ²å‡ºä¸‹ä¸€å±‚çš„ä¾èµ–ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Worked for 1m 18s

â¯ [1378/4772] CXX obj/base/base/battery_state_sampler.o
  [1379/4772] CXX obj/base/base/pickle.o
  [1380/4772] CXX obj/base/base/power_monitor_features.o
  [1381/4772] CXX obj/base/base/power_monitor.o
  FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:152:10: fatal error:
  'perfetto/protozero/field.h' file not found
  152 | #include "perfetto/protozero/field.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1382/4772] CXX obj/base/base/sampling_event_source.o
  [1383/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1384/4772] CXX obj/base/base/current_process.o
  [1385/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1386/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:152:10: fatal error:
  'perfetto/protozero/field.h' file not found
  152 | #include "perfetto/protozero/field.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç»§ç»­ä¿®å¤ interceptor.h çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚è®©æˆ‘å…ˆæŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶éœ€è¦ä¿®å¤å¤šå°‘ä¸ªåŒ…å«è·¯å¾„:

â— Bash(grep -n '#include "perfetto/'
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/tracing/interceptor.h" | head -20)
  â¿ Â 152:#include "perfetto/protozero/field.h"
     153:#include "perfetto/tracing/core/forward_decls.h"
     154:#include "perfetto/tracing/internal/basic_types.h"
     â€¦ +2 lines (ctrl+o to expand)

â— æœ‰ 5 ä¸ªåŒ…å«è·¯å¾„éœ€è¦ä¿®å¤ã€‚è®©æˆ‘è¯»å–æ–‡ä»¶å¹¶ä¿®å¤:

â— Read(src\third_party\perfetto\include\perfetto\tracing\interceptor.h)
  â¿ Â Read 160 lines

â— Update(src\third_party\perfetto\include\perfetto\tracing\interceptor.h)
  â¿ Â Added 5 lines, removed 5 lines
      149
      150   #include <functional>
      151
      152 -#include "perfetto/protozero/field.h"
      153 -#include "perfetto/tracing/core/forward_decls.h"
      154 -#include "perfetto/tracing/internal/basic_types.h"
      155 -#include "perfetto/tracing/internal/data_source_internal.h"
      156 -#include "perfetto/tracing/locked_handle.h"
      152 +#include "third_party/perfetto/include/perfetto/protozero/field.h"
      153 +#include "third_party/perfetto/include/perfetto/tracing/core/forward_decls.h"
      154 +#include "third_party/perfetto/include/perfetto/tracing/internal/basic_types.h"
      155 +#include "third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h"
      156 +#include "third_party/perfetto/include/perfetto/tracing/locked_handle.h"
      157
      158   namespace {
      159   class MockTracingMuxer;

â— ç°åœ¨æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ interceptor.h åŒ…å«è·¯å¾„")
  â¿ Â [master 5f1e9ff2] ä¿®å¤ interceptor.h åŒ…å«è·¯å¾„
      1 file changed, 5 insertions(+), 5 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        6bf8c20b..5f1e9ff2  master -> master

â— å®Œç¾!ä¿®å¤å·²æäº¤ã€‚

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  interceptor.h åŒ…å«è·¯å¾„é—®é¢˜
  - ä½¿ç”¨ç›¸å¯¹è·¯å¾„:
    - perfetto/protozero/field.h
    - perfetto/tracing/core/forward_decls.h
    - perfetto/tracing/internal/basic_types.h
    - perfetto/tracing/internal/data_source_internal.h
    - perfetto/tracing/locked_handle.h
  - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™äº›æ–‡ä»¶
  - é”™è¯¯: fatal error: 'perfetto/protozero/field.h' file not found

  è§£å†³æ–¹æ¡ˆ

  ä¿®å¤ interceptor.h åŒ…å«è·¯å¾„
  - ä¿®å¤äº† 5 ä¸ªåŒ…å«è·¯å¾„
  - å…¨éƒ¨æ”¹ä¸ºä» third_party/perfetto/include/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
  - ä¸å…¶ä»– Perfetto å¤´æ–‡ä»¶ä¿æŒä¸€è‡´

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 29% (1381/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  è§‚å¯Ÿ

  æˆ‘ä»¬æ­£åœ¨ç³»ç»Ÿæ€§åœ°ä¿®å¤ Perfetto å¤´æ–‡ä»¶çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚ä¾èµ–é“¾ç»§ç»­å»¶ä¼¸:
  - track.h â†’ tracing_muxer.h â†’ interceptor.h â†’ ...

  æ¯ä¸ªæ–‡ä»¶éƒ½éœ€è¦ä¿®å¤å…¶åŒ…å«è·¯å¾„ã€‚æˆ‘ä»¬æ­£åœ¨å¿«é€Ÿå¤„ç†è¿™äº›é—®é¢˜,æ¯æ¬¡ä¿®å¤éƒ½ä¼šæš´éœ²å‡ºä¸‹ä¸€å±‚çš„ä¾èµ–ã€‚è¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„è¿‡ç¨‹,æˆ‘ä»¬æ­£åœ¨æœ‰æ¡ä¸ç´Šåœ°è§£å†³ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Brewed for 1m 4s

â¯ FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_compat -Wall -Wextra -Wimplicit-fallthrough -Wextra-semi
  -Wunreachable-code-aggressive -Wgnu -Wno-gnu-anonymous-struct -Wno-gnu-conditional-omitted-operand
  -Wno-gnu-include-next -Wno-gnu-label-as-value -Wno-gnu-redeclared-enum -Wno-gnu-statement-expression
  -Wno-gnu-zero-variadic-macro-arguments -Wno-zero-length-array -Wthread-safety -Wunguarded-availability
  -Wno-missing-field-initializers -Wno-unused-parameter -Wno-psabi -Wloop-analysis
  -Wno-unneeded-internal-declaration -Wno-cast-function-type -Wno-thread-safety-reference-return
  -Wno-nontrivial-memcall -Wno-uninitialized-const-pointer -Wexit-time-destructors -Wshadow
  -fno-delete-null-pointer-checks -fno-strict-overflow -fno-ident -fno-math-errno -fno-strict-aliasing
  -fstack-protector -fno-unwind-tables -fno-asynchronous-unwind-tables -fPIC -fcolor-diagnostics
  -fmerge-all-constants -fno-sized-deallocation -fcrash-diagnostics-dir=../clang-crashreports -mllvm
  -instcombine-lower-dbg-declare=0 -mllvm -split-threshold-for-reg-with-hint=0 -ffp-contract=off -flto=thin
  -fsplit-lto-unit -mllvm -inlinehint-threshold=360 -fwhole-program-vtables -fcomplete-member-pointers
  -ffunction-sections -fno-short-enums -mbranch-protection=standard --target=aarch64-linux-android24 -mno-outline
  -Wno-builtin-macro-redefined -D__DATE__= -D__TIME__= -D__TIMESTAMP__= -ffile-compilation-dir=.
  -no-canonical-prefixes -Xclang -fmodule-file-home-is-cwd -Xclang -fmodules-cache-path=/not_exist_dummy_dir
  --warning-suppression-mappings=../../build/config/warning_suppression.txt -fno-omit-frame-pointer -g0
  -fsanitize=array-bounds -fsanitize-trap=array-bounds
  -fsanitize-ignorelist=../../tools/ubsan/array_bounds_ignorelist.txt -fvisibility=hidden -Wheader-hygiene
  -Wstring-conversion -Wtautological-overlap-compare -Xclang -add-plugin -Xclang find-bad-constructs -Xclang
  -plugin-arg-find-bad-constructs -Xclang check-stack-allocated -Xclang -plugin-arg-find-bad-constructs -Xclang
  check-ipc -Xclang -add-plugin -Xclang raw-ptr-plugin -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  check-raw-ptr-to-stack-allocated -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  disable-check-raw-ptr-to-stack-allocated-error -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../third_party/dawn/ -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../build/config/clang/chrome/test/fuzzing/webidl_fuzzing/ -DUNSAFE_BUFFERS_BUILD -Xclang
  -add-plugin -Xclang unsafe-buffers -Xclang -plugin-arg-unsafe-buffers -Xclang
  ../../build/config/unsafe_buffers_paths.txt -Wimplicit-int-conversion -Wshorten-64-to-32 -Wsign-compare
  -Wsign-conversion -Wtautological-unsigned-zero-compare -Wglobal-constructors -O2 -fdata-sections
  -ffunction-sections -fno-unique-section-names -Wno-invalid-offsetof -Wenum-compare-conditional
  -Wno-nullability-completeness -std=c++20 -Wno-trigraphs -fexperimental-relative-c++-abi-vtables
  -gsimple-template-names -fno-exceptions -fno-rtti -nostdinc++ -isystemgen/third_party/libc++/src/include
  -isystem../../third_party/libc++abi/src/include
  --sysroot=../../third_party/android_toolchain/ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot
  -fvisibility-inlines-hidden -fmodules -fno-implicit-module-maps -fno-implicit-modules -Xclang
  -fmodules-local-submodule-visibility -Wno-modules-ambiguous-internal-linkage -Wno-modules-import-nested-redundant
  -Wno-module-import-in-extern-c -fbuiltin-module-map
  -fmodule-map-file=gen/build/modules/android-arm64/module.modulemap
  -fmodule-map-file=gen/third_party/libc++/src/include/module.modulemap
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_float/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_intrinsics/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_inttypes/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_iso646/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_limits/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdalign/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdarg/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdatomic/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdbool/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdcountof/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef_wint_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdint/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdnoreturn/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_unwind/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/ptrauth/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_complex_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_core/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_ctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_errno_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_fenv_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_float_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_inttypes_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_math_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_private_mbstate_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_stdatomic_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_string_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_tgmath_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_uchar_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_wctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage1/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage2/module.pcm -c ../../base/power_monitor/power_monitor.cc
  -o obj/base/base/power_monitor.o
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:152:
  ../../third_party/perfetto/include/perfetto/protozero/field.h:26:10: fatal error: 'perfetto/base/logging.h' file
  not found
  26 | #include "perfetto/base/logging.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1446/4772] CXX obj/base/base/sampling_event_source.o
  [1447/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1448/4772] CXX obj/base/base/current_process.o
  [1449/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1450/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_compat -Wall -Wextra -Wimplicit-fallthrough -Wextra-semi
  -Wunreachable-code-aggressive -Wgnu -Wno-gnu-anonymous-struct -Wno-gnu-conditional-omitted-operand
  -Wno-gnu-include-next -Wno-gnu-label-as-value -Wno-gnu-redeclared-enum -Wno-gnu-statement-expression
  -Wno-gnu-zero-variadic-macro-arguments -Wno-zero-length-array -Wthread-safety -Wunguarded-availability
  -Wno-missing-field-initializers -Wno-unused-parameter -Wno-psabi -Wloop-analysis
  -Wno-unneeded-internal-declaration -Wno-cast-function-type -Wno-thread-safety-reference-return
  -Wno-nontrivial-memcall -Wno-uninitialized-const-pointer -Wexit-time-destructors -Wshadow
  -fno-delete-null-pointer-checks -fno-strict-overflow -fno-ident -fno-math-errno -fno-strict-aliasing
  -fstack-protector -fno-unwind-tables -fno-asynchronous-unwind-tables -fPIC -fcolor-diagnostics
  -fmerge-all-constants -fno-sized-deallocation -fcrash-diagnostics-dir=../clang-crashreports -mllvm
  -instcombine-lower-dbg-declare=0 -mllvm -split-threshold-for-reg-with-hint=0 -ffp-contract=off -flto=thin
  -fsplit-lto-unit -mllvm -inlinehint-threshold=360 -fwhole-program-vtables -fcomplete-member-pointers
  -ffunction-sections -fno-short-enums -mbranch-protection=standard --target=aarch64-linux-android24 -mno-outline
  -Wno-builtin-macro-redefined -D__DATE__= -D__TIME__= -D__TIMESTAMP__= -ffile-compilation-dir=.
  -no-canonical-prefixes -Xclang -fmodule-file-home-is-cwd -Xclang -fmodules-cache-path=/not_exist_dummy_dir
  --warning-suppression-mappings=../../build/config/warning_suppression.txt -fno-omit-frame-pointer -g0
  -fsanitize=array-bounds -fsanitize-trap=array-bounds
  -fsanitize-ignorelist=../../tools/ubsan/array_bounds_ignorelist.txt -fvisibility=hidden -Wheader-hygiene
  -Wstring-conversion -Wtautological-overlap-compare -Xclang -add-plugin -Xclang find-bad-constructs -Xclang
  -plugin-arg-find-bad-constructs -Xclang check-stack-allocated -Xclang -plugin-arg-find-bad-constructs -Xclang
  check-ipc -Xclang -add-plugin -Xclang raw-ptr-plugin -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  check-raw-ptr-to-stack-allocated -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  disable-check-raw-ptr-to-stack-allocated-error -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../third_party/dawn/ -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../build/config/clang/chrome/test/fuzzing/webidl_fuzzing/ -DUNSAFE_BUFFERS_BUILD -Xclang
  -add-plugin -Xclang unsafe-buffers -Xclang -plugin-arg-unsafe-buffers -Xclang
  ../../build/config/unsafe_buffers_paths.txt -Wimplicit-int-conversion -Wshorten-64-to-32 -Wsign-compare
  -Wsign-conversion -Wtautological-unsigned-zero-compare -Wglobal-constructors -O2 -fdata-sections
  -ffunction-sections -fno-unique-section-names -Wno-invalid-offsetof -Wenum-compare-conditional
  -Wno-nullability-completeness -std=c++20 -Wno-trigraphs -fexperimental-relative-c++-abi-vtables
  -gsimple-template-names -fno-exceptions -fno-rtti -nostdinc++ -isystemgen/third_party/libc++/src/include
  -isystem../../third_party/libc++abi/src/include
  --sysroot=../../third_party/android_toolchain/ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot
  -fvisibility-inlines-hidden -fmodules -fno-implicit-module-maps -fno-implicit-modules -Xclang
  -fmodules-local-submodule-visibility -Wno-modules-ambiguous-internal-linkage -Wno-modules-import-nested-redundant
  -Wno-module-import-in-extern-c -fbuiltin-module-map
  -fmodule-map-file=gen/build/modules/android-arm64/module.modulemap
  -fmodule-map-file=gen/third_party/libc++/src/include/module.modulemap
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_float/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_intrinsics/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_inttypes/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_iso646/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_limits/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdalign/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdarg/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdatomic/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdbool/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdcountof/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef_wint_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdint/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdnoreturn/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_unwind/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/ptrauth/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_complex_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_core/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_ctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_errno_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_fenv_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_float_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_inttypes_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_math_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_private_mbstate_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_stdatomic_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_string_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_tgmath_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_uchar_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_wctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage1/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage2/module.pcm -c
  ../../base/power_monitor/power_monitor_source.cc -o obj/base/base/power_monitor_source.o
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:152:
  ../../third_party/perfetto/include/perfetto/protozero/field.h:26:10: fatal error: 'perfetto/base/logging.h' file
  not found
  26 | #include "perfetto/base/logging.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç»§ç»­ä¿®å¤ field.h çš„åŒ…å«è·¯å¾„é—®é¢˜:

â— Bash(grep -n '#include "perfetto/'
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protozero/field.h" | head -10)
  â¿ Â 26:#include "perfetto/base/logging.h"
     27:#include "perfetto/protozero/contiguous_memory_range.h"
     28:#include "perfetto/protozero/proto_utils.h"

â— Read(src\third_party\perfetto\include\perfetto\protozero\field.h)
  â¿ Â Read 35 lines

â— Update(src\third_party\perfetto\include\perfetto\protozero\field.h)
  â¿ Â Added 3 lines, removed 3 lines
      23   #include <string_view>
      24   #include <vector>
      25
      26 -#include "perfetto/base/logging.h"
      27 -#include "perfetto/protozero/contiguous_memory_range.h"
      28 -#include "perfetto/protozero/proto_utils.h"
      26 +#include "third_party/perfetto/include/perfetto/base/logging.h"
      27 +#include "third_party/perfetto/include/perfetto/protozero/contiguous_memory_range.h"
      28 +#include "third_party/perfetto/include/perfetto/protozero/proto_utils.h"
      29
      30   namespace protozero {
      31

â— ç°åœ¨æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ field.h åŒ…å«è·¯å¾„")
  â¿ Â [master b4846f9e] ä¿®å¤ field.h åŒ…å«è·¯å¾„
      1 file changed, 3 insertions(+), 3 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        5f1e9ff2..b4846f9e  master -> master

â— å®Œç¾!ä¿®å¤å·²æäº¤ã€‚æˆ‘ä»¬å·²ç»ä¿®å¤äº†å¤§é‡çš„ Perfetto å¤´æ–‡ä»¶åŒ…å«è·¯å¾„é—®é¢˜ã€‚è®©æˆ‘æ€»ç»“ä¸€ä¸‹å½“å‰çš„è¿›å±•:

  å½“å‰è¿›å±•æ€»ç»“

  å·²ä¿®å¤çš„ Perfetto å¤´æ–‡ä»¶åŒ…å«è·¯å¾„

  æˆ‘ä»¬å·²ç»ç³»ç»Ÿæ€§åœ°ä¿®å¤äº†ä»¥ä¸‹æ–‡ä»¶çš„åŒ…å«è·¯å¾„:

  1. track.h - 11 ä¸ªåŒ…å«è·¯å¾„
  2. proc_utils.h - 1 ä¸ªåŒ…å«è·¯å¾„
  3. thread_utils.h - 2 ä¸ªåŒ…å«è·¯å¾„
  4. message_handle.h - 3 ä¸ªåŒ…å«è·¯å¾„
  5. message.h - 5 ä¸ªåŒ…å«è·¯å¾„
  6. proto_utils.h - 2 ä¸ªåŒ…å«è·¯å¾„
  7. pb_utils.h - 1 ä¸ªåŒ…å«è·¯å¾„
  8. scattered_stream_writer.h - 4 ä¸ªåŒ…å«è·¯å¾„
  9. tracing_muxer.h - 7 ä¸ªåŒ…å«è·¯å¾„
  10. interceptor.h - 5 ä¸ªåŒ…å«è·¯å¾„
  11. field.h - 3 ä¸ªåŒ…å«è·¯å¾„

  æ€»è®¡: å·²ä¿®å¤ 44 ä¸ªåŒ…å«è·¯å¾„!

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 30% (1445/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  ä¿®å¤æ¨¡å¼

  æ‰€æœ‰ä¿®å¤éƒ½éµå¾ªç›¸åŒçš„æ¨¡å¼:
  // ä¿®æ”¹å‰
  #include "perfetto/..."

  // ä¿®æ”¹å
  #include "third_party/perfetto/include/perfetto/..."

  è§‚å¯Ÿ

  æˆ‘ä»¬æ­£åœ¨æ²¿ç€ Perfetto å¤´æ–‡ä»¶çš„ä¾èµ–é“¾é€ä¸ªä¿®å¤åŒ…å«è·¯å¾„é—®é¢˜ã€‚æ¯ä¿®å¤ä¸€ä¸ªæ–‡ä»¶,å°±ä¼šæš´éœ²å‡ºä¸‹ä¸€å±‚çš„ä¾èµ–ã€‚è¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„è¿‡ç¨‹,æˆ‘ä»¬æ­£åœ¨å¿«é€Ÿä¸”ç³»ç»Ÿæ€§åœ°è§£å†³è¿™äº›é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ,çœ‹çœ‹æ˜¯å¦è¿˜æœ‰æ›´å¤šæ–‡ä»¶éœ€è¦ä¿®å¤!ğŸš€

âœ» Cogitated for 1m 5s

â¯ FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:29:10: fatal error:
  'perfetto/tracing/buffer_exhausted_policy.h' file not found
  29 | #include "perfetto/tracing/buffer_exhausted_policy.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1454/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:29:10: fatal error:
  'perfetto/tracing/buffer_exhausted_policy.h' file not found
  29 | #include "perfetto/tracing/buffer_exhausted_policy.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1455/4772] CXX obj/base/base/frame.o
  [1456/4772] CXX obj/base/base/environment_internal.o
  [1457/4772] CXX obj/base/base/set_process_title.o
  [1458/4772] CXX obj/base/base/metadata_recorder.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç»§ç»­ä¿®å¤ data_source_internal.h çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚è®©æˆ‘å…ˆæŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶éœ€è¦ä¿®å¤å¤šå°‘ä¸ªåŒ…å«è·¯å¾„:

â— Bash(grep -n '#include "perfetto/'
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h" | head
       -20)
  â¿ Â 29:#include "perfetto/tracing/buffer_exhausted_policy.h"
     30:#include "perfetto/tracing/core/data_source_config.h"
     31:#include "perfetto/tracing/internal/basic_types.h"
     32:#include "perfetto/tracing/trace_writer_base.h"

â— æœ‰ 4 ä¸ªåŒ…å«è·¯å¾„éœ€è¦ä¿®å¤ã€‚è®©æˆ‘è¯»å–æ–‡ä»¶å¹¶ä¿®å¤:

â— Read(src\third_party\perfetto\include\perfetto\tracing\internal\data_source_internal.h)
  â¿ Â Read 40 lines

â— Update(src\third_party\perfetto\include\perfetto\tracing\internal\data_source_internal.h)
  â¿ Â Added 4 lines, removed 4 lines
      26   #include <mutex>
      27
      28   // No perfetto headers (other than tracing/api and protozero) should be here.
      29 -#include "perfetto/tracing/buffer_exhausted_policy.h"
      30 -#include "perfetto/tracing/core/data_source_config.h"
      31 -#include "perfetto/tracing/internal/basic_types.h"
      32 -#include "perfetto/tracing/trace_writer_base.h"
      29 +#include "third_party/perfetto/include/perfetto/tracing/buffer_exhausted_policy.h"
      30 +#include "third_party/perfetto/include/perfetto/tracing/core/data_source_config.h"
      31 +#include "third_party/perfetto/include/perfetto/tracing/internal/basic_types.h"
      32 +#include "third_party/perfetto/include/perfetto/tracing/trace_writer_base.h"
      33
      34   namespace perfetto {
      35

â— ç°åœ¨æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ data_source_internal.h åŒ…å«è·¯å¾„")
  â¿ Â [master 44079ca3] ä¿®å¤ data_source_internal.h åŒ…å«è·¯å¾„
      1 file changed, 4 insertions(+), 4 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        b4846f9e..44079ca3  master -> master

â— å®Œç¾!ä¿®å¤å·²æäº¤ã€‚

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  data_source_internal.h åŒ…å«è·¯å¾„é—®é¢˜
  - ä½¿ç”¨ç›¸å¯¹è·¯å¾„:
    - perfetto/tracing/buffer_exhausted_policy.h
    - perfetto/tracing/core/data_source_config.h
    - perfetto/tracing/internal/basic_types.h
    - perfetto/tracing/trace_writer_base.h
  - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™äº›æ–‡ä»¶
  - é”™è¯¯: fatal error: 'perfetto/tracing/buffer_exhausted_policy.h' file not found

  è§£å†³æ–¹æ¡ˆ

  ä¿®å¤ data_source_internal.h åŒ…å«è·¯å¾„
  - ä¿®å¤äº† 4 ä¸ªåŒ…å«è·¯å¾„
  - å…¨éƒ¨æ”¹ä¸ºä» third_party/perfetto/include/ å¼€å§‹çš„å®Œæ•´è·¯å¾„
  - ä¸å…¶ä»– Perfetto å¤´æ–‡ä»¶ä¿æŒä¸€è‡´

  å·²ä¿®å¤çš„ Perfetto å¤´æ–‡ä»¶æ€»æ•°

  æˆ‘ä»¬ç°åœ¨å·²ç»ä¿®å¤äº† 12 ä¸ª Perfetto å¤´æ–‡ä»¶,æ€»è®¡ 48 ä¸ªåŒ…å«è·¯å¾„!

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 30% (1453/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  è§‚å¯Ÿ

  æˆ‘ä»¬æ­£åœ¨ç³»ç»Ÿæ€§åœ°ä¿®å¤ Perfetto å¤´æ–‡ä»¶çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚ä¾èµ–é“¾ç»§ç»­å»¶ä¼¸:
  - track.h â†’ tracing_muxer.h â†’ interceptor.h â†’ data_source_internal.h â†’ ...

  æ¯ä¸ªæ–‡ä»¶éƒ½éœ€è¦ä¿®å¤å…¶åŒ…å«è·¯å¾„ã€‚æˆ‘ä»¬æ­£åœ¨å¿«é€Ÿå¤„ç†è¿™äº›é—®é¢˜,æ¯æ¬¡ä¿®å¤éƒ½ä¼šæš´éœ²å‡ºä¸‹ä¸€å±‚çš„ä¾èµ–ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Brewed for 1m 5s

â¯ FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:30:
  ../../third_party/perfetto/include/perfetto/tracing/core/data_source_config.h:24:10: fatal error:
  'perfetto/tracing/core/forward_decls.h' file not found
  24 | #include "perfetto/tracing/core/forward_decls.h"  // IWYU pragma: export
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1368/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1369/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1370/4772] CXX obj/base/base/current_process.o
  [1371/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:30:
  ../../third_party/perfetto/include/perfetto/tracing/core/data_source_config.h:24:10: fatal error:
  'perfetto/tracing/core/forward_decls.h' file not found
  24 | #include "perfetto/tracing/core/forward_decls.h"  // IWYU pragma: export
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1372/4772] CXX obj/base/base/environment_internal.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç»§ç»­ä¿®å¤ data_source_config.h çš„åŒ…å«è·¯å¾„é—®é¢˜:

â— Bash(grep -n '#include "perfetto/'
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/tracing/core/data_source_config.h" | head -10)
  â¿ Â 24:#include "perfetto/tracing/core/forward_decls.h"  // IWYU pragma: export

â— åªæœ‰ 1 ä¸ªåŒ…å«è·¯å¾„éœ€è¦ä¿®å¤ã€‚è®©æˆ‘è¯»å–æ–‡ä»¶å¹¶ä¿®å¤:

â— Read(src\third_party\perfetto\include\perfetto\tracing\core\data_source_config.h)
  â¿ Â Read 29 lines

â— Update(src\third_party\perfetto\include\perfetto\tracing\core\data_source_config.h)
  â¿ Â Added 1 line, removed 1 line
      21   // using ::perfetto::Foo = ::perfetto::protos::gen::Foo.
      22   // See comments in forward_decls.h for the historical reasons of this
      23   // indirection layer.
      24 -#include "perfetto/tracing/core/forward_decls.h"  // IWYU pragma: export
      24 +#include "third_party/perfetto/include/perfetto/tracing/core/forward_decls.h"  // IWYU pragma: export
      25
      26   #include "protos/perfetto/config/data_source_config.gen.h"  // IWYU pragma: export
      27

â— ç°åœ¨æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ data_source_config.h åŒ…å«è·¯å¾„")
  â¿ Â [master ed311050] ä¿®å¤ data_source_config.h åŒ…å«è·¯å¾„
      1 file changed, 1 insertion(+), 1 deletion(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        44079ca3..ed311050  master -> master

â— å®Œç¾!ä¿®å¤å·²æäº¤ã€‚æˆ‘ä»¬å·²ç»ä¿®å¤äº† 13 ä¸ª Perfetto å¤´æ–‡ä»¶,æ€»è®¡ 49 ä¸ªåŒ…å«è·¯å¾„!

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  data_source_config.h åŒ…å«è·¯å¾„é—®é¢˜
  - ä½¿ç”¨ç›¸å¯¹è·¯å¾„: perfetto/tracing/core/forward_decls.h
  - ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶
  - é”™è¯¯: fatal error: 'perfetto/tracing/core/forward_decls.h' file not found

  è§£å†³æ–¹æ¡ˆ

  ä¿®å¤ data_source_config.h åŒ…å«è·¯å¾„
  - ä¿®å¤äº† 1 ä¸ªåŒ…å«è·¯å¾„
  - æ”¹ä¸ºä» third_party/perfetto/include/ å¼€å§‹çš„å®Œæ•´è·¯å¾„

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 29% (1368/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  è§‚å¯Ÿ

  æˆ‘ä»¬æ­£åœ¨ç³»ç»Ÿæ€§åœ°ä¿®å¤ Perfetto å¤´æ–‡ä»¶çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚ä¾èµ–é“¾ç»§ç»­å»¶ä¼¸,æ¯ä¿®å¤ä¸€ä¸ªæ–‡ä»¶,å°±ä¼šæš´éœ²å‡ºä¸‹ä¸€å±‚çš„ä¾èµ–ã€‚æˆ‘ä»¬æ­£åœ¨å¿«é€Ÿå¤„ç†è¿™äº›é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Churned for 1m 4s

â¯ FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:30:
  ../../third_party/perfetto/include/perfetto/tracing/core/data_source_config.h:26:10: fatal error:
  'protos/perfetto/config/data_source_config.gen.h' file not found
  26 | #include "protos/perfetto/config/data_source_config.gen.h"  // IWYU pragma: export
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1390/4772] CXX obj/base/base/process_handle.o
  [1391/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1392/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:30:
  ../../third_party/perfetto/include/perfetto/tracing/core/data_source_config.h:26:10: fatal error:
  'protos/perfetto/config/data_source_config.gen.h' file not found
  26 | #include "protos/perfetto/config/data_source_config.gen.h"  // IWYU pragma: export
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1393/4772] CXX obj/base/base/environment_internal.o
  [1394/4772] CXX obj/base/base/set_process_title.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç°åœ¨é‡åˆ°çš„æ˜¯ data_source_config.gen.h æ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ª protobuf ç”Ÿæˆçš„æ–‡ä»¶ã€‚è®©æˆ‘æ£€æŸ¥è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨,å¦‚æœä¸å­˜åœ¨,æˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ª stub:

â— Bash(find "F:/code/naiveproxy-ohos/src/third_party/perfetto" -name "data_source_config.gen.h" -type f 2>/dev/null |
      head -5)
  â¿ Â (No content)

â— æ–‡ä»¶ä¸å­˜åœ¨ã€‚è®©æˆ‘æ£€æŸ¥æ˜¯å¦æœ‰å¯¹åº”çš„ .proto æ–‡ä»¶:

â— Bash(find "F:/code/naiveproxy-ohos/src/third_party/perfetto" -name "data_source_config.proto" -type f 2>/dev/null)
  â¿ Â F:/code/naiveproxy-ohos/src/third_party/perfetto/protos/perfetto/config/data_source_config.proto

â— proto æ–‡ä»¶å­˜åœ¨ã€‚è®©æˆ‘æŸ¥çœ‹å®ƒçš„å†…å®¹,ç„¶ååˆ›å»ºä¸€ä¸ª stub çš„ .gen.h æ–‡ä»¶:

â— Read(src\third_party\perfetto\protos\perfetto\config\data_source_config.proto)
  â¿ Â Read 50 lines

â— è¿™ä¸ª proto æ–‡ä»¶å¾ˆå¤æ‚,æœ‰å¾ˆå¤šå¯¼å…¥ã€‚è®©æˆ‘åˆ›å»ºä¸€ä¸ªç®€å•çš„ stub æ–‡ä»¶ã€‚é¦–å…ˆåˆ›å»ºç›®å½•:

â— Bash(mkdir -p "F:/code/naiveproxy-ohos/src/third_party/perfetto/protos/perfetto/config")
  â¿ Â (No content)

â— ç°åœ¨åˆ›å»º stub æ–‡ä»¶:

â— Write(src\third_party\perfetto\protos\perfetto\config\data_source_config.gen.h)
  â¿ Â Wrote 1 lines to src\third_party\perfetto\protos\perfetto\config\data_source_config.gen.h
     // Copyright 2025 Stub implementation for OpenHarmony
     // This is a stub file to satisfy build dependencies
     #ifndef PERFETTO_PROTOS_PERFETTO_CONFIG_DATA_SOURCE_CONFIG_GEN_H_
     #define PERFETTO_PROTOS_PERFETTO_CONFIG_DATA_SOURCE_CONFIG_GEN_H_
     #include <string>
     #include <vector>
     namespace perfetto {

â— ç°åœ¨æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "æ·»åŠ  data_source_config.gen.h stub")
  â¿ Â [master 3eb4c169] æ·»åŠ  data_source_config.gen.h stub
      1 file changed, 48 insertions(+)
      create mode 100644 src/third_party/perfetto/protos/perfetto/config/data_source_config.gen.h
     â€¦ +2 lines (ctrl+o to expand)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        ed311050..3eb4c169  master -> master

â— å®Œç¾!ä¿®å¤å·²æäº¤ã€‚

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  data_source_config.gen.h æ–‡ä»¶ç¼ºå¤±
  - data_source_config.h åŒ…å«äº† protos/perfetto/config/data_source_config.gen.h
  - è¿™æ˜¯ä¸€ä¸ª protobuf ç”Ÿæˆçš„æ–‡ä»¶,ä½†æˆ‘ä»¬æ²¡æœ‰ç”Ÿæˆå®ƒ
  - é”™è¯¯: fatal error: 'protos/perfetto/config/data_source_config.gen.h' file not found

  è§£å†³æ–¹æ¡ˆ

  åˆ›å»º data_source_config.gen.h stub
  - åŸºäº data_source_config.proto åˆ›å»º stub
  - å®šä¹‰äº† DataSourceConfig ç±»,åŒ…å«åŸºæœ¬çš„æˆå‘˜å’Œæ–¹æ³•:
    - name() / set_name() - æ•°æ®æºåç§°
    - target_buffer() / set_target_buffer() - ç›®æ ‡ç¼“å†²åŒº
    - trace_duration_ms() / set_trace_duration_ms() - è·Ÿè¸ªæŒç»­æ—¶é—´
    - enable_extra_guardrails() / set_enable_extra_guardrails() - é¢å¤–ä¿æŠ¤
    - legacy_config() / set_legacy_config() - é—ç•™é…ç½®
  - æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ç®€å•çš„ getter/setter stub å®ç°

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 29% (1390/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  è§‚å¯Ÿ

  æˆ‘ä»¬ç°åœ¨ä¸ä»…åœ¨ä¿®å¤åŒ…å«è·¯å¾„,è¿˜åœ¨åˆ›å»ºç¼ºå¤±çš„ protobuf ç”Ÿæˆæ–‡ä»¶çš„ stubã€‚è¿™æ˜¯æ­£å¸¸çš„,å› ä¸ºæˆ‘ä»¬å·²ç» stub åŒ–äº†æ•´ä¸ª tracing ç³»ç»Ÿã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Cooked for 1m 38s

â¯ FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:30:
  ../../third_party/perfetto/include/perfetto/tracing/core/data_source_config.h:26:10: fatal error:
  'protos/perfetto/config/data_source_config.gen.h' file not found
  26 | #include "protos/perfetto/config/data_source_config.gen.h"  // IWYU pragma: export
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1388/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1389/4772] CXX obj/base/base/current_process.o
  [1390/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1391/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:30:
  ../../third_party/perfetto/include/perfetto/tracing/core/data_source_config.h:26:10: fatal error:
  'protos/perfetto/config/data_source_config.gen.h' file not found
  26 | #include "protos/perfetto/config/data_source_config.gen.h"  // IWYU pragma: export
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1392/4772] CXX obj/base/base/environment_internal.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— é—®é¢˜æ˜¯ç¼–è¯‘å™¨åœ¨ src/ ç›®å½•ä¸‹æŸ¥æ‰¾ protos/perfetto/config/data_source_config.gen.h,ä½†æˆ‘åˆ›å»ºçš„æ–‡ä»¶åœ¨ src/third_party/perfetto/protos/...ã€‚è®©æˆ‘æ£€æŸ¥æ­£ç¡®çš„è·¯å¾„åº”è¯¥æ˜¯ä»€ä¹ˆ:

â— Bash(ls -la "F:/code/naiveproxy-ohos/src/third_party/perfetto/protos/perfetto/config/" 2>/dev/null | head -10)
  â¿ Â total 305
     drwxr-xr-x 1 hotyi 197121      0  1æœˆ  8 15:39 .
     drwxr-xr-x 1 hotyi 197121      0  1æœˆ  3 14:29 ..
     â€¦ +7 lines (ctrl+o to expand)

â— æ–‡ä»¶å·²ç»åˆ›å»ºäº†ã€‚é—®é¢˜æ˜¯ç¼–è¯‘å™¨åœ¨ src/protos/perfetto/config/ ä¸‹æŸ¥æ‰¾,è€Œä¸æ˜¯åœ¨ src/third_party/perfetto/protos/perfetto/config/ ä¸‹ã€‚è®©æˆ‘æ£€æŸ¥æ˜¯å¦éœ€è¦åœ¨ src/protos/ ä¸‹åˆ›å»ºè¿™ä¸ªæ–‡ä»¶:

â— Bash(ls -la "F:/code/naiveproxy-ohos/src/protos/" 2>/dev/null || echo "Directory does not exist")
  â¿ Â Directory does not exist

â— ç›®å½•ä¸å­˜åœ¨ã€‚è®©æˆ‘åˆ›å»ºç›®å½•å¹¶å¤åˆ¶æ–‡ä»¶:

â— Bash(mkdir -p "F:/code/naiveproxy-ohos/src/protos/perfetto/config")
  â¿ Â (No content)

â— Bash(cp "F:/code/naiveproxy-ohos/src/third_party/perfetto/protos/perfetto/config/data_source_config.gen.h"
      "F:/code/naiveproxy-ohos/src/protos/perfetto/config/data_sâ€¦)
  â¿ Â (No content)

â— ç°åœ¨æäº¤è¿™ä¸ªä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "å°† data_source_config.gen.h å¤åˆ¶åˆ° src/protos ç›®å½•")
  â¿ Â [master 68da4914] å°† data_source_config.gen.h å¤åˆ¶åˆ° src/protos ç›®å½•
      1 file changed, 48 insertions(+)
      create mode 100644 src/protos/perfetto/config/data_source_config.gen.h
     â€¦ +2 lines (ctrl+o to expand)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        3eb4c169..68da4914  master -> master

â— å®Œç¾!ä¿®å¤å·²æäº¤ã€‚

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  data_source_config.gen.h æ–‡ä»¶è·¯å¾„é—®é¢˜
  - ç¼–è¯‘å™¨åœ¨ src/protos/perfetto/config/ ä¸‹æŸ¥æ‰¾æ–‡ä»¶
  - ä½†æˆ‘åˆ›å»ºçš„æ–‡ä»¶åœ¨ src/third_party/perfetto/protos/perfetto/config/ ä¸‹
  - éœ€è¦åœ¨æ­£ç¡®çš„ä½ç½®åˆ›å»ºæ–‡ä»¶
  - é”™è¯¯: fatal error: 'protos/perfetto/config/data_source_config.gen.h' file not found

  è§£å†³æ–¹æ¡ˆ

  å°† data_source_config.gen.h å¤åˆ¶åˆ°æ­£ç¡®ä½ç½®
  - åˆ›å»º src/protos/perfetto/config/ ç›®å½•
  - å°†æ–‡ä»¶å¤åˆ¶åˆ°è¿™ä¸ªä½ç½®
  - ç°åœ¨ç¼–è¯‘å™¨å¯ä»¥åœ¨ src/protos/ ä¸‹æ‰¾åˆ°æ–‡ä»¶

  ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªä½ç½®?

  åœ¨ Chromium æ„å»ºç³»ç»Ÿä¸­:
  - src/third_party/perfetto/include/perfetto/... - ç”¨äº #include "third_party/perfetto/include/perfetto/..."
  - src/protos/perfetto/... - ç”¨äº #include "protos/perfetto/..."

  è¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„åŒ…å«è·¯å¾„çº¦å®š,æˆ‘ä»¬éœ€è¦åœ¨ä¸¤ä¸ªä½ç½®éƒ½æä¾›æ–‡ä»¶ã€‚

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾çº¦ 29% (1388/4772),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Worked for 1m 31s

â¯ FAILED: obj/base/base/power_monitor.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/sr
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor.cc:5:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:32:
  ../../third_party/perfetto/include/perfetto/tracing/trace_writer_base.h:21:10: fatal error:
  'perfetto/base/export.h' file not found
  21 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1391/4772] CXX obj/base/base/statistics_recorder.o
  [1392/4772] CXX obj/base/base/cpu_frequency_utils.o
  In file included from ../../base/power_monitor/cpu_frequency_utils.cc:11:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1393/4772] CXX obj/base/base/current_process.o
  [1394/4772] CXX obj/base/base/timer_sampling_event_source.o
  [1395/4772] CXX obj/base/base/power_monitor_source.o
  FAILED: obj/base/base/power_monitor_source.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/power_monitor_source.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_feat
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/power_monitor/power_monitor_source.cc:8:
  In file included from ../../base/power_monitor/power_monitor.h:17:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/track.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/tracing_muxer.h:26:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/interceptor.h:155:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/internal/data_source_internal.h:32:
  ../../third_party/perfetto/include/perfetto/tracing/trace_writer_base.h:21:10: fatal error:
  'perfetto/base/export.h' file not found
  21 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.
