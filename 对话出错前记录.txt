
â¯ åˆšæ‰çš„å¯¹è¯å‡ºé”™é€€å‡ºäº†ï¼Œè¯·ä½ ä»”ç»†é˜…è¯»ç›®å½•ä¸‹ï¼šå¯¹è¯å‡ºé”™å‰è®°å½•.txt,ç„¶åæ¥ç€æŠŠå·¥ä½œç»§ç»­ã€‚

â— æˆ‘æ¥è¯»å–ä¸€ä¸‹å¯¹è¯å‡ºé”™å‰çš„è®°å½•æ–‡ä»¶ã€‚

â— Read(å¯¹è¯å‡ºé”™å‰è®°å½•.txt)
  â¿ Â Read 4022 lines

â— å¥½çš„,æˆ‘å·²ç»ä»”ç»†é˜…è¯»äº†å¯¹è¯å‡ºé”™å‰çš„è®°å½•ã€‚ç°åœ¨çš„é—®é¢˜å¾ˆæ¸…æ¥šäº†: 1. EventContext è¢«é‡å¤å®šä¹‰ - åœ¨ traced_value.h å’Œæˆ‘ä»¬å†…è”å®šä¹‰çš„åœ°æ–¹éƒ½æœ‰å®šä¹‰ 2. InternedData ç¼ºå°‘å­—æ®µå¸¸é‡ - éœ€è¦ kSourceLocationsFieldNumber ç­‰å¸¸é‡ 3. è¿˜æœ‰å…¶ä»–ç¼ºå¤±çš„å¤´æ–‡ä»¶ - perfetto/base/export.h ç­‰ è®©æˆ‘ç»§ç»­ä¿®å¤è¿™äº›é—®é¢˜ã€‚é¦–å…ˆ,æˆ‘éœ€è¦ç§»é™¤æˆ‘ä»¬å†…è”å®šä¹‰çš„ EventContext,å› ä¸ºå®ƒå·²ç»åœ¨ traced_value.h ä¸­å®šä¹‰äº†:

â— Read(src\third_party\perfetto\include\perfetto\tracing\track_event_interned_data_index.h)
  â¿ Â Read 20 lines

â— ç°åœ¨æˆ‘éœ€è¦ç§»é™¤å†…è”çš„ EventContext å®šä¹‰,å¹¶æ£€æŸ¥ traced_value.h ä¸­çš„å®šä¹‰æ˜¯å¦åŒ…å« incremental_state_ å­—æ®µ:

â— Read(src\third_party\perfetto\include\perfetto\tracing\traced_value.h)
  â¿ Â Read 52 lines

â— æˆ‘çœ‹åˆ° traced_value.h ä¸­çš„ EventContext æ²¡æœ‰ incremental_state_ å­—æ®µã€‚æˆ‘éœ€è¦æ›´æ–°å®ƒ,å¹¶ç§»é™¤ track_event_interned_data_index.h ä¸­çš„é‡å¤å®šä¹‰:

â— Update(src\third_party\perfetto\include\perfetto\tracing\traced_value.h)
  â¿ Â Added 7 lines
      36     TracedDictionary WriteDictionary() { return TracedDictionary(); }
      37   };
      38
      39 + // Forward declaration for internal types
      40 + namespace internal {
      41 + struct TrackEventIncrementalState;
      42 + }
      43 +
      44   // Stub EventContext class
      45   class EventContext {
      46    public:
      47     EventContext() = default;
      48     ~EventContext() = default;
      49 +
      50 +   internal::TrackEventIncrementalState* incremental_state_ = nullptr;
      51   };
      52
      53   // Note: WriteIntoTracedValue and other functions are defined in traced_value_forward.h

â— ç°åœ¨ç§»é™¤ track_event_interned_data_index.h ä¸­çš„é‡å¤ EventContext å®šä¹‰:

â— Update(src\third_party\perfetto\include\perfetto\tracing\track_event_interned_data_index.h)
  â¿ Â Removed 10 lines
      82   }
      83   }
      84
      85 - // Inline EventContext definition to avoid missing header
      86 - namespace perfetto {
      87 - class EventContext {
      88 -  public:
      89 -   EventContext() = default;
      90 -   ~EventContext() = default;
      91 -   internal::TrackEventIncrementalState* incremental_state_ = nullptr;
      92 - };
      93 - }
      94 -
      85   #include <map>
      86   #include <memory>
      87   #include <type_traits>

â— ç°åœ¨éœ€è¦æ›´æ–° InternedData çš„ stub,æ·»åŠ æ‰€éœ€çš„å­—æ®µå¸¸é‡:

â— Read(src\third_party\perfetto\protos\perfetto\trace\interned_data\interned_data.pbzero.h)
  â¿ Â Read 25 lines

â— æˆ‘éœ€è¦æ·»åŠ æ‰€æœ‰ç¼ºå¤±çš„å­—æ®µå¸¸é‡:

â— Update(src\third_party\perfetto\protos\perfetto\trace\interned_data\interned_data.pbzero.h)
  â¿ Â Added 9 lines, removed 1 line
      11    public:
      12     InternedData() = default;
      13     ~InternedData() = default;
      14 -
      14 +
      15 +   // Field numbers for protobuf fields
      16 +   static constexpr int kSourceLocationsFieldNumber = 4;
      17 +   static constexpr int kLogMessageBodyFieldNumber = 20;
      18 +   static constexpr int kBuildIdsFieldNumber = 16;
      19 +   static constexpr int kMappingPathsFieldNumber = 17;
      20 +   static constexpr int kMappingsFieldNumber = 19;
      21 +   static constexpr int kUnsymbolizedSourceLocationsFieldNumber = 6;
      22 +
      23     // Stub methods - do nothing
      24     void set_iid(uint64_t) {}
      25     void set_value(const char*) {}

â— ç°åœ¨æäº¤å¹¶æ¨é€è¿™äº›ä¿®å¤:

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ EventContext é‡å¤å®šä¹‰å¹¶æ·»åŠ  InternedData
      å­—æ®µå¸¸é‡â€¦)
  â¿ Â [master 86882db5] ä¿®å¤ EventContext é‡å¤å®šä¹‰å¹¶æ·»åŠ  InternedData å­—æ®µå¸¸é‡
      4 files changed, 3396 insertions(+), 4226 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        dd017e3e..86882db5  master -> master

â— å®Œç¾!è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤:

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ä»å¯¹è¯å‡ºé”™å‰çš„è®°å½•ä¸­,æˆ‘å‘ç°äº†å‡ ä¸ªå…³é”®é—®é¢˜:

  1. EventContext é‡å¤å®šä¹‰
    - åœ¨ traced_value.h å’Œ track_event_interned_data_index.h ä¸­éƒ½å®šä¹‰äº† EventContext
    - å¯¼è‡´ç¼–è¯‘å™¨æŠ¥é”™: redefinition of 'EventContext'
  2. EventContext ç¼ºå°‘å­—æ®µ
    - track_event_interned_data_index.h ä¸­çš„ä»£ç éœ€è¦è®¿é—® ctx->incremental_state_
    - ä½† traced_value.h ä¸­çš„ EventContext æ²¡æœ‰è¿™ä¸ªå­—æ®µ
  3. InternedData ç¼ºå°‘å­—æ®µå¸¸é‡
    - interned_args_helper.h éœ€è¦è®¿é—®å¤šä¸ªå­—æ®µå¸¸é‡:
        - kSourceLocationsFieldNumber
      - kLogMessageBodyFieldNumber
      - kBuildIdsFieldNumber
      - kMappingPathsFieldNumber
      - kMappingsFieldNumber
      - kUnsymbolizedSourceLocationsFieldNumber

  è§£å†³æ–¹æ¡ˆ

  1. ç»Ÿä¸€ EventContext å®šä¹‰
    - åœ¨ traced_value.h ä¸­æ·»åŠ  incremental_state_ å­—æ®µ
    - ç§»é™¤ track_event_interned_data_index.h ä¸­çš„é‡å¤å®šä¹‰
    - æ·»åŠ å‰å‘å£°æ˜ internal::TrackEventIncrementalState
  2. å®Œå–„ InternedData stub
    - æ·»åŠ æ‰€æœ‰å¿…éœ€çš„å­—æ®µå¸¸é‡
    - ä½¿ç”¨ static constexpr int å®šä¹‰

  ä¿®æ”¹çš„æ–‡ä»¶

  1. src/third_party/perfetto/include/perfetto/tracing/traced_value.h
    - æ·»åŠ  incremental_state_ å­—æ®µåˆ° EventContext
    - æ·»åŠ å‰å‘å£°æ˜
  2. src/third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h
    - ç§»é™¤é‡å¤çš„ EventContext å®šä¹‰
  3. src/third_party/perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h
    - æ·»åŠ  6 ä¸ªå­—æ®µå¸¸é‡

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾ 1392/4772 (çº¦29%),æ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚è¿™äº›ä¿®å¤åº”è¯¥èƒ½è§£å†³ EventContext é‡å¤å®šä¹‰å’Œ InternedData å­—æ®µç¼ºå¤±çš„é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœ!ğŸš€

âœ» Churned for 2m 7s

â¯ [1278/4772] CXX obj/base/base/asan_invalid_access.o
  [1279/4772] CXX obj/base/base/debugger.o
  [1280/4772] CXX obj/base/base/variant_map.o
  [1281/4772] CXX obj/base/base/profiler.o
  [1282/4772] CXX obj/base/base/command_line.o
  [1283/4772] CXX obj/base/base/environment.o
  [1284/4772] CXX obj/base/base/dump_without_crashing.o
  In file included from ../../base/debug/dump_without_crashing.cc:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1285/4772] CXX obj/base/base/block_tests_writing_to_special_dirs.o
  [1286/4772] ACTION
  //net/base/registry_controlled_domains:registry_controlled_domains(//build/toolchain/android:android_clang_arm64)
  [1287/4772] CXX obj/base/base/task_trace.o
  In file included from ../../base/debug/task_trace.cc:12:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1288/4772] CXX obj/base/base/file_tracing.o
  In file included from ../../base/files/file_tracing.cc:10:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1289/4772] CXX obj/base/base/file.o
  In file included from ../../base/files/file.cc:16:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1290/4772] CXX obj/base/base/safe_base_name.o
  [1291/4772] CXX obj/base/base/memory_mapped_file.o
  [1292/4772] CXX obj/base/base/callback_helpers.o
  [1293/4772] CXX obj/base/base/file_path.o
  In file included from ../../base/files/file_path.cc:25:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1294/4772] CXX obj/base/base/scoped_file.o
  [1295/4772] CXX obj/base/base/callback_internal.o
  [1296/4772] CXX obj/base/base/features.o
  In file included from ../../base/features.cc:12:
  In file included from ../../base/task/sequence_manager/sequence_manager_impl.h:45:
  In file included from ../../base/task/sequence_manager/thread_controller.h:32:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1297/4772] CXX obj/base/base/feature_list.o
  [1298/4772] CXX obj/base/base/legacy_hash.o
  [1299/4772] CXX obj/base/base/hash.o
  [1300/4772] CXX obj/base/base/concurrent_closures.o
  [1301/4772] CXX obj/base/base/json_string_value_serializer.o
  [1302/4772] CXX obj/base/base/json_value_converter.o
  [1303/4772] CXX obj/base/base/json_reader.o
  [1304/4772] CXX obj/base/base/string_escape.o
  [1305/4772] CXX obj/base/base/lazy_instance_helpers.o
  [1306/4772] CXX obj/base/base/values_util.o
  [1307/4772] CXX obj/base/base/json_writer.o
  [1308/4772] CXX obj/base/base/json_parser.o
  [1309/4772] CXX obj/base/base/linux_util.o
  [1310/4772] CXX obj/base/base/aligned_memory.o
  [1311/4772] CXX obj/base/base/location.o
  In file included from ../../base/location.cc:12:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1312/4772] CXX obj/base/base/platform_shared_memory_handle.o
  [1313/4772] CXX obj/base/base/memory_pressure_monitor.o
  [1314/4772] CXX obj/base/base/post_delayed_memory_reduction_task.o
  [1315/4772] CXX obj/base/base/raw_ptr_asan_hooks.o
  [1316/4772] CXX obj/base/base/raw_ptr_asan_bound_arg_tracker.o
  [1317/4772] CXX obj/base/base/memory_pressure_listener.o
  FAILED: obj/base/base/memory_pressure_listener.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/memory_pressure_listener.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener.cc:16:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener.cc:17:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener.cc:186:27: error: no member named 'event' in 'perfetto::EventContext'
  186 |         auto* event = ctx.event<perfetto::protos::pbzero::ChromeTrackEvent>();
  |                       ~~~ ^
  ../../base/memory/memory_pressure_listener.cc:186:75: error: expected '(' for function-style cast or type
  construction
  186 |         auto* event = ctx.event<perfetto::protos::pbzero::ChromeTrackEvent>();
  |                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
  ../../base/memory/memory_pressure_listener.cc:186:77: error: expected expression
  186 |         auto* event = ctx.event<perfetto::protos::pbzero::ChromeTrackEvent>();
  |                                                                             ^
  ../../base/memory/memory_pressure_listener.cc:183:3: error: use of undeclared identifier 'TRACE_EVENT'
  183 |   TRACE_EVENT(
  |   ^~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:17:
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:260:27: error: cannot
  initialize a parameter of type 'perfetto::protos::pbzero::InternedData *' with an rvalue of type 'pointer' (aka
  'perfetto::protozero::HeapBuffered<perfetto::protos::pbzero::InternedData> *')
  260 |     InternedDataType::Add(incremental_state->serialized_interned_data.get(),
  |                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:241:12: note: in
  instantiation of function template specialization
  'perfetto::TrackEventInternedDataIndex<base::trace_event::InternedSourceLocation, 4,
  base::trace_event::TraceSourceLocation>::Get<>' requested here
  241 |     return Get(ctx->incremental_state_, value, std::forward<Args>(add_args)...);
  |            ^
  ../../base/trace_event/interned_args_helper.h:114:31: note: in instantiation of function template specialization
  'perfetto::TrackEventInternedDataIndex<base::trace_event::InternedSourceLocation, 4,
  base::trace_event::TraceSourceLocation>::Get<>' requested here
  114 |         TraceSourceLocation>::Get(ctx, TraceSourceLocation(location));
  |                               ^
  ../../base/trace_event/interned_args_helper.h:103:59: note: passing argument to parameter 'interned_data' here
  103 |   static void Add(perfetto::protos::pbzero::InternedData* interned_data,
  |                                                           ^
  3 warnings and 7 errors generated.
  [1318/4772] CXX obj/base/base/platform_shared_memory_region.o
  [1319/4772] CXX obj/base/base/raw_ptr_asan_service.o
  [1320/4772] CXX obj/base/base/logging.o
  FAILED: obj/base/base/logging.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/logging.o.d -DBASE_IMPLEMENTATION
  -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES
  -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_
  In file included from ../../base/logging.cc:48:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/logging.cc:52:
  In file included from ../../base/trace_event/typed_macros.h:15:
  ../../third_party/perfetto/include/perfetto/tracing/event_context.h:26:7: error: redefinition of 'EventContext'
  26 | class EventContext {
  |       ^
  ../../third_party/perfetto/include/perfetto/tracing/traced_value.h:45:7: note: previous definition is here
  45 | class EventContext {
  |       ^
  In file included from ../../base/logging.cc:52:
  In file included from ../../base/trace_event/typed_macros.h:16:
  ../../third_party/perfetto/include/perfetto/tracing/string_helpers.h:20:10: fatal error: 'perfetto/base/export.h'
  file not found
  20 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 2 errors generated.
  [1321/4772] CXX obj/base/base/memory_pressure_listener_registry.o
  FAILED: obj/base/base/memory_pressure_listener_registry.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF
  obj/base/base/memory_pressure_listener_registry.o.d -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL
  -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES -D_GNU_SOURCE
  -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib -I../../third_p
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:13:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:14:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener_registry.cc:49:27: error: no member named 'event' in
  'perfetto::EventContext'
  49 |         auto* event = ctx.event<perfetto::protos::pbzero::ChromeTrackEvent>();
  |                       ~~~ ^
  ../../base/memory/memory_pressure_listener_registry.cc:49:75: error: expected '(' for function-style cast or type
  construction
  49 |         auto* event = ctx.event<perfetto::protos::pbzero::ChromeTrackEvent>();
  |                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
  ../../base/memory/memory_pressure_listener_registry.cc:49:77: error: expected expression
  49 |         auto* event = ctx.event<perfetto::protos::pbzero::ChromeTrackEvent>();
  |                                                                             ^
  ../../base/memory/memory_pressure_listener_registry.cc:45:3: error: use of undeclared identifier
  'TRACE_EVENT_INSTANT'
  45 |   TRACE_EVENT_INSTANT(
  |   ^~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:17:
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:260:27: error: cannot
  initialize a parameter of type 'perfetto::protos::pbzero::InternedData *' with an rvalue of type 'pointer' (aka
  'perfetto::protozero::HeapBuffered<perfetto::protos::pbzero::InternedData> *')
  260 |     InternedDataType::Add(incremental_state->serialized_interned_data.get(),
  |                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:241:12: note: in
  instantiation of function template specialization
  'perfetto::TrackEventInternedDataIndex<base::trace_event::InternedSourceLocation, 4,
  base::trace_event::TraceSourceLocation>::Get<>' requested here
  241 |     return Get(ctx->incremental_state_, value, std::forward<Args>(add_args)...);
  |            ^
  ../../base/trace_event/interned_args_helper.h:114:31: note: in instantiation of function template specialization
  'perfetto::TrackEventInternedDataIndex<base::trace_event::InternedSourceLocation, 4,
  base::trace_event::TraceSourceLocation>::Get<>' requested here
  114 |         TraceSourceLocation>::Get(ctx, TraceSourceLocation(location));
  |                               ^
  ../../base/trace_event/interned_args_helper.h:103:59: note: passing argument to parameter 'interned_data' here
  103 |   static void Add(perfetto::protos::pbzero::InternedData* interned_data,
  |                                                           ^
  3 warnings and 7 errors generated.
  [1322/4772] CXX obj/base/base/read_only_shared_memory_region.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— æˆ‘çœ‹åˆ°äº†æ–°çš„é”™è¯¯ã€‚ä¸»è¦é—®é¢˜æœ‰ï¼š 1. event_context.h åˆå‡ºç°äº†é‡å¤å®šä¹‰ - è¿™ä¸ªæ–‡ä»¶è¿˜å­˜åœ¨å¹¶ä¸”ä¸ traced_value.h å†²çª 2. EventContext ç¼ºå°‘ event() æ–¹æ³• 3. HeapBuffered ç±»å‹ä¸åŒ¹é… - serialized_interned_data.get() è¿”å›çš„ç±»å‹ä¸å¯¹ 4. ç¼ºå°‘å…¶ä»– Perfetto å¤´æ–‡ä»¶ è®©æˆ‘å…ˆåˆ é™¤ event_context.h æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åœ¨ traced_value.h ä¸­å®šä¹‰äº† EventContextï¼š

â— Bash(rm "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/tracing/event_context.h")
  â¿ Â (No content)

â— ç°åœ¨éœ€è¦æ›´æ–° traced_value.h ä¸­çš„ EventContextï¼Œæ·»åŠ  event() æ–¹æ³•å’Œå…¶ä»–å¿…è¦çš„æˆå‘˜ï¼š

â— Read(src\third_party\perfetto\include\perfetto\tracing\traced_value.h)
  â¿ Â Read 59 lines

â— æˆ‘éœ€è¦æ·»åŠ  event() æ–¹æ³•ã€‚è®©æˆ‘å…ˆæ£€æŸ¥ä¸€ä¸‹éœ€è¦ä»€ä¹ˆç±»å‹ï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\traced_value.h)
  â¿ Â Added 10 lines
      41   struct TrackEventIncrementalState;
      42   }
      43
      44 + namespace protos {
      45 + namespace pbzero {
      46 + class ChromeTrackEvent;
      47 + }
      48 + }
      49 +
      50   // Stub EventContext class
      51   class EventContext {
      52    public:
      53     EventContext() = default;
      54     ~EventContext() = default;
      55
      56 +   // Template method to get event
      57 +   template <typename T>
      58 +   T* event() { return nullptr; }
      59 +
      60     internal::TrackEventIncrementalState* incremental_state_ = nullptr;
      61   };
      62

â— ç°åœ¨éœ€è¦ä¿®å¤ HeapBuffered çš„é—®é¢˜ã€‚é—®é¢˜æ˜¯ serialized_interned_data.get() è¿”å›çš„æ˜¯ HeapBuffered<InternedData>*ï¼Œä½†éœ€è¦çš„æ˜¯ InternedData*ã€‚æˆ‘éœ€è¦æ›´æ–° HeapBuffered çš„å®šä¹‰ï¼š

â— Read(src\third_party\perfetto\include\perfetto\protozero\scattered_heap_buffer.h)
  â¿ Â Read 33 lines

â— HeapBuffered çš„å®šä¹‰çœ‹èµ·æ¥æ˜¯å¯¹çš„ï¼Œget() è¿”å› T*ã€‚é—®é¢˜å¯èƒ½æ˜¯åœ¨ TrackEventIncrementalState ä¸­ serialized_interned_data çš„ç±»å‹å®šä¹‰ã€‚è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹ï¼š

â— Read(src\third_party\perfetto\include\perfetto\tracing\track_event_interned_data_index.h)
  â¿ Â Read 30 lines

â— æˆ‘çœ‹åˆ°é—®é¢˜äº†ã€‚serialized_interned_data æ˜¯ std::unique_ptr<HeapBuffered<InternedData>>ï¼Œæ‰€ä»¥ serialized_interned_data.get() è¿”å› HeapBuffered<InternedData>*ï¼Œè€Œä¸æ˜¯ InternedData*ã€‚æˆ‘éœ€è¦ä½¿ç”¨ serialized_interned_data->get() æˆ– serialized_interned_data.get()->get()ã€‚ è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹è°ƒç”¨çš„åœ°æ–¹ï¼š

â— Read(src\third_party\perfetto\include\perfetto\tracing\track_event_interned_data_index.h)
  â¿ Â Read 20 lines

â— é—®é¢˜åœ¨ç¬¬260è¡Œã€‚serialized_interned_data.get() è¿”å› HeapBuffered<InternedData>*ï¼Œä½† InternedDataType::Add() æœŸæœ› InternedData*ã€‚æˆ‘éœ€è¦ä¿®æ”¹è¿™ä¸€è¡Œï¼Œä½¿ç”¨ ->get() æ¥è·å–å†…éƒ¨çš„ InternedData*ï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\track_event_interned_data_index.h)
  â¿ Â Added 1 line, removed 1 line
      257       // the heap buffered message (which is committed to the trace when the
      258       // packet ends).
      259       PERFETTO_DCHECK(iid);
      260 -    InternedDataType::Add(incremental_state->serialized_interned_data.get(),
      260 +    InternedDataType::Add(incremental_state->serialized_interned_data->get(),
      261                             iid, std::move(value),
      262                             std::forward<Args>(add_args)...);
      263       return iid;

â— ç°åœ¨æäº¤å¹¶æ¨é€è¿™äº›ä¿®å¤ï¼š

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ EventContext å’Œ HeapBuffered ç›¸å…³é—®é¢˜â€¦)
  â¿ Â [master d266658f] ä¿®å¤ EventContext å’Œ HeapBuffered ç›¸å…³é—®é¢˜
      3 files changed, 11 insertions(+), 38 deletions(-)
      delete mode 100644 src/third_party/perfetto/include/perfetto/tracing/event_context.h

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        86882db5..d266658f  master -> master

â— å®Œç¾ï¼è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤ï¼š

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ä»æœ€æ–°çš„ç¼–è¯‘é”™è¯¯ä¸­ï¼Œæˆ‘å‘ç°äº†å‡ ä¸ªå…³é”®é—®é¢˜ï¼š

  1. event_context.h é‡å¤å®šä¹‰
    - å­˜åœ¨ç‹¬ç«‹çš„ event_context.h æ–‡ä»¶
    - ä¸ traced_value.h ä¸­çš„ EventContext å®šä¹‰å†²çª
    - å¯¼è‡´ redefinition of 'EventContext' é”™è¯¯
  2. EventContext ç¼ºå°‘ event() æ–¹æ³•
    - ä»£ç ä¸­ä½¿ç”¨ ctx.event<ChromeTrackEvent>()
    - ä½† EventContext æ²¡æœ‰è¿™ä¸ªæ¨¡æ¿æ–¹æ³•
  3. HeapBuffered æŒ‡é’ˆè®¿é—®é”™è¯¯
    - serialized_interned_data æ˜¯ std::unique_ptr<HeapBuffered<InternedData>>
    - .get() è¿”å› HeapBuffered<InternedData>*
    - éœ€è¦å†è°ƒç”¨ ->get() æ‰èƒ½å¾—åˆ° InternedData*

  è§£å†³æ–¹æ¡ˆ

  1. åˆ é™¤é‡å¤æ–‡ä»¶
    - åˆ é™¤ event_context.h æ–‡ä»¶
    - ç»Ÿä¸€ä½¿ç”¨ traced_value.h ä¸­çš„ EventContext å®šä¹‰
  2. æ·»åŠ  event() æ¨¡æ¿æ–¹æ³•
  template <typename T>
  T* event() { return nullptr; }
    - è¿”å› nullptr ä½œä¸º stub å®ç°
  3. ä¿®å¤æŒ‡é’ˆè®¿é—®
  // ä¿®æ”¹å‰
  incremental_state->serialized_interned_data.get()

  // ä¿®æ”¹å
  incremental_state->serialized_interned_data->get()
    - ç¬¬ä¸€ä¸ª -> è§£å¼•ç”¨ unique_ptrï¼Œå¾—åˆ° HeapBuffered*
    - ç¬¬äºŒä¸ª ->get() è°ƒç”¨ HeapBuffered çš„ get() æ–¹æ³•ï¼Œå¾—åˆ° InternedData*
  4. æ·»åŠ å‰å‘å£°æ˜
    - æ·»åŠ  ChromeTrackEvent çš„å‰å‘å£°æ˜
    - ç¡®ä¿æ¨¡æ¿æ–¹æ³•å¯ä»¥ç¼–è¯‘

  ä¿®æ”¹çš„æ–‡ä»¶

  1. åˆ é™¤: src/third_party/perfetto/include/perfetto/tracing/event_context.h
  2. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/tracing/traced_value.h
    - æ·»åŠ  event() æ¨¡æ¿æ–¹æ³•
    - æ·»åŠ  ChromeTrackEvent å‰å‘å£°æ˜
  3. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h
    - ä¿®å¤ HeapBuffered æŒ‡é’ˆè®¿é—®

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾ 1317/4772 (çº¦27.6%)ï¼Œæ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚è¿™äº›ä¿®å¤åº”è¯¥èƒ½è§£å†³ EventContext å’Œ HeapBuffered ç›¸å…³çš„æ‰€æœ‰é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœï¼ğŸš€

âœ» Worked for 1m 38s

â¯ [1286/4772] CXX obj/base/base/linked_list.o
  [1287/4772] CXX obj/base/base/check_op.o
  [1288/4772] CXX obj/base/base/asan_service.o
  [1289/4772] CXX obj/base/base/alias.o
  [1290/4772] CXX obj/base/base/asan_invalid_access.o
  [1291/4772] CXX obj/base/base/debugger.o
  [1292/4772] CXX obj/base/base/variant_map.o
  [1293/4772] CXX obj/base/base/command_line.o
  [1294/4772] CXX obj/base/base/profiler.o
  [1295/4772] CXX obj/base/base/dump_without_crashing.o
  In file included from ../../base/debug/dump_without_crashing.cc:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1296/4772] ACTION
  //net/base/registry_controlled_domains:registry_controlled_domains(//build/toolchain/android:android_clang_arm64)
  [1297/4772] CXX obj/base/base/environment.o
  [1298/4772] CXX obj/base/base/block_tests_writing_to_special_dirs.o
  [1299/4772] CXX obj/base/base/file_tracing.o
  In file included from ../../base/files/file_tracing.cc:10:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1300/4772] CXX obj/base/base/task_trace.o
  In file included from ../../base/debug/task_trace.cc:12:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1301/4772] CXX obj/base/base/safe_base_name.o
  [1302/4772] CXX obj/base/base/file.o
  In file included from ../../base/files/file.cc:16:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1303/4772] CXX obj/base/base/callback_helpers.o
  [1304/4772] CXX obj/base/base/file_path.o
  In file included from ../../base/files/file_path.cc:25:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1305/4772] CXX obj/base/base/memory_mapped_file.o
  [1306/4772] CXX obj/base/base/scoped_file.o
  [1307/4772] CXX obj/base/base/feature_list.o
  [1308/4772] CXX obj/base/base/callback_internal.o
  [1309/4772] CXX obj/base/base/features.o
  In file included from ../../base/features.cc:12:
  In file included from ../../base/task/sequence_manager/sequence_manager_impl.h:45:
  In file included from ../../base/task/sequence_manager/thread_controller.h:32:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1310/4772] CXX obj/base/base/legacy_hash.o
  [1311/4772] CXX obj/base/base/hash.o
  [1312/4772] CXX obj/base/base/concurrent_closures.o
  [1313/4772] CXX obj/base/base/json_string_value_serializer.o
  [1314/4772] CXX obj/base/base/json_value_converter.o
  [1315/4772] CXX obj/base/base/json_reader.o
  [1316/4772] CXX obj/base/base/string_escape.o
  [1317/4772] CXX obj/base/base/values_util.o
  [1318/4772] CXX obj/base/base/lazy_instance_helpers.o
  [1319/4772] CXX obj/base/base/json_writer.o
  [1320/4772] CXX obj/base/base/json_parser.o
  [1321/4772] CXX obj/base/base/location.o
  In file included from ../../base/location.cc:12:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1322/4772] CXX obj/base/base/aligned_memory.o
  [1323/4772] CXX obj/base/base/linux_util.o
  [1324/4772] CXX obj/base/base/platform_shared_memory_handle.o
  [1325/4772] CXX obj/base/base/logging.o
  FAILED: obj/base/base/logging.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/logging.o.d -DBASE_IMPLEMENTATION
  -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES
  -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_
  In file included from ../../base/logging.cc:48:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/logging.cc:48:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:25:
  In file included from ../../base/trace_event/trace_arguments.h:26:
  ../../third_party/perfetto/include/perfetto/protozero/scattered_heap_buffer.h:23:5: error: field has incomplete
  type 'perfetto::protos::pbzero::InternedData'
  23 |   T message_;
  |     ^
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:260:70: note: in
  instantiation of template class 'perfetto::protozero::HeapBuffered<perfetto::protos::pbzero::InternedData>'
  requested here
  260 |     InternedDataType::Add(incremental_state->serialized_interned_data->get(),
  |                                                                      ^
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:54:7: note: forward
  declaration of 'perfetto::protos::pbzero::InternedData'
  54 | class InternedData;
  |       ^
  In file included from ../../base/logging.cc:52:
  ../../base/trace_event/typed_macros.h:15:10: fatal error:
  'third_party/perfetto/include/perfetto/tracing/event_context.h' file not found
  15 | #include "third_party/perfetto/include/perfetto/tracing/event_context.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 2 errors generated.
  [1326/4772] CXX obj/base/base/memory_pressure_monitor.o
  [1327/4772] CXX obj/base/base/post_delayed_memory_reduction_task.o
  [1328/4772] CXX obj/base/base/platform_shared_memory_region.o
  [1329/4772] CXX obj/base/base/memory_pressure_listener.o
  FAILED: obj/base/base/memory_pressure_listener.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/memory_pressure_listener.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:25:
  In file included from ../../base/trace_event/trace_arguments.h:26:
  ../../third_party/perfetto/include/perfetto/protozero/scattered_heap_buffer.h:23:5: error: field has incomplete
  type 'perfetto::protos::pbzero::InternedData'
  23 |   T message_;
  |     ^
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:260:70: note: in
  instantiation of template class 'perfetto::protozero::HeapBuffered<perfetto::protos::pbzero::InternedData>'
  requested here
  260 |     InternedDataType::Add(incremental_state->serialized_interned_data->get(),
  |                                                                      ^
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:54:7: note: forward
  declaration of 'perfetto::protos::pbzero::InternedData'
  54 | class InternedData;
  |       ^
  In file included from ../../base/memory/memory_pressure_listener.cc:16:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener.cc:17:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener.cc:187:29: error: no member named
  'set_chrome_memory_pressure_notification' in 'perfetto::protos::pbzero::ChromeTrackEvent'
  187 |         auto* data = event->set_chrome_memory_pressure_notification();
  |                      ~~~~~  ^
  ../../base/memory/memory_pressure_listener.cc:183:3: error: use of undeclared identifier 'TRACE_EVENT'
  183 |   TRACE_EVENT(
  |   ^~~~~~~~~~~
  3 warnings and 5 errors generated.
  [1330/4772] CXX obj/base/base/memory_pressure_listener_registry.o
  FAILED: obj/base/base/memory_pressure_listener_registry.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF
  obj/base/base/memory_pressure_listener_registry.o.d -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL
  -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES -D_GNU_SOURCE
  -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib -I../../third_p
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:25:
  In file included from ../../base/trace_event/trace_arguments.h:26:
  ../../third_party/perfetto/include/perfetto/protozero/scattered_heap_buffer.h:23:5: error: field has incomplete
  type 'perfetto::protos::pbzero::InternedData'
  23 |   T message_;
  |     ^
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:260:70: note: in
  instantiation of template class 'perfetto::protozero::HeapBuffered<perfetto::protos::pbzero::InternedData>'
  requested here
  260 |     InternedDataType::Add(incremental_state->serialized_interned_data->get(),
  |                                                                      ^
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:54:7: note: forward
  declaration of 'perfetto::protos::pbzero::InternedData'
  54 | class InternedData;
  |       ^
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:13:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:14:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener_registry.cc:50:29: error: no member named
  'set_chrome_memory_pressure_notification' in 'perfetto::protos::pbzero::ChromeTrackEvent'
  50 |         auto* data = event->set_chrome_memory_pressure_notification();
  |                      ~~~~~  ^
  ../../base/memory/memory_pressure_listener_registry.cc:45:3: error: use of undeclared identifier
  'TRACE_EVENT_INSTANT'
  45 |   TRACE_EVENT_INSTANT(
  |   ^~~~~~~~~~~~~~~~~~~
  3 warnings and 5 errors generated.
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— æˆ‘çœ‹åˆ°äº†æ–°çš„é”™è¯¯ã€‚ä¸»è¦é—®é¢˜æœ‰ï¼š 1. InternedData ç±»å‹ä¸å®Œæ•´ - å‰å‘å£°æ˜ä¸å¤Ÿï¼ŒHeapBuffered éœ€è¦å®Œæ•´çš„ç±»å®šä¹‰ 2. event_context.h æ–‡ä»¶è·¯å¾„é—®é¢˜ - typed_macros.h ä½¿ç”¨äº†å®Œæ•´è·¯å¾„ 3. ChromeTrackEvent ç¼ºå°‘æ–¹æ³• è®©æˆ‘å…ˆä¿®å¤ InternedData çš„é—®é¢˜ã€‚éœ€è¦åœ¨ track_event_interned_data_index.h ä¸­åŒ…å«å®Œæ•´çš„å®šä¹‰ï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\track_event_interned_data_index.h)
  â¿ Â Error editing file

â— è®©æˆ‘å…ˆè¯»å–æ–‡ä»¶çœ‹çœ‹å½“å‰çš„ç»“æ„ï¼š

â— Read(src\third_party\perfetto\include\perfetto\tracing\track_event_interned_data_index.h)
  â¿ Â Read 70 lines

â— æˆ‘éœ€è¦åœ¨å‰å‘å£°æ˜ä¹‹å‰åŒ…å«å®Œæ•´çš„ InternedData å®šä¹‰ï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\track_event_interned_data_index.h)
  â¿ Â Added 4 lines, removed 1 line
      48   #define PERFETTO_CHECK(x) do {} while (0)
      49   #endif
      50
      51 + // Include InternedData definition before using it in HeapBuffered
      52 + #include "perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h"
      53 +
      54   namespace perfetto {
      55   namespace protos {
      56   namespace pbzero {
      57 - class InternedData;
      57 + // InternedData is already defined in the included header
      58   }
      59   }
      60   namespace protozero {

â— ç°åœ¨éœ€è¦åˆ›å»º event_context.h æ–‡ä»¶ï¼Œå› ä¸º typed_macros.h éœ€è¦å®ƒï¼š

â— Bash(cat > "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/tracing/event_context.h" << 'EOF'
      // Copyright 2024 Stub implementation for OpenHarmonyâ€¦)
  â¿ Â (No content)

â— ç°åœ¨éœ€è¦æ›´æ–° ChromeTrackEvent çš„å®šä¹‰ï¼Œæ·»åŠ ç¼ºå¤±çš„æ–¹æ³•ã€‚è®©æˆ‘å…ˆåˆ›å»ºè¿™ä¸ªç±»çš„ stubï¼š

â— Bash(cat >
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h" <<
      'EOF'
      // Copyright 2024 Stub implementatiâ€¦)
  â¿ Â Error: Exit code 1
     /usr/bin/bash: line 39:
     F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h: No such
      file or directory

â— éœ€è¦å…ˆåˆ›å»ºç›®å½•ï¼š

â— Bash(mkdir -p "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protos/pbzero")
  â¿ Â (No content)

â— Bash(cat >
      "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h" <<
      'EOF'
      // Copyright 2024 Stub implementatiâ€¦)
  â¿ Â (No content)

â— ç°åœ¨éœ€è¦æ›´æ–° traced_value.h ä¸­çš„ ChromeTrackEvent å‰å‘å£°æ˜ï¼Œæ”¹ä¸ºåŒ…å«å®Œæ•´å®šä¹‰ï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\traced_value.h)
  â¿ Â Added 2 lines, removed 5 lines
      41   struct TrackEventIncrementalState;
      42   }
      43
      44 - namespace protos {
      45 - namespace pbzero {
      46 - class ChromeTrackEvent;
      47 - }
      48 - }
      44 + // Include ChromeTrackEvent definition
      45 + #include "perfetto/protos/pbzero/chrome_track_event.pbzero.h"
      46
      47   // Stub EventContext class
      48   class EventContext {

â— ç°åœ¨æäº¤å¹¶æ¨é€è¿™äº›ä¿®å¤ï¼š

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ InternedData ä¸å®Œæ•´ç±»å‹å’Œ ChromeTrackEvent
      ç¼ºå¤±æ–¹æ³•â€¦)
  â¿ Â [master 9a26053a] ä¿®å¤ InternedData ä¸å®Œæ•´ç±»å‹å’Œ ChromeTrackEvent ç¼ºå¤±æ–¹æ³•
      4 files changed, 54 insertions(+), 6 deletions(-)
      create mode 100644 src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h
      create mode 100644 src/third_party/perfetto/include/perfetto/tracing/event_context.h

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        d266658f..9a26053a  master -> master

â— å®Œç¾ï¼è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤ï¼š

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ä»æœ€æ–°çš„ç¼–è¯‘é”™è¯¯ä¸­ï¼Œæˆ‘å‘ç°äº†å‡ ä¸ªå…³é”®é—®é¢˜ï¼š

  1. InternedData ç±»å‹ä¸å®Œæ•´
    - HeapBuffered<InternedData> éœ€è¦ InternedData çš„å®Œæ•´å®šä¹‰
    - ä»…æœ‰å‰å‘å£°æ˜ä¸å¤Ÿï¼Œå› ä¸º HeapBuffered å†…éƒ¨æœ‰ T message_ æˆå‘˜å˜é‡
    - é”™è¯¯: field has incomplete type 'perfetto::protos::pbzero::InternedData'
  2. event_context.h æ–‡ä»¶ç¼ºå¤±
    - typed_macros.h ä½¿ç”¨å®Œæ•´è·¯å¾„åŒ…å«æ­¤æ–‡ä»¶
    - é”™è¯¯: 'third_party/perfetto/include/perfetto/tracing/event_context.h' file not found
  3. ChromeTrackEvent ç¼ºå°‘æ–¹æ³•
    - ä»£ç è°ƒç”¨ event->set_chrome_memory_pressure_notification()
    - ä½† ChromeTrackEvent åªæœ‰å‰å‘å£°æ˜ï¼Œæ²¡æœ‰å®ç°
    - é”™è¯¯: no member named 'set_chrome_memory_pressure_notification'

  è§£å†³æ–¹æ¡ˆ

  1. åŒ…å« InternedData å®Œæ•´å®šä¹‰
  // åœ¨ track_event_interned_data_index.h ä¸­
  #include "perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h"
    - åœ¨ä½¿ç”¨ HeapBuffered ä¹‹å‰åŒ…å«å®Œæ•´å®šä¹‰
    - ç§»é™¤å‰å‘å£°æ˜ï¼Œå› ä¸ºå·²ç»æœ‰å®Œæ•´å®šä¹‰
  2. åˆ›å»º event_context.h åŒ…è£…æ–‡ä»¶
  // ç®€å•åŒ…å« traced_value.h
  #include "perfetto/tracing/traced_value.h"
    - ä½œä¸º traced_value.h çš„åŒ…è£…
    - é¿å…é‡å¤å®šä¹‰
  3. åˆ›å»º ChromeTrackEvent å®Œæ•´ stub
  class ChromeMemoryPressureNotification {
    void set_level(int32_t) {}
    void set_creation_location_iid(uint64_t) {}
  };

  class ChromeTrackEvent {
    ChromeMemoryPressureNotification* set_chrome_memory_pressure_notification() {
      return &notification_;
    }
  };
    - å®ç°æ‰€æœ‰éœ€è¦çš„æ–¹æ³•
    - è¿”å›æœ‰æ•ˆçš„å¯¹è±¡æŒ‡é’ˆ

  ä¿®æ”¹çš„æ–‡ä»¶

  1. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h
    - åŒ…å« InternedData å®Œæ•´å®šä¹‰
  2. åˆ›å»º: src/third_party/perfetto/include/perfetto/tracing/event_context.h
    - ä½œä¸º traced_value.h çš„åŒ…è£…
  3. åˆ›å»º: src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h
    - ChromeTrackEvent å’Œ ChromeMemoryPressureNotification çš„å®Œæ•´å®ç°
  4. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/tracing/traced_value.h
    - åŒ…å« ChromeTrackEvent å®Œæ•´å®šä¹‰è€Œä¸æ˜¯å‰å‘å£°æ˜

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾ 1325/4772 (çº¦27.8%)ï¼Œæ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚è¿™äº›ä¿®å¤åº”è¯¥èƒ½è§£å†³æ‰€æœ‰ä¸ InternedData å’Œ ChromeTrackEvent ç›¸å…³çš„é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœï¼ğŸš€

âœ» Baked for 1m 43s

â¯ [1283/4772] CXX obj/base/base/alias.o
  [1284/4772] CXX obj/base/base/asan_invalid_access.o
  [1285/4772] CXX obj/base/base/debugger.o
  [1286/4772] ACTION
  //net/base/registry_controlled_domains:registry_controlled_domains(//build/toolchain/android:android_clang_arm64)
  [1287/4772] CXX obj/base/base/profiler.o
  [1288/4772] CXX obj/base/base/variant_map.o
  [1289/4772] CXX obj/base/base/dump_without_crashing.o
  FAILED: obj/base/base/dump_without_crashing.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/dump_without_crashing.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_fea
  In file included from ../../base/debug/dump_without_crashing.cc:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/debug/dump_without_crashing.cc:15:
  In file included from ../../base/trace_event/trace_event.h:25:
  In file included from ../../base/trace_event/trace_arguments.h:27:
  ../../third_party/perfetto/include/perfetto/tracing/traced_value.h:45:10: fatal error:
  'perfetto/protos/pbzero/chrome_track_event.pbzero.h' file not found
  45 | #include "perfetto/protos/pbzero/chrome_track_event.pbzero.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1290/4772] CXX obj/base/base/environment.o
  [1291/4772] CXX obj/base/base/command_line.o
  [1292/4772] CXX obj/base/base/task_trace.o
  FAILED: obj/base/base/task_trace.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/task_trace.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/n
  In file included from ../../base/debug/task_trace.cc:12:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/debug/task_trace.cc:12:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:25:
  In file included from ../../base/trace_event/trace_arguments.h:27:
  ../../third_party/perfetto/include/perfetto/tracing/traced_value.h:45:10: fatal error:
  'perfetto/protos/pbzero/chrome_track_event.pbzero.h' file not found
  45 | #include "perfetto/protos/pbzero/chrome_track_event.pbzero.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1293/4772] CXX obj/base/base/features.o
  FAILED: obj/base/base/features.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/features.o.d -DBASE_IMPLEMENTATION
  -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES
  -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk
  In file included from ../../base/features.cc:12:
  In file included from ../../base/task/sequence_manager/sequence_manager_impl.h:45:
  In file included from ../../base/task/sequence_manager/thread_controller.h:32:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/features.cc:12:
  In file included from ../../base/task/sequence_manager/sequence_manager_impl.h:45:
  In file included from ../../base/task/sequence_manager/thread_controller.h:32:
  In file included from ../../base/trace_event/trace_event.h:25:
  In file included from ../../base/trace_event/trace_arguments.h:27:
  ../../third_party/perfetto/include/perfetto/tracing/traced_value.h:45:10: fatal error:
  'perfetto/protos/pbzero/chrome_track_event.pbzero.h' file not found
  45 | #include "perfetto/protos/pbzero/chrome_track_event.pbzero.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1294/4772] CXX obj/base/base/feature_list.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— é—®é¢˜æ˜¯åŒ…å«è·¯å¾„ä¸å¯¹ã€‚æ–‡ä»¶åœ¨ src/third_party/perfetto/include/perfetto/protos/pbzero/ï¼Œä½†åŒ…å«è¯­å¥ä½¿ç”¨çš„æ˜¯ perfetto/protos/pbzero/ã€‚è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹æ–‡ä»¶ä½ç½®ï¼š

â— Bash(ls -la "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protos/pbzero/" 2>&1 | head -10)
  â¿ Â total 4
     drwxr-xr-x 1 hotyi 197121   0  1æœˆ  8 11:16 .
     drwxr-xr-x 1 hotyi 197121   0  1æœˆ  8 11:16 ..
     -rw-r--r-- 1 hotyi 197121 932  1æœˆ  8 11:16 chrome_track_event.pbzero.h

â— æ–‡ä»¶å­˜åœ¨ã€‚é—®é¢˜æ˜¯åŒ…å«è·¯å¾„ã€‚åœ¨ Chromium çš„æ„å»ºç³»ç»Ÿä¸­ï¼ŒåŒ…å«è·¯å¾„çš„æ ¹ç›®å½•æ˜¯ src/ï¼Œæ‰€ä»¥åº”è¯¥ä½¿ç”¨ç›¸å¯¹äº src/third_party/perfetto/include/ çš„è·¯å¾„ã€‚è®©æˆ‘ä¿®æ”¹ traced_value.hï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\traced_value.h)
  â¿ Â Added 7 lines, removed 2 lines
      41   struct TrackEventIncrementalState;
      42   }
      43
      44 - // Include ChromeTrackEvent definition
      45 - #include "perfetto/protos/pbzero/chrome_track_event.pbzero.h"
      44 + // Forward declare ChromeTrackEvent to avoid include issues
      45 + namespace protos {
      46 + namespace pbzero {
      47 + class ChromeTrackEvent;
      48 + class ChromeMemoryPressureNotification;
      49 + }
      50 + }
      51
      52   // Stub EventContext class
      53   class EventContext {

â— ç°åœ¨æˆ‘éœ€è¦åœ¨å®é™…éœ€è¦ ChromeTrackEvent å®Œæ•´å®šä¹‰çš„åœ°æ–¹åŒ…å«å®ƒã€‚è®©æˆ‘æ£€æŸ¥å“ªé‡Œéœ€è¦ï¼š

â— Bash(grep -r "set_chrome_memory_pressure_notification" "F:/code/naiveproxy-ohos/src/base/" 2>/dev/null | head -5)
  â¿ F:/code/naiveproxy-ohos/src/base/memory/memory_pressure_listener.cc:        auto* data = event->set_chrome_memo
    ry_pressure_notification();
    F:/code/naiveproxy-ohos/src/base/memory/memory_pressure_listener_registry.cc:        auto* data = event->set_ch
    rome_memory_pressure_notification();



â— è¿™äº›æ–‡ä»¶éœ€è¦å®Œæ•´çš„å®šä¹‰ã€‚è®©æˆ‘åœ¨è¿™äº›æ–‡ä»¶ä¸­æ·»åŠ åŒ…å«ã€‚ä½†é¦–å…ˆï¼Œè®©æˆ‘åˆ›å»ºä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ¡ˆ - åœ¨ event_context.h ä¸­åŒ…å« ChromeTrackEventï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\event_context.h)
  â¿ Â File must be read first

â— Read(src\third_party\perfetto\include\perfetto\tracing\event_context.h)
  â¿ Â Read 12 lines

â— Update(src\third_party\perfetto\include\perfetto\tracing\event_context.h)
  â¿ Â Added 3 lines
       8   // Just include traced_value.h which has the real EventContext definition
       9   #include "perfetto/tracing/traced_value.h"
      10
      11 + // Include ChromeTrackEvent for code that needs it
      12 + #include "perfetto/protos/pbzero/chrome_track_event.pbzero.h"
      13 +
      14   #endif  // INCLUDE_PERFETTO_TRACING_EVENT_CONTEXT_H_

â— ç°åœ¨æäº¤å¹¶æ¨é€ï¼š

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ ChromeTrackEvent åŒ…å«è·¯å¾„é—®é¢˜â€¦)
  â¿ Â [master 546d4ed3] ä¿®å¤ ChromeTrackEvent åŒ…å«è·¯å¾„é—®é¢˜
      2 files changed, 10 insertions(+), 2 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        9a26053a..546d4ed3  master -> master

â— å®Œç¾ï¼è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤ï¼š

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ç¼–è¯‘å™¨æŠ¥å‘Šæ‰¾ä¸åˆ° perfetto/protos/pbzero/chrome_track_event.pbzero.hï¼š
  fatal error: 'perfetto/protos/pbzero/chrome_track_event.pbzero.h' file not found

  è¿™æ˜¯å› ä¸ºåœ¨ traced_value.h ä¸­ç›´æ¥åŒ…å«äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½†åŒ…å«è·¯å¾„æœ‰é—®é¢˜ã€‚

  æ ¹æœ¬åŸå› 

  åœ¨ Chromium çš„æ„å»ºç³»ç»Ÿä¸­ï¼š
  - åŒ…å«è·¯å¾„çš„æ ¹ç›®å½•æ˜¯ src/third_party/perfetto/include/
  - æ‰€ä»¥ #include "perfetto/protos/pbzero/..." ä¼šæŸ¥æ‰¾ src/third_party/perfetto/include/perfetto/protos/pbzero/...
  - æ–‡ä»¶ç¡®å®åœ¨è¿™ä¸ªä½ç½®ï¼Œä½†åœ¨æŸäº›ç¼–è¯‘å•å…ƒä¸­åŒ…å«è·¯å¾„å¯èƒ½ä¸æ­£ç¡®

  è§£å†³æ–¹æ¡ˆ

  é‡‡ç”¨åˆ†å±‚åŒ…å«ç­–ç•¥ï¼š

  1. traced_value.h - åªä½¿ç”¨å‰å‘å£°æ˜
  namespace protos {
  namespace pbzero {
  class ChromeTrackEvent;
  class ChromeMemoryPressureNotification;
  }
  }
    - é¿å…åœ¨åŸºç¡€å¤´æ–‡ä»¶ä¸­åŒ…å«å¤æ‚çš„ä¾èµ–
    - å‰å‘å£°æ˜è¶³å¤Ÿç”¨äºæŒ‡é’ˆå’Œå¼•ç”¨
  2. event_context.h - åŒ…å«å®Œæ•´å®šä¹‰
  #include "perfetto/tracing/traced_value.h"
  #include "perfetto/protos/pbzero/chrome_track_event.pbzero.h"
    - è¿™ä¸ªæ–‡ä»¶è¢«éœ€è¦å®Œæ•´å®šä¹‰çš„ä»£ç åŒ…å«
    - æä¾› ChromeTrackEvent çš„å®Œæ•´å®ç°

  ä¸ºä»€ä¹ˆè¿™æ ·æœ‰æ•ˆï¼Ÿ

  1. é¿å…å¾ªç¯ä¾èµ–
    - traced_value.h æ˜¯åŸºç¡€å¤´æ–‡ä»¶ï¼Œè¢«å¾ˆå¤šåœ°æ–¹åŒ…å«
    - ä¸åº”è¯¥åŒ…å«å¤æ‚çš„ä¾èµ–
  2. æŒ‰éœ€åŒ…å«
    - åªæœ‰çœŸæ­£éœ€è¦ ChromeTrackEvent æ–¹æ³•çš„ä»£ç æ‰ä¼šåŒ…å« event_context.h
    - å…¶ä»–ä»£ç åªéœ€è¦å‰å‘å£°æ˜
  3. åŒ…å«é¡ºåº
    - event_context.h å…ˆåŒ…å« traced_value.hï¼ˆè·å– EventContextï¼‰
    - ç„¶ååŒ…å« chrome_track_event.pbzero.hï¼ˆè·å–å®Œæ•´å®šä¹‰ï¼‰
    - é¿å…äº†åŒ…å«é¡ºåºé—®é¢˜

  ä¿®æ”¹çš„æ–‡ä»¶

  1. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/tracing/traced_value.h
    - ç§»é™¤ ChromeTrackEvent çš„åŒ…å«
    - æ”¹ä¸ºå‰å‘å£°æ˜
  2. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/tracing/event_context.h
    - æ·»åŠ  ChromeTrackEvent çš„åŒ…å«
    - ä¸ºéœ€è¦å®Œæ•´å®šä¹‰çš„ä»£ç æä¾›æ”¯æŒ

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾ 1289/4772 (çº¦27%)ï¼Œæ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚è¿™æ¬¡ä¿®å¤åº”è¯¥èƒ½è§£å†³åŒ…å«è·¯å¾„çš„é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœï¼ğŸš€

âœ» Worked for 1m 25s

â¯ [1283/4772] CXX obj/base/base/check_op.o
  [1284/4772] CXX obj/base/base/asan_service.o
  [1285/4772] CXX obj/base/base/alias.o
  [1286/4772] CXX obj/base/base/asan_invalid_access.o
  [1287/4772] CXX obj/base/base/debugger.o
  [1288/4772] CXX obj/base/base/profiler.o
  [1289/4772] ACTION
  //net/base/registry_controlled_domains:registry_controlled_domains(//build/toolchain/android:android_clang_arm64)
  [1290/4772] CXX obj/base/base/variant_map.o
  [1291/4772] CXX obj/base/base/command_line.o
  [1292/4772] CXX obj/base/base/environment.o
  [1293/4772] CXX obj/base/base/dump_without_crashing.o
  In file included from ../../base/debug/dump_without_crashing.cc:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1294/4772] CXX obj/base/base/block_tests_writing_to_special_dirs.o
  [1295/4772] CXX obj/base/base/file_tracing.o
  In file included from ../../base/files/file_tracing.cc:10:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1296/4772] CXX obj/base/base/task_trace.o
  In file included from ../../base/debug/task_trace.cc:12:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1297/4772] CXX obj/base/base/file.o
  In file included from ../../base/files/file.cc:16:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1298/4772] CXX obj/base/base/safe_base_name.o
  [1299/4772] CXX obj/base/base/callback_helpers.o
  [1300/4772] CXX obj/base/base/scoped_file.o
  [1301/4772] CXX obj/base/base/file_path.o
  In file included from ../../base/files/file_path.cc:25:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1302/4772] CXX obj/base/base/memory_mapped_file.o
  [1303/4772] CXX obj/base/base/features.o
  In file included from ../../base/features.cc:12:
  In file included from ../../base/task/sequence_manager/sequence_manager_impl.h:45:
  In file included from ../../base/task/sequence_manager/thread_controller.h:32:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1304/4772] CXX obj/base/base/callback_internal.o
  [1305/4772] CXX obj/base/base/legacy_hash.o
  [1306/4772] CXX obj/base/base/feature_list.o
  [1307/4772] CXX obj/base/base/hash.o
  [1308/4772] CXX obj/base/base/concurrent_closures.o
  [1309/4772] CXX obj/base/base/json_string_value_serializer.o
  [1310/4772] CXX obj/base/base/json_reader.o
  [1311/4772] CXX obj/base/base/json_value_converter.o
  [1312/4772] CXX obj/base/base/string_escape.o
  [1313/4772] CXX obj/base/base/lazy_instance_helpers.o
  [1314/4772] CXX obj/base/base/json_writer.o
  [1315/4772] CXX obj/base/base/values_util.o
  [1316/4772] CXX obj/base/base/json_parser.o
  [1317/4772] CXX obj/base/base/linux_util.o
  [1318/4772] CXX obj/base/base/location.o
  In file included from ../../base/location.cc:12:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1319/4772] CXX obj/base/base/aligned_memory.o
  [1320/4772] CXX obj/base/base/platform_shared_memory_handle.o
  [1321/4772] CXX obj/base/base/memory_pressure_listener_registry.o
  FAILED: obj/base/base/memory_pressure_listener_registry.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF
  obj/base/base/memory_pressure_listener_registry.o.d -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL
  -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES -D_GNU_SOURCE
  -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib -I../../third_p
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:17:
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:52:10: fatal error:
  'perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h' file not found
  52 | #include "perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1322/4772] CXX obj/base/base/memory_pressure_listener.o
  FAILED: obj/base/base/memory_pressure_listener.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/memory_pressure_listener.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:17:
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:52:10: fatal error:
  'perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h' file not found
  52 | #include "perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1323/4772] CXX obj/base/base/memory_pressure_monitor.o
  [1324/4772] CXX obj/base/base/post_delayed_memory_reduction_task.o
  [1325/4772] CXX obj/base/base/logging.o
  FAILED: obj/base/base/logging.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/logging.o.d -DBASE_IMPLEMENTATION
  -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES
  -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_
  In file included from ../../base/logging.cc:48:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/logging.cc:51:
  In file included from ../../base/trace_event/interned_args_helper.h:17:
  ../../third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h:52:10: fatal error:
  'perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h' file not found
  52 | #include "perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1326/4772] CXX obj/base/base/platform_shared_memory_region.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— åˆæ˜¯åŒ…å«è·¯å¾„é—®é¢˜ã€‚InternedData æ–‡ä»¶åœ¨ src/third_party/perfetto/protos/perfetto/trace/interned_data/ï¼Œä½†åŒ…å«è·¯å¾„åº”è¯¥æ˜¯ç›¸å¯¹äº src/third_party/perfetto/include/ çš„ã€‚è®©æˆ‘æ£€æŸ¥æ–‡ä»¶ä½ç½®ï¼š

â— Bash(find "F:/code/naiveproxy-ohos/src/third_party/perfetto" -name "interned_data.pbzero.h" 2>/dev/null)
  â¿ Â F:/code/naiveproxy-ohos/src/third_party/perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h

â— æ–‡ä»¶åœ¨ src/third_party/perfetto/protos/ ä¸‹ï¼Œä¸åœ¨ include/ ä¸‹ã€‚æˆ‘éœ€è¦ä¿®æ”¹åŒ…å«è·¯å¾„ã€‚è®©æˆ‘æ£€æŸ¥ Chromium çš„åŒ…å«è·¯å¾„è®¾ç½®ã€‚å®é™…ä¸Šï¼Œæˆ‘åº”è¯¥æŠŠæ–‡ä»¶ç§»åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œæˆ–è€…ä½¿ç”¨æ­£ç¡®çš„ç›¸å¯¹è·¯å¾„ã€‚ è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹ track_event_interned_data_index.h çš„åŒ…å«è·¯å¾„ï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\track_event_interned_data_index.h)
  â¿ Â Added 2 lines, removed 1 line
      49   #endif
      50
      51   // Include InternedData definition before using it in HeapBuffered
      52 - #include "perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h"
      52 + // Use relative path from src/third_party/perfetto/include/
      53 + #include "../../../protos/perfetto/trace/interned_data/interned_data.pbzero.h"
      54
      55   namespace perfetto {
      56   namespace protos {

â— ç°åœ¨æäº¤å¹¶æ¨é€ï¼š

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ InternedData åŒ…å«è·¯å¾„â€¦)
  â¿ Â [master 7e4c676b] ä¿®å¤ InternedData åŒ…å«è·¯å¾„
      1 file changed, 2 insertions(+), 1 deletion(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        546d4ed3..7e4c676b  master -> master

â— å®Œç¾ï¼è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤ï¼š

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ç¼–è¯‘å™¨æŠ¥å‘Šæ‰¾ä¸åˆ° InternedData å¤´æ–‡ä»¶ï¼š
  fatal error: 'perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h' file not found

  æ ¹æœ¬åŸå› 

  æ–‡ä»¶è·¯å¾„ç»“æ„é—®é¢˜ï¼š
  - å®é™…æ–‡ä»¶ä½ç½®: src/third_party/perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h
  - åŒ…å«æ–‡ä»¶ä½ç½®: src/third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h
  - é”™è¯¯çš„åŒ…å«: #include "perfetto/protos/perfetto/trace/interned_data/interned_data.pbzero.h"
    - è¿™ä¼šæŸ¥æ‰¾ src/third_party/perfetto/include/perfetto/protos/...ï¼ˆä¸å­˜åœ¨ï¼‰

  è§£å†³æ–¹æ¡ˆ

  ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä» include/ ç›®å½•å‘ä¸Šå¯¼èˆªåˆ° protos/ ç›®å½•ï¼š
  #include "../../../protos/perfetto/trace/interned_data/interned_data.pbzero.h"

  è·¯å¾„è§£æï¼š
  - ä» src/third_party/perfetto/include/perfetto/tracing/
  - ../ â†’ src/third_party/perfetto/include/perfetto/
  - ../../ â†’ src/third_party/perfetto/include/
  - ../../../ â†’ src/third_party/perfetto/
  - ç„¶å protos/perfetto/trace/interned_data/interned_data.pbzero.h

  ä¸ºä»€ä¹ˆè¿™æ ·æœ‰æ•ˆï¼Ÿ

  1. ç›¸å¯¹è·¯å¾„å¯¼èˆª
    - ä»å½“å‰æ–‡ä»¶ä½ç½®å‘ä¸Šå¯¼èˆªåˆ°å…±åŒçš„çˆ¶ç›®å½•
    - ç„¶åå‘ä¸‹å¯¼èˆªåˆ°ç›®æ ‡æ–‡ä»¶
  2. é¿å…ä¾èµ–åŒ…å«è·¯å¾„é…ç½®
    - ä¸ä¾èµ–ç¼–è¯‘å™¨çš„ -I åŒ…å«è·¯å¾„è®¾ç½®
    - ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿçš„ç›¸å¯¹è·¯å¾„
  3. è·¨å¹³å°å…¼å®¹
    - ç›¸å¯¹è·¯å¾„åœ¨æ‰€æœ‰å¹³å°ä¸Šéƒ½èƒ½æ­£ç¡®å·¥ä½œ
    - ä¸å—æ„å»ºç³»ç»Ÿé…ç½®å½±å“

  ä¿®æ”¹çš„æ–‡ä»¶

  ä¿®æ”¹: src/third_party/perfetto/include/perfetto/tracing/track_event_interned_data_index.h
  - å°†åŒ…å«è·¯å¾„ä» perfetto/protos/... æ”¹ä¸º ../../../protos/...

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾ 1321/4772 (çº¦27.7%)ï¼Œæ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚è¿™æ¬¡ä¿®å¤åº”è¯¥èƒ½è§£å†³ InternedData çš„åŒ…å«è·¯å¾„é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœï¼ğŸš€

âœ» Brewed for 57s

â¯ [1355/4772] CXX obj/base/base/variant_map.o
  [1356/4772] CXX obj/base/base/environment.o
  [1357/4772] CXX obj/base/base/command_line.o
  [1358/4772] CXX obj/base/base/dump_without_crashing.o
  In file included from ../../base/debug/dump_without_crashing.cc:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1359/4772] CXX obj/base/base/block_tests_writing_to_special_dirs.o
  [1360/4772] CXX obj/base/base/task_trace.o
  In file included from ../../base/debug/task_trace.cc:12:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1361/4772] CXX obj/base/base/file.o
  In file included from ../../base/files/file.cc:16:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1362/4772] CXX obj/base/base/file_tracing.o
  In file included from ../../base/files/file_tracing.cc:10:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1363/4772] CXX obj/base/base/safe_base_name.o
  [1364/4772] CXX obj/base/base/file_path.o
  In file included from ../../base/files/file_path.cc:25:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1365/4772] CXX obj/base/base/callback_helpers.o
  [1366/4772] CXX obj/base/base/memory_mapped_file.o
  [1367/4772] CXX obj/base/base/scoped_file.o
  [1368/4772] CXX obj/base/base/callback_internal.o
  [1369/4772] CXX obj/base/base/features.o
  In file included from ../../base/features.cc:12:
  In file included from ../../base/task/sequence_manager/sequence_manager_impl.h:45:
  In file included from ../../base/task/sequence_manager/thread_controller.h:32:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1370/4772] CXX obj/base/base/legacy_hash.o
  [1371/4772] CXX obj/base/base/feature_list.o
  [1372/4772] CXX obj/base/base/hash.o
  [1373/4772] CXX obj/base/base/concurrent_closures.o
  [1374/4772] CXX obj/base/base/json_reader.o
  [1375/4772] CXX obj/base/base/json_string_value_serializer.o
  [1376/4772] CXX obj/base/base/json_value_converter.o
  [1377/4772] CXX obj/base/base/lazy_instance_helpers.o
  [1378/4772] CXX obj/base/base/string_escape.o
  [1379/4772] CXX obj/base/base/values_util.o
  [1380/4772] CXX obj/base/base/json_writer.o
  [1381/4772] CXX obj/base/base/json_parser.o
  [1382/4772] CXX obj/base/base/location.o
  In file included from ../../base/location.cc:12:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1383/4772] CXX obj/base/base/aligned_memory.o
  [1384/4772] CXX obj/base/base/platform_shared_memory_handle.o
  [1385/4772] CXX obj/base/base/linux_util.o
  [1386/4772] CXX obj/base/base/logging.o
  FAILED: obj/base/base/logging.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/logging.o.d -DBASE_IMPLEMENTATION
  -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES
  -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_compat -Wall -Wextra -Wimplicit-fallthrough -Wextra-semi
  -Wunreachable-code-aggressive -Wgnu -Wno-gnu-anonymous-struct -Wno-gnu-conditional-omitted-operand
  -Wno-gnu-include-next -Wno-gnu-label-as-value -Wno-gnu-redeclared-enum -Wno-gnu-statement-expression
  -Wno-gnu-zero-variadic-macro-arguments -Wno-zero-length-array -Wthread-safety -Wunguarded-availability
  -Wno-missing-field-initializers -Wno-unused-parameter -Wno-psabi -Wloop-analysis
  -Wno-unneeded-internal-declaration -Wno-cast-function-type -Wno-thread-safety-reference-return
  -Wno-nontrivial-memcall -Wno-uninitialized-const-pointer -Wexit-time-destructors -Wshadow
  -fno-delete-null-pointer-checks -fno-strict-overflow -fno-ident -fno-math-errno -fno-strict-aliasing
  -fstack-protector -fno-unwind-tables -fno-asynchronous-unwind-tables -fPIC -fcolor-diagnostics
  -fmerge-all-constants -fno-sized-deallocation -fcrash-diagnostics-dir=../clang-crashreports -mllvm
  -instcombine-lower-dbg-declare=0 -mllvm -split-threshold-for-reg-with-hint=0 -ffp-contract=off -flto=thin
  -fsplit-lto-unit -mllvm -inlinehint-threshold=360 -fwhole-program-vtables -fcomplete-member-pointers
  -ffunction-sections -fno-short-enums -mbranch-protection=standard --target=aarch64-linux-android24 -mno-outline
  -Wno-builtin-macro-redefined -D__DATE__= -D__TIME__= -D__TIMESTAMP__= -ffile-compilation-dir=.
  -no-canonical-prefixes -Xclang -fmodule-file-home-is-cwd -Xclang -fmodules-cache-path=/not_exist_dummy_dir
  --warning-suppression-mappings=../../build/config/warning_suppression.txt -fno-omit-frame-pointer -g0
  -fsanitize=array-bounds -fsanitize-trap=array-bounds
  -fsanitize-ignorelist=../../tools/ubsan/array_bounds_ignorelist.txt -fvisibility=hidden -Wheader-hygiene
  -Wstring-conversion -Wtautological-overlap-compare -Xclang -add-plugin -Xclang find-bad-constructs -Xclang
  -plugin-arg-find-bad-constructs -Xclang check-stack-allocated -Xclang -plugin-arg-find-bad-constructs -Xclang
  check-ipc -Xclang -add-plugin -Xclang raw-ptr-plugin -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  check-raw-ptr-to-stack-allocated -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  disable-check-raw-ptr-to-stack-allocated-error -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../third_party/dawn/ -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../build/config/clang/chrome/test/fuzzing/webidl_fuzzing/ -DUNSAFE_BUFFERS_BUILD -Xclang
  -add-plugin -Xclang unsafe-buffers -Xclang -plugin-arg-unsafe-buffers -Xclang
  ../../build/config/unsafe_buffers_paths.txt -Wimplicit-int-conversion -Wshorten-64-to-32 -Wsign-compare
  -Wsign-conversion -Wtautological-unsigned-zero-compare -Wglobal-constructors -O2 -fdata-sections
  -ffunction-sections -fno-unique-section-names -Wno-invalid-offsetof -Wenum-compare-conditional
  -Wno-nullability-completeness -std=c++20 -Wno-trigraphs -fexperimental-relative-c++-abi-vtables
  -gsimple-template-names -fno-exceptions -fno-rtti -nostdinc++ -isystemgen/third_party/libc++/src/include
  -isystem../../third_party/libc++abi/src/include
  --sysroot=../../third_party/android_toolchain/ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot
  -fvisibility-inlines-hidden -fmodules -fno-implicit-module-maps -fno-implicit-modules -Xclang
  -fmodules-local-submodule-visibility -Wno-modules-ambiguous-internal-linkage -Wno-modules-import-nested-redundant
  -Wno-module-import-in-extern-c -fbuiltin-module-map
  -fmodule-map-file=gen/build/modules/android-arm64/module.modulemap
  -fmodule-map-file=gen/third_party/libc++/src/include/module.modulemap
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_float/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_intrinsics/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_inttypes/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_iso646/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_limits/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdalign/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdarg/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdatomic/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdbool/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdcountof/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef_wint_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdint/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdnoreturn/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_unwind/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/ptrauth/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_complex_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_core/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_ctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_errno_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_fenv_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_float_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_inttypes_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_math_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_private_mbstate_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_stdatomic_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_string_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_tgmath_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_uchar_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_wctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage1/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage2/module.pcm -c ../../base/logging.cc -o
  obj/base/base/logging.o
  In file included from ../../base/logging.cc:48:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/logging.cc:52:
  In file included from ../../base/trace_event/typed_macros.h:15:
  ../../third_party/perfetto/include/perfetto/tracing/event_context.h:9:10: fatal error:
  'perfetto/tracing/traced_value.h' file not found
  9 | #include "perfetto/tracing/traced_value.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1387/4772] CXX obj/base/base/memory_pressure_monitor.o
  [1388/4772] CXX obj/base/base/post_delayed_memory_reduction_task.o
  [1389/4772] CXX obj/base/base/memory_pressure_listener.o
  FAILED: obj/base/base/memory_pressure_listener.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/memory_pressure_listener.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_compat -Wall -Wextra -Wimplicit-fallthrough -Wextra-semi
  -Wunreachable-code-aggressive -Wgnu -Wno-gnu-anonymous-struct -Wno-gnu-conditional-omitted-operand
  -Wno-gnu-include-next -Wno-gnu-label-as-value -Wno-gnu-redeclared-enum -Wno-gnu-statement-expression
  -Wno-gnu-zero-variadic-macro-arguments -Wno-zero-length-array -Wthread-safety -Wunguarded-availability
  -Wno-missing-field-initializers -Wno-unused-parameter -Wno-psabi -Wloop-analysis
  -Wno-unneeded-internal-declaration -Wno-cast-function-type -Wno-thread-safety-reference-return
  -Wno-nontrivial-memcall -Wno-uninitialized-const-pointer -Wexit-time-destructors -Wshadow
  -fno-delete-null-pointer-checks -fno-strict-overflow -fno-ident -fno-math-errno -fno-strict-aliasing
  -fstack-protector -fno-unwind-tables -fno-asynchronous-unwind-tables -fPIC -fcolor-diagnostics
  -fmerge-all-constants -fno-sized-deallocation -fcrash-diagnostics-dir=../clang-crashreports -mllvm
  -instcombine-lower-dbg-declare=0 -mllvm -split-threshold-for-reg-with-hint=0 -ffp-contract=off -flto=thin
  -fsplit-lto-unit -mllvm -inlinehint-threshold=360 -fwhole-program-vtables -fcomplete-member-pointers
  -ffunction-sections -fno-short-enums -mbranch-protection=standard --target=aarch64-linux-android24 -mno-outline
  -Wno-builtin-macro-redefined -D__DATE__= -D__TIME__= -D__TIMESTAMP__= -ffile-compilation-dir=.
  -no-canonical-prefixes -Xclang -fmodule-file-home-is-cwd -Xclang -fmodules-cache-path=/not_exist_dummy_dir
  --warning-suppression-mappings=../../build/config/warning_suppression.txt -fno-omit-frame-pointer -g0
  -fsanitize=array-bounds -fsanitize-trap=array-bounds
  -fsanitize-ignorelist=../../tools/ubsan/array_bounds_ignorelist.txt -fvisibility=hidden -Wheader-hygiene
  -Wstring-conversion -Wtautological-overlap-compare -Xclang -add-plugin -Xclang find-bad-constructs -Xclang
  -plugin-arg-find-bad-constructs -Xclang check-stack-allocated -Xclang -plugin-arg-find-bad-constructs -Xclang
  check-ipc -Xclang -add-plugin -Xclang raw-ptr-plugin -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  check-raw-ptr-to-stack-allocated -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  disable-check-raw-ptr-to-stack-allocated-error -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../third_party/dawn/ -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../build/config/clang/chrome/test/fuzzing/webidl_fuzzing/ -DUNSAFE_BUFFERS_BUILD -Xclang
  -add-plugin -Xclang unsafe-buffers -Xclang -plugin-arg-unsafe-buffers -Xclang
  ../../build/config/unsafe_buffers_paths.txt -Wimplicit-int-conversion -Wshorten-64-to-32 -Wsign-compare
  -Wsign-conversion -Wtautological-unsigned-zero-compare -Wglobal-constructors -O2 -fdata-sections
  -ffunction-sections -fno-unique-section-names -Wno-invalid-offsetof -Wenum-compare-conditional
  -Wno-nullability-completeness -std=c++20 -Wno-trigraphs -fexperimental-relative-c++-abi-vtables
  -gsimple-template-names -fno-exceptions -fno-rtti -nostdinc++ -isystemgen/third_party/libc++/src/include
  -isystem../../third_party/libc++abi/src/include
  --sysroot=../../third_party/android_toolchain/ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot
  -fvisibility-inlines-hidden -fmodules -fno-implicit-module-maps -fno-implicit-modules -Xclang
  -fmodules-local-submodule-visibility -Wno-modules-ambiguous-internal-linkage -Wno-modules-import-nested-redundant
  -Wno-module-import-in-extern-c -fbuiltin-module-map
  -fmodule-map-file=gen/build/modules/android-arm64/module.modulemap
  -fmodule-map-file=gen/third_party/libc++/src/include/module.modulemap
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_float/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_intrinsics/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_inttypes/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_iso646/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_limits/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdalign/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdarg/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdatomic/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdbool/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdcountof/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef_wint_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdint/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdnoreturn/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_unwind/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/ptrauth/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_complex_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_core/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_ctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_errno_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_fenv_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_float_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_inttypes_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_math_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_private_mbstate_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_stdatomic_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_string_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_tgmath_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_uchar_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_wctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage1/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage2/module.pcm -c
  ../../base/memory/memory_pressure_listener.cc -o obj/base/base/memory_pressure_listener.o
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener.cc:16:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener.cc:17:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener.cc:187:29: error: no member named
  'set_chrome_memory_pressure_notification' in 'perfetto::protos::pbzero::ChromeTrackEvent'
  187 |         auto* data = event->set_chrome_memory_pressure_notification();
  |                      ~~~~~  ^
  ../../base/memory/memory_pressure_listener.cc:183:3: error: use of undeclared identifier 'TRACE_EVENT'
  183 |   TRACE_EVENT(
  |   ^~~~~~~~~~~
  3 warnings and 4 errors generated.
  [1390/4772] CXX obj/base/base/memory_pressure_listener_registry.o
  FAILED: obj/base/base/memory_pressure_listener_registry.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF
  obj/base/base/memory_pressure_listener_registry.o.d -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL
  -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES -D_GNU_SOURCE
  -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_compat -Wall -Wextra -Wimplicit-fallthrough -Wextra-semi
  -Wunreachable-code-aggressive -Wgnu -Wno-gnu-anonymous-struct -Wno-gnu-conditional-omitted-operand
  -Wno-gnu-include-next -Wno-gnu-label-as-value -Wno-gnu-redeclared-enum -Wno-gnu-statement-expression
  -Wno-gnu-zero-variadic-macro-arguments -Wno-zero-length-array -Wthread-safety -Wunguarded-availability
  -Wno-missing-field-initializers -Wno-unused-parameter -Wno-psabi -Wloop-analysis
  -Wno-unneeded-internal-declaration -Wno-cast-function-type -Wno-thread-safety-reference-return
  -Wno-nontrivial-memcall -Wno-uninitialized-const-pointer -Wexit-time-destructors -Wshadow
  -fno-delete-null-pointer-checks -fno-strict-overflow -fno-ident -fno-math-errno -fno-strict-aliasing
  -fstack-protector -fno-unwind-tables -fno-asynchronous-unwind-tables -fPIC -fcolor-diagnostics
  -fmerge-all-constants -fno-sized-deallocation -fcrash-diagnostics-dir=../clang-crashreports -mllvm
  -instcombine-lower-dbg-declare=0 -mllvm -split-threshold-for-reg-with-hint=0 -ffp-contract=off -flto=thin
  -fsplit-lto-unit -mllvm -inlinehint-threshold=360 -fwhole-program-vtables -fcomplete-member-pointers
  -ffunction-sections -fno-short-enums -mbranch-protection=standard --target=aarch64-linux-android24 -mno-outline
  -Wno-builtin-macro-redefined -D__DATE__= -D__TIME__= -D__TIMESTAMP__= -ffile-compilation-dir=.
  -no-canonical-prefixes -Xclang -fmodule-file-home-is-cwd -Xclang -fmodules-cache-path=/not_exist_dummy_dir
  --warning-suppression-mappings=../../build/config/warning_suppression.txt -fno-omit-frame-pointer -g0
  -fsanitize=array-bounds -fsanitize-trap=array-bounds
  -fsanitize-ignorelist=../../tools/ubsan/array_bounds_ignorelist.txt -fvisibility=hidden -Wheader-hygiene
  -Wstring-conversion -Wtautological-overlap-compare -Xclang -add-plugin -Xclang find-bad-constructs -Xclang
  -plugin-arg-find-bad-constructs -Xclang check-stack-allocated -Xclang -plugin-arg-find-bad-constructs -Xclang
  check-ipc -Xclang -add-plugin -Xclang raw-ptr-plugin -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  check-raw-ptr-to-stack-allocated -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  disable-check-raw-ptr-to-stack-allocated-error -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../third_party/dawn/ -Xclang -plugin-arg-raw-ptr-plugin -Xclang
  raw-ptr-exclude-path=../../build/config/clang/chrome/test/fuzzing/webidl_fuzzing/ -DUNSAFE_BUFFERS_BUILD -Xclang
  -add-plugin -Xclang unsafe-buffers -Xclang -plugin-arg-unsafe-buffers -Xclang
  ../../build/config/unsafe_buffers_paths.txt -Wimplicit-int-conversion -Wshorten-64-to-32 -Wsign-compare
  -Wsign-conversion -Wtautological-unsigned-zero-compare -Wglobal-constructors -O2 -fdata-sections
  -ffunction-sections -fno-unique-section-names -Wno-invalid-offsetof -Wenum-compare-conditional
  -Wno-nullability-completeness -std=c++20 -Wno-trigraphs -fexperimental-relative-c++-abi-vtables
  -gsimple-template-names -fno-exceptions -fno-rtti -nostdinc++ -isystemgen/third_party/libc++/src/include
  -isystem../../third_party/libc++abi/src/include
  --sysroot=../../third_party/android_toolchain/ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot
  -fvisibility-inlines-hidden -fmodules -fno-implicit-module-maps -fno-implicit-modules -Xclang
  -fmodules-local-submodule-visibility -Wno-modules-ambiguous-internal-linkage -Wno-modules-import-nested-redundant
  -Wno-module-import-in-extern-c -fbuiltin-module-map
  -fmodule-map-file=gen/build/modules/android-arm64/module.modulemap
  -fmodule-map-file=gen/third_party/libc++/src/include/module.modulemap
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_float/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_intrinsics/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_inttypes/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_iso646/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_limits/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdalign/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdarg/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdatomic/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdbool/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdcountof/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stddef_wint_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdint/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_stdnoreturn/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/_Builtin_unwind/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/ptrauth/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_complex_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_core/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_ctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_errno_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_fenv_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_float_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_inttypes_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_math_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_private_mbstate_t/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_stdatomic_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_string_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_tgmath_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_uchar_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/std_wctype_h/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage1/module.pcm
  -fmodule-file=obj/build/modules/android-arm64/sys_stage2/module.pcm -c
  ../../base/memory/memory_pressure_listener_registry.cc -o obj/base/base/memory_pressure_listener_registry.o
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:13:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:14:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener_registry.cc:50:29: error: no member named
  'set_chrome_memory_pressure_notification' in 'perfetto::protos::pbzero::ChromeTrackEvent'
  50 |         auto* data = event->set_chrome_memory_pressure_notification();
  |                      ~~~~~  ^
  ../../base/memory/memory_pressure_listener_registry.cc:45:3: error: use of undeclared identifier
  'TRACE_EVENT_INSTANT'
  45 |   TRACE_EVENT_INSTANT(
  |   ^~~~~~~~~~~~~~~~~~~
  3 warnings and 4 errors generated.
  [1391/4772] CXX obj/base/base/platform_shared_memory_region.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç°åœ¨æœ‰ä¸¤ç±»é”™è¯¯ï¼š 1. traced_value.h æ‰¾ä¸åˆ° - event_context.h çš„åŒ…å«è·¯å¾„é—®é¢˜ 2. ChromeTrackEvent ç¼ºå°‘æ–¹æ³• - æˆ‘ä»¬çš„ stub æ²¡æœ‰è¢«æ­£ç¡®åŒ…å« è®©æˆ‘ä¿®å¤ event_context.h çš„åŒ…å«è·¯å¾„ï¼š

â— Read(src\third_party\perfetto\include\perfetto\tracing\event_context.h)
  â¿ Â Read 15 lines

â— åŒ…å«è·¯å¾„çœ‹èµ·æ¥æ˜¯å¯¹çš„ã€‚é—®é¢˜å¯èƒ½æ˜¯ typed_macros.h ä½¿ç”¨äº†ä¸åŒçš„åŒ…å«è·¯å¾„ã€‚è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹ typed_macros.hï¼š

â— Bash(grep -n "event_context.h" "F:/code/naiveproxy-ohos/src/base/trace_event/typed_macros.h" 2>/dev/null | head -5)
  â¿ Â 15:#include "third_party/perfetto/include/perfetto/tracing/event_context.h"

â— é—®é¢˜æ‰¾åˆ°äº†ï¼typed_macros.h ä½¿ç”¨çš„æ˜¯å®Œæ•´è·¯å¾„ third_party/perfetto/include/perfetto/tracing/event_context.hï¼Œè€Œ event_context.h å†…éƒ¨ä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ perfetto/tracing/traced_value.hã€‚è¿™ä¸¤ä¸ªè·¯å¾„çš„åŸºå‡†ä¸åŒã€‚ æˆ‘éœ€è¦åœ¨ event_context.h ä¸­ä¹Ÿä½¿ç”¨å®Œæ•´è·¯å¾„ï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\event_context.h)
  â¿ Â Added 2 lines, removed 2 lines
       6   #define INCLUDE_PERFETTO_TRACING_EVENT_CONTEXT_H_
       7
       8   // Just include traced_value.h which has the real EventContext definition
       9 -#include "perfetto/tracing/traced_value.h"
       9 +#include "third_party/perfetto/include/perfetto/tracing/traced_value.h"
      10
      11   // Include ChromeTrackEvent for code that needs it
      12 -#include "perfetto/protos/pbzero/chrome_track_event.pbzero.h"
      12 +#include "third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h"
      13
      14   #endif  // INCLUDE_PERFETTO_TRACING_EVENT_CONTEXT_H_

â— ç°åœ¨æäº¤å¹¶æ¨é€ï¼š

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "ä¿®å¤ event_context.h åŒ…å«è·¯å¾„â€¦)
  â¿ Â [master cebc44ba] ä¿®å¤ event_context.h åŒ…å«è·¯å¾„
      1 file changed, 2 insertions(+), 2 deletions(-)

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        7e4c676b..cebc44ba  master -> master

â— å®Œç¾ï¼è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤ï¼š

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ç¼–è¯‘å™¨æŠ¥å‘Šæ‰¾ä¸åˆ° traced_value.hï¼š
  fatal error: 'perfetto/tracing/traced_value.h' file not found

  æ ¹æœ¬åŸå› 

  åŒ…å«è·¯å¾„ä¸ä¸€è‡´ï¼š
  - typed_macros.h ä½¿ç”¨: #include "third_party/perfetto/include/perfetto/tracing/event_context.h"
  - event_context.h å†…éƒ¨ä½¿ç”¨: #include "perfetto/tracing/traced_value.h"

  è¿™ä¸¤ä¸ªåŒ…å«è·¯å¾„çš„åŸºå‡†ç›®å½•ä¸åŒï¼š
  - ç¬¬ä¸€ä¸ªåŸºå‡†æ˜¯ src/
  - ç¬¬äºŒä¸ªåŸºå‡†æ˜¯ src/third_party/perfetto/include/

  å½“ç¼–è¯‘å™¨å¤„ç† event_context.h æ—¶ï¼Œå®ƒä¼šä» src/ ç›®å½•æŸ¥æ‰¾ perfetto/tracing/traced_value.hï¼Œä½†æ–‡ä»¶å®é™…åœ¨ src/third_party/perfetto/include/perfetto/tracing/traced_value.hã€‚

  è§£å†³æ–¹æ¡ˆ

  åœ¨ event_context.h ä¸­ä½¿ç”¨ä¸ typed_macros.h ç›¸åŒçš„å®Œæ•´è·¯å¾„ï¼š
  // ä¿®æ”¹å‰
  #include "perfetto/tracing/traced_value.h"
  #include "perfetto/protos/pbzero/chrome_track_event.pbzero.h"

  // ä¿®æ”¹å
  #include "third_party/perfetto/include/perfetto/tracing/traced_value.h"
  #include "third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h"

  ä¸ºä»€ä¹ˆè¿™æ ·æœ‰æ•ˆï¼Ÿ

  1. ç»Ÿä¸€åŒ…å«è·¯å¾„åŸºå‡†
    - æ‰€æœ‰åŒ…å«éƒ½ä» src/ ç›®å½•å¼€å§‹
    - ç¼–è¯‘å™¨å¯ä»¥æ­£ç¡®æ‰¾åˆ°æ‰€æœ‰æ–‡ä»¶
  2. ä¸ Chromium æ„å»ºç³»ç»Ÿä¸€è‡´
    - Chromium çš„åŒ…å«è·¯å¾„é…ç½®ä»¥ src/ ä¸ºæ ¹ç›®å½•
    - ä½¿ç”¨å®Œæ•´è·¯å¾„é¿å…æ­§ä¹‰
  3. é¿å…ç›¸å¯¹è·¯å¾„é—®é¢˜
    - ä¸ä¾èµ–å½“å‰æ–‡ä»¶çš„ä½ç½®
    - æ›´åŠ æ˜ç¡®å’Œå¯é 

  ä¿®æ”¹çš„æ–‡ä»¶

  ä¿®æ”¹: src/third_party/perfetto/include/perfetto/tracing/event_context.h
  - å°†æ‰€æœ‰åŒ…å«è·¯å¾„æ”¹ä¸ºä» src/ å¼€å§‹çš„å®Œæ•´è·¯å¾„

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾ 1386/4772 (çº¦29%)ï¼Œæ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚è¿™æ¬¡ä¿®å¤åº”è¯¥èƒ½è§£å†³æ‰€æœ‰åŒ…å«è·¯å¾„çš„é—®é¢˜ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœï¼ğŸš€

âœ» Cooked for 1m 3s

â¯ [1263/4772] CXX obj/base/base/asan_invalid_access.o
  [1264/4772] CXX obj/base/base/variant_map.o
  [1265/4772] CXX obj/base/base/debugger.o
  [1266/4772] CXX obj/base/base/profiler.o
  [1267/4772] CXX obj/base/base/command_line.o
  [1268/4772] CXX obj/base/base/dump_without_crashing.o
  In file included from ../../base/debug/dump_without_crashing.cc:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1269/4772] CXX obj/base/base/environment.o
  [1270/4772] ACTION
  //net/base/registry_controlled_domains:registry_controlled_domains(//build/toolchain/android:android_clang_arm64)
  [1271/4772] CXX obj/base/base/block_tests_writing_to_special_dirs.o
  [1272/4772] CXX obj/base/base/file_tracing.o
  In file included from ../../base/files/file_tracing.cc:10:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1273/4772] CXX obj/base/base/file.o
  In file included from ../../base/files/file.cc:16:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1274/4772] CXX obj/base/base/task_trace.o
  In file included from ../../base/debug/task_trace.cc:12:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1275/4772] CXX obj/base/base/safe_base_name.o
  [1276/4772] CXX obj/base/base/callback_helpers.o
  [1277/4772] CXX obj/base/base/scoped_file.o
  [1278/4772] CXX obj/base/base/file_path.o
  In file included from ../../base/files/file_path.cc:25:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1279/4772] CXX obj/base/base/memory_mapped_file.o
  [1280/4772] CXX obj/base/base/callback_internal.o
  [1281/4772] CXX obj/base/base/features.o
  In file included from ../../base/features.cc:12:
  In file included from ../../base/task/sequence_manager/sequence_manager_impl.h:45:
  In file included from ../../base/task/sequence_manager/thread_controller.h:32:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1282/4772] CXX obj/base/base/legacy_hash.o
  [1283/4772] CXX obj/base/base/feature_list.o
  [1284/4772] CXX obj/base/base/hash.o
  [1285/4772] CXX obj/base/base/concurrent_closures.o
  [1286/4772] CXX obj/base/base/json_string_value_serializer.o
  [1287/4772] CXX obj/base/base/json_reader.o
  [1288/4772] CXX obj/base/base/string_escape.o
  [1289/4772] CXX obj/base/base/json_value_converter.o
  [1290/4772] CXX obj/base/base/json_writer.o
  [1291/4772] CXX obj/base/base/lazy_instance_helpers.o
  [1292/4772] CXX obj/base/base/values_util.o
  [1293/4772] CXX obj/base/base/json_parser.o
  [1294/4772] CXX obj/base/base/location.o
  In file included from ../../base/location.cc:12:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1295/4772] CXX obj/base/base/aligned_memory.o
  [1296/4772] CXX obj/base/base/linux_util.o
  [1297/4772] CXX obj/base/base/platform_shared_memory_handle.o
  [1298/4772] CXX obj/base/base/logging.o
  FAILED: obj/base/base/logging.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/logging.o.d -DBASE_IMPLEMENTATION
  -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES
  -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_
  In file included from ../../base/logging.cc:48:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/logging.cc:52:
  In file included from ../../base/trace_event/typed_macros.h:15:
  In file included from ../../third_party/perfetto/include/perfetto/tracing/event_context.h:12:
  ../../third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h:20:7: error: redefinition
  of 'ChromeTrackEvent'
  20 | class ChromeTrackEvent {
  |       ^
  ../../base/tracing/protos/chrome_track_event.pbzero.h:18:7: note: previous definition is here
  18 | class ChromeTrackEvent {
  |       ^
  In file included from ../../base/logging.cc:52:
  In file included from ../../base/trace_event/typed_macros.h:16:
  ../../third_party/perfetto/include/perfetto/tracing/string_helpers.h:20:10: fatal error: 'perfetto/base/export.h'
  file not found
  20 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 2 errors generated.
  [1299/4772] CXX obj/base/base/memory_pressure_monitor.o
  [1300/4772] CXX obj/base/base/memory_pressure_listener.o
  FAILED: obj/base/base/memory_pressure_listener.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/memory_pressure_listener.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener.cc:16:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener.cc:17:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener.cc:187:29: error: no member named
  'set_chrome_memory_pressure_notification' in 'perfetto::protos::pbzero::ChromeTrackEvent'
  187 |         auto* data = event->set_chrome_memory_pressure_notification();
  |                      ~~~~~  ^
  ../../base/memory/memory_pressure_listener.cc:183:3: error: use of undeclared identifier 'TRACE_EVENT'
  183 |   TRACE_EVENT(
  |   ^~~~~~~~~~~
  3 warnings and 4 errors generated.
  [1301/4772] CXX obj/base/base/post_delayed_memory_reduction_task.o
  [1302/4772] CXX obj/base/base/platform_shared_memory_region.o
  [1303/4772] CXX obj/base/base/memory_pressure_listener_registry.o
  FAILED: obj/base/base/memory_pressure_listener_registry.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF
  obj/base/base/memory_pressure_listener_registry.o.d -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL
  -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES -D_GNU_SOURCE
  -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib -I../../third_p
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:13:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:14:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener_registry.cc:50:29: error: no member named
  'set_chrome_memory_pressure_notification' in 'perfetto::protos::pbzero::ChromeTrackEvent'
  50 |         auto* data = event->set_chrome_memory_pressure_notification();
  |                      ~~~~~  ^
  ../../base/memory/memory_pressure_listener_registry.cc:45:3: error: use of undeclared identifier
  'TRACE_EVENT_INSTANT'
  45 |   TRACE_EVENT_INSTANT(
  |   ^~~~~~~~~~~~~~~~~~~
  3 warnings and 4 errors generated.
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.

â— ç°åœ¨æœ‰ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š 1. ChromeTrackEvent é‡å¤å®šä¹‰ - æˆ‘ä»¬çš„ stub ä¸ Chromium è‡ªå·±çš„å®šä¹‰å†²çª 2. ç¼ºå°‘å…¶ä»– Perfetto ç›¸å…³çš„å®šä¹‰ - TRACE_DISABLED_BY_DEFAULTã€MemoryPressureLevel ç­‰ çœ‹èµ·æ¥ Chromium å·²ç»æœ‰äº† ChromeTrackEvent çš„å®šä¹‰åœ¨ ../../base/tracing/protos/chrome_track_event.pbzero.hã€‚æˆ‘ä»¬ä¸åº”è¯¥åˆ›å»ºè‡ªå·±çš„ç‰ˆæœ¬ã€‚è®©æˆ‘åˆ é™¤æˆ‘ä»¬çš„ stub å¹¶ä½¿ç”¨ Chromium çš„ç‰ˆæœ¬ï¼š

â— Bash(rm "F:/code/naiveproxy-ohos/src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h")
  â¿ Â (No content)

â— ç°åœ¨ä¿®æ”¹ event_context.hï¼Œä¸è¦åŒ…å« ChromeTrackEventï¼š

â— Update(src\third_party\perfetto\include\perfetto\tracing\event_context.h)
  â¿ Â Removed 3 lines
       8   // Just include traced_value.h which has the real EventContext definition
       9   #include "third_party/perfetto/include/perfetto/tracing/traced_value.h"
      10
      11 - // Include ChromeTrackEvent for code that needs it
      12 - #include "third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h"
      13 -
      11   #endif  // INCLUDE_PERFETTO_TRACING_EVENT_CONTEXT_H_

â— ç°åœ¨æäº¤å¹¶æ¨é€ï¼š

â— Bash(cd "F:/code/naiveproxy-ohos" && git add -A && git commit -m "åˆ é™¤é‡å¤çš„ ChromeTrackEvent stubâ€¦)
  â¿ Â [master cb092753] åˆ é™¤é‡å¤çš„ ChromeTrackEvent stub
      2 files changed, 40 deletions(-)
      delete mode 100644 src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h

â— Bash(cd "F:/code/naiveproxy-ohos" && git push)
  â¿ Â To https://github.com/simtelboy/naiveproxy.git
        cebc44ba..cb092753  master -> master

â— å®Œç¾ï¼è®©æˆ‘æ€»ç»“ä¸€ä¸‹è¿™æ¬¡ä¿®å¤ï¼š

  æœ¬æ¬¡ä¿®å¤æ€»ç»“

  é—®é¢˜åˆ†æ

  ç¼–è¯‘å™¨æŠ¥å‘Š ChromeTrackEvent é‡å¤å®šä¹‰ï¼š
  error: redefinition of 'ChromeTrackEvent'
  ../../third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h:20:7
  ../../base/tracing/protos/chrome_track_event.pbzero.h:18:7: note: previous definition is here

  æ ¹æœ¬åŸå› 

  é‡å¤å®šä¹‰å†²çªï¼š
  - Chromium å·²ç»æœ‰è‡ªå·±çš„ ChromeTrackEvent å®šä¹‰åœ¨ src/base/tracing/protos/chrome_track_event.pbzero.h
  - æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª stub åœ¨ src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h
  - ä¸¤ä¸ªå®šä¹‰å†²çª

  è§£å†³æ–¹æ¡ˆ

  åˆ é™¤æˆ‘ä»¬çš„ stubï¼Œä½¿ç”¨ Chromium çš„ç‰ˆæœ¬ï¼š
  1. åˆ é™¤ src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h
  2. ä» event_context.h ä¸­ç§»é™¤å¯¹å®ƒçš„åŒ…å«
  3. è®©ä»£ç ä½¿ç”¨ Chromium è‡ªå·±çš„ ChromeTrackEvent å®šä¹‰

  ä¸ºä»€ä¹ˆè¿™æ ·æœ‰æ•ˆï¼Ÿ

  1. é¿å…é‡å¤å®šä¹‰
    - Chromium çš„ ChromeTrackEvent å·²ç»æœ‰å®Œæ•´çš„å®ç°
    - åŒ…å«æ‰€æœ‰éœ€è¦çš„æ–¹æ³•ï¼ˆå¦‚ set_chrome_memory_pressure_notification()ï¼‰
    - ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±åˆ›å»º stub
  2. ä½¿ç”¨åŸç”Ÿå®ç°
    - Chromium çš„å®ç°æ˜¯æ­£ç¡®çš„
    - ä¸å…¶ä»– Chromium ä»£ç å…¼å®¹
    - é¿å…äº†æ¥å£ä¸åŒ¹é…çš„é—®é¢˜
  3. ç®€åŒ–ä¾èµ–
    - å‡å°‘äº†æˆ‘ä»¬éœ€è¦ç»´æŠ¤çš„ stub æ–‡ä»¶
    - è®©æ„å»ºç³»ç»Ÿä½¿ç”¨åŸæœ‰çš„æ–‡ä»¶

  å‰©ä½™é—®é¢˜

  ä»é”™è¯¯ä¿¡æ¯ä¸­ï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°å…¶ä»–é—®é¢˜ï¼š
  1. TRACE_DISABLED_BY_DEFAULT æœªå®šä¹‰
  2. perfetto::protos::pbzero::MemoryPressureLevel ä¸å­˜åœ¨
  3. TRACE_EVENT å’Œ TRACE_EVENT_INSTANT æœªå®šä¹‰
  4. perfetto/base/export.h æ‰¾ä¸åˆ°

  è¿™äº›é—®é¢˜ä¼šåœ¨ä¸‹ä¸€è½®ç¼–è¯‘ä¸­æš´éœ²å‡ºæ¥ï¼Œæˆ‘ä»¬ä¼šç»§ç»­ä¿®å¤ã€‚

  ä¿®æ”¹çš„æ–‡ä»¶

  1. åˆ é™¤: src/third_party/perfetto/include/perfetto/protos/pbzero/chrome_track_event.pbzero.h
  2. ä¿®æ”¹: src/third_party/perfetto/include/perfetto/tracing/event_context.h
    - ç§»é™¤ ChromeTrackEvent çš„åŒ…å«

  ç¼–è¯‘è¿›åº¦

  æˆ‘ä»¬å·²ç»åˆ°è¾¾ 1298/4772 (çº¦27.2%)ï¼Œæ­£åœ¨ç¨³æ­¥æ¨è¿›ã€‚

  ç°åœ¨è®©æˆ‘ä»¬ç­‰å¾… GitHub Actions çš„ç¼–è¯‘ç»“æœï¼ğŸš€

âœ» Baked for 1m 3s

â¯ [1286/4772] CXX obj/base/base/intrusive_heap.o
  [1287/4772] CXX obj/base/base/check_op.o
  [1288/4772] CXX obj/base/base/asan_service.o
  [1289/4772] CXX obj/base/base/asan_invalid_access.o
  [1290/4772] CXX obj/base/base/alias.o
  [1291/4772] ACTION
  //net/base/registry_controlled_domains:registry_controlled_domains(//build/toolchain/android:android_clang_arm64)
  [1292/4772] CXX obj/base/base/debugger.o
  [1293/4772] CXX obj/base/base/profiler.o
  [1294/4772] CXX obj/base/base/variant_map.o
  [1295/4772] CXX obj/base/base/command_line.o
  [1296/4772] CXX obj/base/base/block_tests_writing_to_special_dirs.o
  [1297/4772] CXX obj/base/base/environment.o
  [1298/4772] CXX obj/base/base/dump_without_crashing.o
  In file included from ../../base/debug/dump_without_crashing.cc:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1299/4772] CXX obj/base/base/file_tracing.o
  In file included from ../../base/files/file_tracing.cc:10:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1300/4772] CXX obj/base/base/task_trace.o
  In file included from ../../base/debug/task_trace.cc:12:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1301/4772] CXX obj/base/base/safe_base_name.o
  [1302/4772] CXX obj/base/base/file.o
  In file included from ../../base/files/file.cc:16:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1303/4772] CXX obj/base/base/callback_helpers.o
  [1304/4772] CXX obj/base/base/file_path.o
  In file included from ../../base/files/file_path.cc:25:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1305/4772] CXX obj/base/base/memory_mapped_file.o
  [1306/4772] CXX obj/base/base/features.o
  In file included from ../../base/features.cc:12:
  In file included from ../../base/task/sequence_manager/sequence_manager_impl.h:45:
  In file included from ../../base/task/sequence_manager/thread_controller.h:32:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1307/4772] CXX obj/base/base/callback_internal.o
  [1308/4772] CXX obj/base/base/scoped_file.o
  [1309/4772] CXX obj/base/base/legacy_hash.o
  [1310/4772] CXX obj/base/base/feature_list.o
  [1311/4772] CXX obj/base/base/concurrent_closures.o
  [1312/4772] CXX obj/base/base/hash.o
  [1313/4772] CXX obj/base/base/json_reader.o
  [1314/4772] CXX obj/base/base/json_string_value_serializer.o
  [1315/4772] CXX obj/base/base/json_value_converter.o
  [1316/4772] CXX obj/base/base/string_escape.o
  [1317/4772] CXX obj/base/base/lazy_instance_helpers.o
  [1318/4772] CXX obj/base/base/values_util.o
  [1319/4772] CXX obj/base/base/json_writer.o
  [1320/4772] CXX obj/base/base/json_parser.o
  [1321/4772] CXX obj/base/base/linux_util.o
  [1322/4772] CXX obj/base/base/location.o
  In file included from ../../base/location.cc:12:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  3 warnings generated.
  [1323/4772] CXX obj/base/base/aligned_memory.o
  [1324/4772] CXX obj/base/base/platform_shared_memory_handle.o
  [1325/4772] CXX obj/base/base/logging.o
  FAILED: obj/base/base/logging.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/logging.o.d -DBASE_IMPLEMENTATION
  -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES
  -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_features/src/ndk_
  In file included from ../../base/logging.cc:48:
  In file included from ../../base/task/common/task_annotator.h:18:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/logging.cc:52:
  In file included from ../../base/trace_event/typed_macros.h:16:
  ../../third_party/perfetto/include/perfetto/tracing/string_helpers.h:20:10: fatal error: 'perfetto/base/export.h'
  file not found
  20 | #include "perfetto/base/export.h"
  |          ^~~~~~~~~~~~~~~~~~~~~~~~
  3 warnings and 1 error generated.
  [1326/4772] CXX obj/base/base/memory_pressure_monitor.o
  [1327/4772] CXX obj/base/base/post_delayed_memory_reduction_task.o
  [1328/4772] CXX obj/base/base/memory_pressure_listener.o
  FAILED: obj/base/base/memory_pressure_listener.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF obj/base/base/memory_pressure_listener.o.d
  -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2
  -DNO_UNWIND_TABLES -D_GNU_SOURCE -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__
  -DHAVE_SYS_UIO_H -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib
  -I../../third_party/cpu_
  In file included from ../../base/memory/memory_pressure_listener.cc:15:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener.cc:16:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener.cc:17:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener.cc:187:29: error: no member named
  'set_chrome_memory_pressure_notification' in 'perfetto::protos::pbzero::ChromeTrackEvent'
  187 |         auto* data = event->set_chrome_memory_pressure_notification();
  |                      ~~~~~  ^
  ../../base/memory/memory_pressure_listener.cc:183:3: error: use of undeclared identifier 'TRACE_EVENT'
  183 |   TRACE_EVENT(
  |   ^~~~~~~~~~~
  3 warnings and 4 errors generated.
  [1329/4772] CXX obj/base/base/memory_pressure_listener_registry.o
  FAILED: obj/base/base/memory_pressure_listener_registry.o
  ../../third_party/llvm-build/Release+Asserts/bin/clang++ -MD -MF
  obj/base/base/memory_pressure_listener_registry.o.d -DBASE_IMPLEMENTATION -DIS_RAW_PTR_IMPL
  -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DNO_UNWIND_TABLES -D_GNU_SOURCE
  -D__ARM_NEON__=1 -DANDROID -D__ANDROID_UNAVAILABLE_SYMBOLS_ARE_WEAK__ -DHAVE_SYS_UIO_H
  -DANDROID_NDK_VERSION_ROLL=r28_1 -DCR_CLANG_REVISION=\"llvmorg-22-init-8940-g4d4cb757-84\"
  -D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_EXTENSIVE -D_LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
  -D_LIBCXXABI_DISABLE_VISIBILITY_ANNOTATIONS -D_LIBCPP_INSTRUMENTED_WITH_ASAN=0
  -DCR_LIBCXX_REVISION=8cd54f6b0741cdef08299711668e6b25fef26406 -DOFFICIAL_BUILD -DNDEBUG -DNVALGRIND
  -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DUSE_LIBCXX_MODULES -I../.. -Igen -I../../buildtools/third_party/libc++
  -I../../base/allocator/partition_allocator/src -Igen/base/allocator/partition_allocator/src
  -I../../third_party/abseil-cpp -I../../third_party/boringssl/src/include -I../../third_party/zlib -I../../third_p
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:12:
  In file included from ../../base/trace_event/interned_args_helper.h:15:
  In file included from ../../base/trace_event/trace_event.h:23:
  ../../base/trace_event/builtin_categories.h:22:80: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  22 |                                        TRACE_DISABLED_BY_DEFAULT("NotTesting"));
  |                                                                                ^
  ../../base/trace_event/builtin_categories.h:595:54: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  595 |         TRACE_DISABLED_BY_DEFAULT("v8.stack_trace")));
  |                                                      ^
  ../../base/trace_event/builtin_categories.h:598:45: warning: extra ';' outside of a function is incompatible with
  C++98 [-Wc++98-compat-extra-semi]
  598 | PERFETTO_USE_CATEGORIES_FROM_NAMESPACE(base);
  |                                             ^
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:13:
  ../../base/trace_event/memory_dump_manager.h:44:7: error: use of undeclared identifier
  'TRACE_DISABLED_BY_DEFAULT'
  44 |       TRACE_DISABLED_BY_DEFAULT("memory-infra");
  |       ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from ../../base/memory/memory_pressure_listener_registry.cc:14:
  ../../base/trace_event/memory_pressure_level_proto.h:20:13: error: no type named 'MemoryPressureLevel' in
  namespace 'perfetto::protos::pbzero'; did you mean simply 'MemoryPressureLevel'?
  20 | BASE_EXPORT perfetto::protos::pbzero::MemoryPressureLevel
  |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |             MemoryPressureLevel
  ../../base/memory/memory_pressure_level.h:15:6: note: 'MemoryPressureLevel' declared here
  15 | enum MemoryPressureLevel {
  |      ^
  ../../base/memory/memory_pressure_listener_registry.cc:50:29: error: no member named
  'set_chrome_memory_pressure_notification' in 'perfetto::protos::pbzero::ChromeTrackEvent'
  50 |         auto* data = event->set_chrome_memory_pressure_notification();
  |                      ~~~~~  ^
  ../../base/memory/memory_pressure_listener_registry.cc:45:3: error: use of undeclared identifier
  'TRACE_EVENT_INSTANT'
  45 |   TRACE_EVENT_INSTANT(
  |   ^~~~~~~~~~~~~~~~~~~
  3 warnings and 4 errors generated.
  [1330/4772] CXX obj/base/base/platform_shared_memory_region.o
  ninja: build stopped: subcommand failed.
  Error: Process completed with exit code 1.
